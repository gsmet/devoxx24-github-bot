{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/21008",
  "id": 1036153240,
  "node_id": "I_kwDOCFbutM49wnGY",
  "number": 21008,
  "title": "Iterating over a list of enums generated by Qute Namespace Extensions no longer works",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1714005220,
      "node_id": "MDU6TGFiZWwxNzE0MDA1MjIw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/qute",
      "name": "area/qute",
      "color": "0366d6",
      "default": false,
      "description": "The template engine"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/156",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/156",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/156/labels",
    "id": 7270553,
    "node_id": "MI_kwDOCFbutM4AbvCZ",
    "number": 156,
    "title": "2.4.1.Final",
    "description": "",
    "creator": {
      "login": "aloubyansky",
      "id": 323379,
      "node_id": "MDQ6VXNlcjMyMzM3OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/323379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aloubyansky",
      "html_url": "https://github.com/aloubyansky",
      "followers_url": "https://api.github.com/users/aloubyansky/followers",
      "following_url": "https://api.github.com/users/aloubyansky/following{/other_user}",
      "gists_url": "https://api.github.com/users/aloubyansky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aloubyansky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aloubyansky/subscriptions",
      "organizations_url": "https://api.github.com/users/aloubyansky/orgs",
      "repos_url": "https://api.github.com/users/aloubyansky/repos",
      "events_url": "https://api.github.com/users/aloubyansky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aloubyansky/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 87,
    "state": "closed",
    "created_at": "2021-10-20T06:35:24Z",
    "updated_at": "2021-11-11T13:31:49Z",
    "due_on": null,
    "closed_at": "2021-11-03T11:29:46Z"
  },
  "comments": 6,
  "created_at": "2021-10-26T11:07:41Z",
  "updated_at": "2021-11-02T10:38:36Z",
  "closed_at": "2021-10-27T10:20:23Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWe leverage Qute Namespace extensions to populate a list or dropdown with values from an enum. See https://quarkus.io/version/main/guides/qute-reference#namespace_extension_methods\r\n\r\n```java\r\npublic enum State {\r\n    OPEN(\"Open\"), CLOSED(\"Closed\");\r\n\r\n    private final String displayName;\r\n\r\n    State(String displayName) {\r\n        this.displayName = displayName;\r\n    }\r\n\r\n    public String getDisplayName() {\r\n        return displayName;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@TemplateExtension(namespace = \"domain\")\r\npublic static class DomainExtensions {\r\n\r\n    static Set<State> states() {\r\n        return EnumSet.allOf(State.class);\r\n    }\r\n}\r\n```\r\n\r\n```html\r\n<ul>\r\n    {#for state in domain:states}\r\n        <li>{state.displayName}</li>\r\n    {/for}\r\n</ul>\r\n```\r\n\r\nHowever this now results in an exception, also when we use checked templates.\r\n\r\n\r\n```\r\n[1] Incorrect expression found: {state.displayName}\r\n\t- property/method [displayName] not found on class [java.util.Set<nl.wjglerum.SomePage$State>] nor handled by an extension method\r\n\t- at page.qute.html:31\r\n\tat io.quarkus.qute.deployment.QuteProcessor.processTemplateErrors(QuteProcessor.java:186)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat io.quarkus.deployment.ExtensionLoader$2.execute(ExtensionLoader.java:887)\r\n\tat io.quarkus.builder.BuildContext.run(BuildContext.java:277)\r\n\tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n\tSuppressed: io.quarkus.qute.TemplateException: Incorrect expression found: {state.displayName}\r\n\t- property/method [displayName] not found on class [java.util.Set<nl.wjglerum.SomePage$State>] nor handled by an extension method\r\n\t- at page.qute.html:31\r\n\t\tat io.quarkus.qute.deployment.QuteProcessor.processTemplateErrors(QuteProcessor.java:166)\r\n\t\t... 11 more\r\n```\r\n\r\nIt does work correctly when you just want to render the enums, but as soon as you call a property from the enum it fails. It looks like Qute incorrectly tries to find this (virtual) method on the Set or List instance instead of the enum in the collection.\r\n\r\nThis used to work up until version 2.4.0.CR1 but just failed on the latest snapshot build from the main branch.\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Actual behavior\r\n\r\n_No response_\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n_No response_\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\nSample project:\r\n[quarkus-qute-enum.zip](https://github.com/quarkusio/quarkus/files/7417590/quarkus-qute-enum.zip)\r\n ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21008/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
