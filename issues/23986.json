{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23986",
  "id": 1150998630,
  "node_id": "I_kwDOCFbutM5Emthm",
  "number": 23986,
  "title": "Quarkus Multipart not working for multi layer applications",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/176",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/176",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/176/labels",
    "id": 7721855,
    "node_id": "MI_kwDOCFbutM4AddN_",
    "number": 176,
    "title": "2.7.3.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 65,
    "state": "closed",
    "created_at": "2022-02-28T18:06:00Z",
    "updated_at": "2022-03-02T13:50:20Z",
    "due_on": null,
    "closed_at": "2022-03-02T13:50:20Z"
  },
  "comments": 8,
  "created_at": "2022-02-26T00:47:01Z",
  "updated_at": "2022-03-01T20:03:42Z",
  "closed_at": "2022-03-01T07:13:22Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWe have an export-import microservice design that exports and imports data, one microservice component per family of entities.\r\nThis microservice design imports & exports using rest reactive design. And it works perfectly without any issues. \r\n\r\n**Requirement**\r\nBut now we have a different requirement. We have a module that provides the user a page to select the list of microservices that needs to be exported and/or imported. After selecting multiple microservices and clicking on \"Export\" button, a zip file will be generated that contains the exported file of all the microservices selected on the page.\r\n\r\n**Design**\r\nSince all the components already have the export import function, all I have to do is created a separate service that will do the following.\r\n- Take a request that comprises the selected component names.\r\n- Iterate through the component names, and build a Unijoin list to call the export import function of all the microservices in parallel.\r\n`UniJoin.Builder<CommonAccountTypeXMLDto> builder = Uni.join().builder();\r\nbuilder.joinAll().andFailFast();`\r\n- Collect the files into a zip file, and return the zip file.\r\n\r\n**Issue**\r\nThe service uses Rest Reactive Client to connect to the individual microservices. So I use the 'Rest Reactive Client with Multipart' approach. But it gives an error.\r\n`022-02-25 16:13:11,174 ERROR [org.jbo.res.rea.com.cor.AbstractResteasyReactiveContext] (executor-thread-0) Request failed: javax.ws.rs.ProcessingException: Response could not be mapped to type class com.company.services.exim.client.DownloadFormData`\n\n### Expected behavior\n\nA Quarkus microservice using Rest Reactive Client fails with an exception when it connects with a Quarkus Rest Reactive Service. Though the requirement is for Multipart bodies, it fails for normal bodies too.\r\n\r\nIn summary, a Quarkus service calling another quarkus service using Rest Reactive Client fails.\n\n### Actual behavior\n\nQuarkus Rest Reactive Client should be able to connect to a Quarkus Rest Service.\n\n### How to Reproduce?\n\nSteps to reproduce the issue:\r\n\r\n1. Create a Restful Reactive service with two methods, one returning a normal class, while other returns Multipart.\r\n2. Create a separate service with a Restful Reactive Client having the same two methods as defined in Step 1.\r\n3. Call the service through postman.\r\n\r\nError occurs:\r\n`022-02-25 16:13:11,174 ERROR [org.jbo.res.rea.com.cor.AbstractResteasyReactiveContext] (executor-thread-0) Request failed: javax.ws.rs.ProcessingException: **** could not be mapped to type class ***.***.***.*******`\r\n\n\n### Output of `uname -a` or `ver`\n\nMicrosoft Windows [Version 10.0.19044.1526]\n\n### Output of `java -version`\n\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.11+9-LTS-194, mixed mode)\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.5.0.FINAL\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.3 (ff8e977a158738155dc465c6a97ffaf31982d739)\n\n### Additional information\n\n[Error.txt](https://github.com/quarkusio/quarkus/files/8145574/Error.txt)\r\n[raj-quarkus-multipart.zip](https://github.com/quarkusio/quarkus/files/8145575/raj-quarkus-multipart.zip)\r\n\r\n**Sample**\r\nFor the sake of simplicity, I am attaching a single project that contains a server project and a client project.\r\n- Server package returns a multipart object when export is clicked.\r\n- Client package contains the Rest Reactive Client to call the server project.\r\n\r\nAlso attached is the error text. You can run the project and reproduce the same error. Use postman to call the function.\r\n\r\nPlease help find the actual cause of the error. Thanks!",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23986/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
