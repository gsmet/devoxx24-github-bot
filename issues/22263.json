{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/22263",
  "id": 1081535286,
  "node_id": "I_kwDOCFbutM5Adus2",
  "number": 22263,
  "title": "Occasional io.netty.util.IllegalReferenceCountException: refCnt: 0 when performing REST operations that stream responses",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1282147660,
      "node_id": "MDU6TGFiZWwxMjgyMTQ3NjYw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/resteasy-classic",
      "name": "area/resteasy-classic",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/165",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/165",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/165/labels",
    "id": 7496865,
    "node_id": "MI_kwDOCFbutM4AcmSh",
    "number": 165,
    "title": "2.5.4.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 13,
    "state": "closed",
    "created_at": "2021-12-17T08:19:08Z",
    "updated_at": "2021-12-20T13:53:33Z",
    "due_on": null,
    "closed_at": "2021-12-17T20:15:43Z"
  },
  "comments": 14,
  "created_at": "2021-12-15T21:35:40Z",
  "updated_at": "2021-12-22T17:45:19Z",
  "closed_at": "2021-12-17T03:26:53Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWe have several REST services that stream the Response to the client via javax.ws.rs.core.StreamingOutput and we occasionally get these errors in the logs.  We do not know what is triggering these.\r\n\r\nWe did upgrade to 2.4.2.Final not too long ago but have no data that suggests that is the cause.\r\n\r\n2021-12-15 04:11:23,645 ERROR (executor-thread-776) [com.bs.dl.streaming.AppStreamingOutput_Subclass.writeStream()] Exception streaming query result data : java.io.IOException: java.io.IOException: io.vertx.core.VertxException: Connection was closed\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:81)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:45)\r\n\tat org.jboss.resteasy.util.CommitHeaderAsyncOutputStream.write(CommitHeaderAsyncOutputStream.java:57)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.writeStream(AppStreamingOutput.java:212)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.lambda$processResultStream$0(AppStreamingOutput.java:272)\r\n\tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n\tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n\tat org.hibernate.query.spi.StreamDecorator.forEach(StreamDecorator.java:153)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.processResultStream(AppStreamingOutput.java:267)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.queryStream(AppStreamingOutput.java:257)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.write(AppStreamingOutput.java:245)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write$$superforward1(AppStreamingOutput_Subclass.zig:106)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass$$function$$1.apply(AppStreamingOutput_Subclass$$function$$1.zig:33)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:132)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:103)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.doIntercept(TransactionalInterceptorRequiresNew.java:41)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:57)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.intercept(TransactionalInterceptorRequiresNew.java:32)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew_Bean.intercept(TransactionalInterceptorRequiresNew_Bean.zig:335)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write(AppStreamingOutput_Subclass.zig:171)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_ClientProxy.write(AppStreamingOutput_ClientProxy.zig:680)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:37)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:20)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$writeTo$1(ServerWriterInterceptorContext.java:79)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxHttpRequest$VertxExecutionContext.executeBlockingIo(VertxHttpRequest.java:251)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:79)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.syncProceed(AbstractWriterInterceptorContext.java:245)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.getStarted(AbstractWriterInterceptorContext.java:170)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$getStarted$0(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.aroundWriteTo(ServerWriterInterceptorContext.java:93)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.getStarted(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$3(ServerResponseWriter.java:163)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:404)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:252)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:101)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:74)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:594)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:524)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:135)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:90)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$13.runWith(VertxCoreRecorder.java:543)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.io.IOException: io.vertx.core.VertxException: Connection was closed\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxBlockingOutput.write(VertxBlockingOutput.java:79)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxHttpResponse.writeBlocking(VertxHttpResponse.java:172)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:74)\r\n\t... 57 more\r\nCaused by: io.vertx.core.VertxException: Connection was closed\r\n\r\n2021-12-15 04:11:23,646 ERROR (executor-thread-776) [com.bs.dl.streaming.AppStreamingOutput_Subclass.writeStream()] Exception streaming query result data : java.io.IOException: io.netty.util.IllegalReferenceCountException: refCnt: 0\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:81)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:45)\r\n\tat org.jboss.resteasy.util.CommitHeaderAsyncOutputStream.write(CommitHeaderAsyncOutputStream.java:57)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.writeStream(AppStreamingOutput.java:212)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.processResultStream(AppStreamingOutput.java:286)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.queryStream(AppStreamingOutput.java:257)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.write(AppStreamingOutput.java:245)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write$$superforward1(AppStreamingOutput_Subclass.zig:106)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass$$function$$1.apply(AppStreamingOutput_Subclass$$function$$1.zig:33)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:132)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:103)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.doIntercept(TransactionalInterceptorRequiresNew.java:41)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:57)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.intercept(TransactionalInterceptorRequiresNew.java:32)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew_Bean.intercept(TransactionalInterceptorRequiresNew_Bean.zig:335)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write(AppStreamingOutput_Subclass.zig:171)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_ClientProxy.write(AppStreamingOutput_ClientProxy.zig:680)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:37)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:20)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$writeTo$1(ServerWriterInterceptorContext.java:79)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxHttpRequest$VertxExecutionContext.executeBlockingIo(VertxHttpRequest.java:251)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:79)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.syncProceed(AbstractWriterInterceptorContext.java:245)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.getStarted(AbstractWriterInterceptorContext.java:170)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$getStarted$0(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.aroundWriteTo(ServerWriterInterceptorContext.java:93)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.getStarted(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$3(ServerResponseWriter.java:163)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:404)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:252)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:101)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:74)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:594)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:524)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:135)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:90)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$13.runWith(VertxCoreRecorder.java:543)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: io.netty.util.IllegalReferenceCountException: refCnt: 0\r\n\tat io.netty.buffer.AbstractByteBuf.ensureAccessible(AbstractByteBuf.java:1454)\r\n\tat io.netty.buffer.AbstractByteBuf.ensureWritable0(AbstractByteBuf.java:289)\r\n\tat io.netty.buffer.AbstractByteBuf.ensureWritable(AbstractByteBuf.java:280)\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1073)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:68)\r\n\t... 52 more\r\n\r\n2021-12-15 04:11:23,646 ERROR (executor-thread-776) [com.bs.dl.streaming.AppStreamingOutput_Subclass.write()] Exception streaming data from App: java.lang.RuntimeException: java.io.IOException: io.netty.util.IllegalReferenceCountException: refCnt: 0\r\n\tat com.bs.dl.streaming.AppStreamingOutput.writeStream(AppStreamingOutput.java:221)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.processResultStream(AppStreamingOutput.java:286)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.queryStream(AppStreamingOutput.java:257)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.write(AppStreamingOutput.java:245)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write$$superforward1(AppStreamingOutput_Subclass.zig:106)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass$$function$$1.apply(AppStreamingOutput_Subclass$$function$$1.zig:33)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:132)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:103)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.doIntercept(TransactionalInterceptorRequiresNew.java:41)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:57)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew.intercept(TransactionalInterceptorRequiresNew.java:32)\r\n\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequiresNew_Bean.intercept(TransactionalInterceptorRequiresNew_Bean.zig:335)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_Subclass.write(AppStreamingOutput_Subclass.zig:171)\r\n\tat com.bs.dl.streaming.AppStreamingOutput_ClientProxy.write(AppStreamingOutput_ClientProxy.zig:680)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:37)\r\n\tat org.jboss.resteasy.plugins.providers.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:20)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$writeTo$1(ServerWriterInterceptorContext.java:79)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxHttpRequest$VertxExecutionContext.executeBlockingIo(VertxHttpRequest.java:251)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:79)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.syncProceed(AbstractWriterInterceptorContext.java:245)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.getStarted(AbstractWriterInterceptorContext.java:170)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$getStarted$0(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.aroundWriteTo(ServerWriterInterceptorContext.java:93)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.getStarted(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$3(ServerResponseWriter.java:163)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:404)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:252)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:101)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:74)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:594)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:524)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:135)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:90)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$13.runWith(VertxCoreRecorder.java:543)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.io.IOException: io.netty.util.IllegalReferenceCountException: refCnt: 0\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:81)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:45)\r\n\tat org.jboss.resteasy.util.CommitHeaderAsyncOutputStream.write(CommitHeaderAsyncOutputStream.java:57)\r\n\tat com.bs.dl.streaming.AppStreamingOutput.writeStream(AppStreamingOutput.java:212)\r\n\t... 49 more\r\nCaused by: io.netty.util.IllegalReferenceCountException: refCnt: 0\r\n\tat io.netty.buffer.AbstractByteBuf.ensureAccessible(AbstractByteBuf.java:1454)\r\n\tat io.netty.buffer.AbstractByteBuf.ensureWritable0(AbstractByteBuf.java:289)\r\n\tat io.netty.buffer.AbstractByteBuf.ensureWritable(AbstractByteBuf.java:280)\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1073)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxOutputStream.write(VertxOutputStream.java:68)\r\n\t... 52 more\r\n\r\n### Expected behavior\r\n\r\nStreaming responses should not have any errors.\r\n\r\n### Actual behavior\r\n\r\n_No response_\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\nJDK 11 on Linux (not on PROD system to get revision)\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.4.2.Final\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22263/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
