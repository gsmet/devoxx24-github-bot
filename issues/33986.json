{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33986",
  "id": 1752860967,
  "node_id": "I_kwDOCFbutM5oeokn",
  "number": 33986,
  "title": "Resource leak: Multipart HTTP-Requests leave Attr_ temporary files not deleted",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/254",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/254",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/254/labels",
    "id": 9511254,
    "node_id": "MI_kwDOCFbutM4AkSFW",
    "number": 254,
    "title": "3.1.2.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 62,
    "state": "closed",
    "created_at": "2023-06-08T06:32:46Z",
    "updated_at": "2023-11-15T13:50:56Z",
    "due_on": null,
    "closed_at": "2023-06-15T12:51:10Z"
  },
  "comments": 17,
  "created_at": "2023-06-12T14:12:07Z",
  "updated_at": "2023-06-15T06:43:11Z",
  "closed_at": "2023-06-14T14:04:16Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWhen using http multipart-requests, temporary Attr_ files are created for managing the content of the parts. However, they do not seem to be deleted automatically and build up over time.\r\n\r\nI found no way of configuring quarkus to use netty's inMemory or mixed Attributes for avoiding these temporary files and I know of no nice way of cleaning up the files that are created during a request.\r\n\r\nSee stackoverflow with my observations regarding the netty code that generated these files:\r\nhttps://stackoverflow.com/questions/76441377/resteasy-reactive-client-does-not-delete-attr-temp-files-for-multipart-requests\n\n### Expected behavior\n\n- For small multipart-parts, no temporary Attr_ files should be created, parts with the size of a few bytes can be handled in-memory\r\n- Temporary Attr_ files that are created during a http-request should be deleted after the http-request is processed (e.g. the response has been deserialized) or after the jvm is shut down.\n\n### Actual behavior\n\n- Temporary Attr_ files are created for each part of each multipart-request which results in an excessive amount of temp files\r\n- These temp files are not deleted after the request or the shutdown of the jvm\n\n### How to Reproduce?\n\nThe bug can be analyzed in this github project:\r\nhttps://github.com/fantasticExecution/quarkus-netty-attrfiles-bug\r\n\r\n1. Send a multipart http-request via the quarkus rest-client\r\n2. Chekc for Attr_ temp files after exiting the jvm\n\n### Output of `uname -a` or `ver`\n\nLinux thinkpad 5.14.0-1047-oem #54-Ubuntu SMP Tue Jul 26 11:27:04 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\n\n### Output of `java -version`\n\nopenjdk version \"17.0.7\" 2023-04-18 OpenJDK Runtime Environment (build 17.0.7+7-Ubuntu-0ubuntu120.04) OpenJDK 64-Bit Server VM (build 17.0.7+7-Ubuntu-0ubuntu120.04, mixed mode, sharing)\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n3.1.1.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.9.2 (c9616018c7a021c1c39be70fb2843d6f5f9b8a1c)\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33986/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
