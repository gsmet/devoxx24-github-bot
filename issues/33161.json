{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33161",
  "id": 1697926903,
  "node_id": "I_kwDOCFbutM5lNE73",
  "number": 33161,
  "title": "Quarkus 3 quarkus.package.type=native-sources require docker/podman or native-image",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 5456027948,
      "node_id": "LA_kwDOCFbutM8AAAABRTRhLA",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/podman",
      "name": "env/podman",
      "color": "edea47",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/252",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/252",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/252/labels",
    "id": 9434344,
    "node_id": "MI_kwDOCFbutM4Aj_To",
    "number": 252,
    "title": "3.0.4.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 52,
    "state": "closed",
    "created_at": "2023-05-23T17:07:47Z",
    "updated_at": "2023-06-28T14:04:44Z",
    "due_on": null,
    "closed_at": "2023-05-24T14:28:02Z"
  },
  "comments": 2,
  "created_at": "2023-05-05T17:05:11Z",
  "updated_at": "2023-05-23T17:17:57Z",
  "closed_at": "2023-05-17T09:09:33Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nStarting from version 3 of Quarkus, the behavior of the command './gradlew build '-Dquarkus.package.type=native-sources'' changed, as it now requires either Docker/Podman or native-image installed on the host. Up until version 2.16.0.Final, it did not require Docker or native-image to be installed.\r\n\r\n### Expected behavior\r\n\r\nIt is expected not to require Docker/Podman or native-image, just as it worked in version 2.16.\r\n\r\n### Actual behavior\r\n```\r\n ./gradlew build -Dquarkus.package.type=native-sources                                                       ─╯\r\n\r\n> Configure project :\r\nWARNING: The task 'testCodeCoverageReport' of type 'JacocoReport' does not follow the naming convention \"jacoco(TestTask)Report\", where \"TestTask\" is the capitalized name of the test task covered by the report. We improvise by using 'jacocoLogCoverage13' as a fallback task name.\r\nWARNING: The task 'integrationTestsCodeCoverageReport' of type 'JacocoReport' does not follow the naming convention \"jacoco(TestTask)Report\", where \"TestTask\" is the capitalized name of the test task covered by the report. We improvise by using 'jacocoLogCoverage14' as a fallback task name.\r\nCannot find the `native-image` in the GRAALVM_HOME, JAVA_HOME and System PATH. Install it using `gu install native-image` Attempting to fall back to container build.\r\n\r\n> Task :quarkusBuild FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':quarkusBuild'.\r\n> There was a failure while executing work items\r\n   > A failure occurred while executing io.quarkus.gradle.tasks.worker.BuildWorker\r\n      > io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n                [error]: Build step io.quarkus.deployment.pkg.steps.NativeImageBuildStep#resolveNativeImageBuildRunner threw an exception: java.lang.IllegalStateException: No container runtime was found. Make sure you have either Docker or Podman installed in your environment.\r\n                at io.quarkus.runtime.util.ContainerRuntimeUtil.detectContainerRuntime(ContainerRuntimeUtil.java:99)\r\n                at io.quarkus.runtime.util.ContainerRuntimeUtil.detectContainerRuntime(ContainerRuntimeUtil.java:41)\r\n                at java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n                at io.quarkus.deployment.pkg.steps.NativeImageBuildContainerRunner.<init>(NativeImageBuildContainerRunner.java:31)\r\n                at io.quarkus.deployment.pkg.steps.NativeImageBuildLocalContainerRunner.<init>(NativeImageBuildLocalContainerRunner.java:21)\r\n                at io.quarkus.deployment.pkg.steps.NativeImageBuildStep.resolveNativeImageBuildRunner(NativeImageBuildStep.java:332)\r\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n                at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n                at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n                at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n                at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n                at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n                at java.base/java.lang.Thread.run(Thread.java:833)\r\n                at org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n```\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n17\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n3.0.2\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\ngardlew 8\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33161/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
