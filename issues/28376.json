{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/28376",
  "id": 1396169048,
  "node_id": "I_kwDOCFbutM5TN9lY",
  "number": 28376,
  "title": "Continuous testing gets messed up when stashing/unstashing changesets that have changes to tests",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2955098535,
      "node_id": "MDU6TGFiZWwyOTU1MDk4NTM1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/continuous-testing",
      "name": "area/continuous-testing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/223",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/223",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/223/labels",
    "id": 8751686,
    "node_id": "MI_kwDOCFbutM4AhYpG",
    "number": 223,
    "title": "2.13.6.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 73,
    "state": "closed",
    "created_at": "2022-12-12T12:20:37Z",
    "updated_at": "2023-01-25T09:00:33Z",
    "due_on": null,
    "closed_at": "2022-12-19T16:04:43Z"
  },
  "comments": 13,
  "created_at": "2022-10-04T12:08:58Z",
  "updated_at": "2022-12-14T09:18:25Z",
  "closed_at": "2022-11-15T17:21:32Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWhen continuous testing is turned on, I notice that if I stash (or unstash) a change set that contains changes to the source code and/or test code, continuous testing gets messed up. I have to quit dev mode and re-run it in order for it to then work right again.\r\n\r\nI recorded a video of the behavior (I couldn't attach it because it was too big, so I put it on YouTube):\r\nhttps://youtu.be/oDd93zDj4Is\r\n\r\nIts almost like continuous testing doesn't see the changes to the tests (but it does the `main` source set) and therefore the tests no longer compile (even though they should).\r\n\r\nHere is the entire console output from when the change set is stashed (it was too long for GitHub to allow me to post it, so I put it in a .txt file):\r\n[continuous testing error after stashing.txt](https://github.com/quarkusio/quarkus/files/9706539/continuous.testing.error.after.stashing.txt)\r\n\r\n\r\n### Expected behavior\r\n\r\nI would expect after stashing/unstashing changes that continuous testing would pick up the new changes.\r\n\r\n### Actual behavior\r\n\r\nContinuous testing gets messed up somehow and I need to completely quit dev mode and restart it in order for it to continue working properly.\r\n\r\n### How to Reproduce?\r\n\r\nI was using the [Hero service](https://github.com/quarkusio/quarkus-super-heroes/tree/main/rest-heroes) from the [Quarkus superheroes application](https://github.com/quarkusio/quarkus-super-heroes).\r\n\r\nHere is a patch file containing the change set I had applied on top of the super heroes `main` branch:\r\n[Changes_to_powers_-_hero_service.txt](https://github.com/quarkusio/quarkus/files/9706489/Changes_to_powers_-_hero_service.txt)\r\n\r\nI applied that patch then started dev mode & turned on continuous testing. Then I stashed/shelved that patch and boom.\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n```\r\nDarwin edeandrea-m1pro 21.6.0 Darwin Kernel Version 21.6.0: Mon Aug 22 20:19:52 PDT 2022; root:xnu-8020.140.49~2/RELEASE_ARM64_T6000 arm64\r\n```\r\n\r\n### Output of `java -version`\r\n\r\n```\r\nopenjdk version \"17.0.4\" 2022-07-19\r\nOpenJDK Runtime Environment Temurin-17.0.4+8 (build 17.0.4+8)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.4+8 (build 17.0.4+8, mixed mode)\r\n```\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n`2.13.0.Final`\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n```\r\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\r\nMaven home: /Users/edeandre/.m2/wrapper/dists/apache-maven-3.8.4-bin/52ccbt68d252mdldqsfsn03jlf/apache-maven-3.8.4\r\nJava version: 17.0.4, vendor: Eclipse Adoptium, runtime: /Users/edeandre/.sdkman/candidates/java/17.0.4-tem\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: \"mac os x\", version: \"12.6\", arch: \"aarch64\", family: \"mac\"\r\n```\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/28376/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
