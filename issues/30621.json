{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/30621",
  "id": 1557538499,
  "node_id": "I_kwDOCFbutM5c1ibD",
  "number": 30621,
  "title": "openapi-swaggerui: schema reflection thinks javax.ws.rs.core.* types are REST Body types.",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1283619446,
      "node_id": "MDU6TGFiZWwxMjgzNjE5NDQ2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/smallrye",
      "name": "area/smallrye",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1287515315,
      "node_id": "MDU6TGFiZWwxMjg3NTE1MzE1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kotlin",
      "name": "area/kotlin",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1336727006,
      "node_id": "MDU6TGFiZWwxMzM2NzI3MDA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/openapi",
      "name": "area/openapi",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1688349292,
      "node_id": "MDU6TGFiZWwxNjg4MzQ5Mjky",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/swagger-ui",
      "name": "area/swagger-ui",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/235",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/235",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/235/labels",
    "id": 9025446,
    "node_id": "MI_kwDOCFbutM4Aibem",
    "number": 235,
    "title": "3.0.0.Alpha5",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 253,
    "state": "closed",
    "created_at": "2023-02-09T14:26:03Z",
    "updated_at": "2023-11-12T17:44:08Z",
    "due_on": null,
    "closed_at": "2023-03-08T15:10:59Z"
  },
  "comments": 6,
  "created_at": "2023-01-26T02:26:15Z",
  "updated_at": "2023-02-15T21:11:35Z",
  "closed_at": "2023-02-15T21:11:30Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nhttps://quarkus.io/guides/resteasy-reactive#accessing-context-objects documents:\r\n\r\n> There are a number of contextual objects that the framework will give you, if your endpoint method takes parameters of the following type:\r\n> \r\n> [a table with several types from javax.ws.rs.core.*, including HttpHeaders, and SecurityContext]\r\n\r\nAnd if I add those types to my GET method, they work as expected w.r.t. resteasy-reactive:\r\n\r\n```kotlin\r\n    @GET\r\n    @Path(\"/whatever/{example}\")\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    fun getWhateverExample(\r\n        @PathParam(\"example\") example: String,\r\n        headers: HttpHeaders,\r\n    ): MyResponseType {\r\n        // works, I get a `headers` param that I can grab HTTP headers. from. üëç \r\n    }\r\n```\r\n\r\nHowever, [openapi-swaggerui][1] interprets those objects as if they represent a JSON body to be passed to the REST endpoint. It inspects the type (here: HttpHeaders) and exposes it as a schema for the type of the body.\r\n\r\nThis is present in both the schema generated at `/q/openapi` and the UI at `/q/swagger-ui` (which I assume is just driven by the schema.)\r\n\r\nThis happens even if the endpoint is a `@GET` endpoint, which can't accept a body. \r\n\r\n[1]: https://quarkus.io/guides/openapi-swaggerui\r\n\r\n### Expected behavior\r\n\r\nI should be able to add the types documented at https://quarkus.io/guides/resteasy-reactive#accessing-context-objects  to my method parameters list without having them show up in the generated openapi schema, or in the swagger-ui.\r\n\r\nAnd they definitely shouldn't be interpreted as body types for `@GET` requests.  \r\n\r\n### Actual behavior\r\n\r\nThe `javax.ws.rs.core.*` types get interpreted as a request body, even for HTTP methods that can't accept a body.\r\n\r\nHere's what it looks like when I add `HttpHeaders`, but I see similar behavior with `SecurityContext` as well.  \r\n\r\n<img width=\"1237\" alt=\"Screenshot 2023-01-25 at 6 22 26 PM\" src=\"https://user-images.githubusercontent.com/339075/214743990-07766698-b244-40a0-b12d-dd6c23337e45.png\">\r\n\r\nThe full schema seems to be an attempt at reflecting the HttpHeaders objects as if it were a JSON model:\r\n\r\n```json\r\n{\r\n  \"requestHeaders\": {\r\n    \"additionalProp1\": [\r\n      \"string\"\r\n    ],\r\n    \"additionalProp2\": [\r\n      \"string\"\r\n    ],\r\n    \"additionalProp3\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"acceptableMediaTypes\": [\r\n    {\r\n      \"type\": \"string\",\r\n      \"subtype\": \"string\",\r\n      \"parameters\": {\r\n        \"additionalProp1\": \"string\",\r\n        \"additionalProp2\": \"string\",\r\n        \"additionalProp3\": \"string\"\r\n      },\r\n      \"wildcardType\": true,\r\n      \"wildcardSubtype\": true\r\n    }\r\n  ],\r\n  \"acceptableLanguages\": [\r\n    {\r\n      \"language\": \"string\",\r\n      \"script\": \"string\",\r\n      \"country\": \"string\",\r\n      \"variant\": \"string\",\r\n      \"extensionKeys\": [\r\n        \"string\"\r\n      ],\r\n      \"unicodeLocaleAttributes\": [\r\n        \"string\"\r\n      ],\r\n      \"unicodeLocaleKeys\": [\r\n        \"string\"\r\n      ],\r\n      \"iSO3Language\": \"string\",\r\n      \"iSO3Country\": \"string\",\r\n      \"displayLanguage\": \"string\",\r\n      \"displayScript\": \"string\",\r\n      \"displayCountry\": \"string\",\r\n      \"displayVariant\": \"string\",\r\n      \"displayName\": \"string\"\r\n    }\r\n  ],\r\n  \"mediaType\": {\r\n    \"type\": \"string\",\r\n    \"subtype\": \"string\",\r\n    \"parameters\": {\r\n      \"additionalProp1\": \"string\",\r\n      \"additionalProp2\": \"string\",\r\n      \"additionalProp3\": \"string\"\r\n    },\r\n    \"wildcardType\": true,\r\n    \"wildcardSubtype\": true\r\n  },\r\n  \"language\": {\r\n    \"language\": \"string\",\r\n    \"script\": \"string\",\r\n    \"country\": \"string\",\r\n    \"variant\": \"string\",\r\n    \"extensionKeys\": [\r\n      \"string\"\r\n    ],\r\n    \"unicodeLocaleAttributes\": [\r\n      \"string\"\r\n    ],\r\n    \"unicodeLocaleKeys\": [\r\n      \"string\"\r\n    ],\r\n    \"iSO3Language\": \"string\",\r\n    \"iSO3Country\": \"string\",\r\n    \"displayLanguage\": \"string\",\r\n    \"displayScript\": \"string\",\r\n    \"displayCountry\": \"string\",\r\n    \"displayVariant\": \"string\",\r\n    \"displayName\": \"string\"\r\n  },\r\n  \"cookies\": {\r\n    \"additionalProp1\": {\r\n      \"name\": \"string\",\r\n      \"value\": \"string\",\r\n      \"version\": 0,\r\n      \"path\": \"string\",\r\n      \"domain\": \"string\"\r\n    },\r\n    \"additionalProp2\": {\r\n      \"name\": \"string\",\r\n      \"value\": \"string\",\r\n      \"version\": 0,\r\n      \"path\": \"string\",\r\n      \"domain\": \"string\"\r\n    },\r\n    \"additionalProp3\": {\r\n      \"name\": \"string\",\r\n      \"value\": \"string\",\r\n      \"version\": 0,\r\n      \"path\": \"string\",\r\n      \"domain\": \"string\"\r\n    }\r\n  },\r\n  \"date\": \"2022-03-10\",\r\n  \"length\": 0\r\n}\r\n```\r\n\r\n### How to Reproduce?\r\n\r\nJust follow the example in https://quarkus.io/guides/resteasy-reactive#accessing-context-objects, then load up /q/swagger-ui and you'll see it.\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n22.2.0 Darwin Kernel Version 22.2.0: Fri Nov 11 02:08:47 PST 2022; root:xnu-8792.61.2~4/RELEASE_X86_64 x86_64\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk version \"19.0.1\" 2022-10-18\r\n\r\n### GraalVM version (if different from Java)\r\n\r\nOpenJDK Runtime Environment GraalVM CE 22.3.0 (build 19.0.1+10-jvmci-22.3-b08)\r\n\r\n### Quarkus version or git rev\r\n\r\n2.15.3.Final\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nGradle 7.6\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30621/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
