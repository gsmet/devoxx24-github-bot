{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23531",
  "id": 1127796646,
  "node_id": "I_kwDOCFbutM5DOM-m",
  "number": 23531,
  "title": "Integration Test Container Network",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1375177076,
      "node_id": "MDU6TGFiZWwxMzc1MTc3MDc2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/testing",
      "name": "area/testing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/175",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/175",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/175/labels",
    "id": 7698730,
    "node_id": "MI_kwDOCFbutM4AdXkq",
    "number": 175,
    "title": "2.7.2.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 159,
    "state": "closed",
    "created_at": "2022-02-21T12:59:08Z",
    "updated_at": "2022-05-12T16:40:04Z",
    "due_on": null,
    "closed_at": "2022-02-22T17:21:05Z"
  },
  "comments": 2,
  "created_at": "2022-02-08T21:52:59Z",
  "updated_at": "2022-02-23T20:09:14Z",
  "closed_at": "2022-02-09T14:43:29Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\n### Description\r\nWhile running Quarkus Integration Tests with ```quarkus.container-image.build=true```, I would like to be able to prevent Quarkus from placing the Native app docker container (and my Test Resource docker container) inside a custom docker network. Alternatively, I would like to be able to specify the docker network that Quarkus placed these containers in.\r\n\r\nMy current integration tests work for Quarkus 2.4 but are broken for Quarkus 2.6 due to changes in this [commit](https://github.com/quarkusio/quarkus/commit/b6e84c8e2f117f256dff0169b25409680548280f), which is also discussed [here](https://quarkus.io/guides/getting-started-testing#launching-containers) in the getting-stared guide. \r\n\r\n### My Current Setup (Quarkus 2.4)\r\nOn a Jenkins server I create a docker container that runs the integration tests via Maven. This docker container is on a specific docker network. The Maven container is able to communicate with the native app (which is started in another docker container by the test) via these arguments in the maven command:\r\n\r\n```-Dquarkus.http.host=my-native``` \r\n```-Dquarkus.test.argLine='--network my-network --network-alias my-native' ```\r\n\r\nThe ```--network``` argument places the native in the same network as the Maven container.  The ```--network-alias``` argument configures the native's docker container to work with the quarkus.http.host I have specified. In addition, I have a test resource (Couch DB) that is created in the tests via QuarkusTestResourceLifecycleManager.  This resource is created on the default docker \"bridge\" network, and I set the URL for Couch as a property in the start() method by calling org.testcontainers.containers.getContainerIpAddress().  This makes the URL discoverable by both the native, and by Maven.  The Couch resource is accessed directly by both - the tests insert data into Couch, while the native app queries Couch.\r\n\r\n### Quarkus 2.6 Issue\r\nIn Quarkus 2.6, both the test resource and native executable docker containers are placed in a docker network created by Quarkus.  I can't find a way to override this, or control the network id that is created. The problem is that my tests, running via Maven in a container in a separate docker network, are not able to communicate with the native docker container.  The tests can communicate with the test resource via the same mechanism I am using in my current setup.\n\n### Expected behavior\n\nI would like to be able to prevent the docker network from being created or, alternatively, I would like to be able to specify an existing docker network.\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23531/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
