{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/37785",
  "id": 2044501732,
  "node_id": "I_kwDOCFbutM553J7k",
  "number": 37785,
  "title": "Consider using direct JWE encryption of the OIDC session cookie",
  "labels": [
    {
      "id": 985346622,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjI=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/enhancement",
      "name": "kind/enhancement",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1479557456,
      "node_id": "MDU6TGFiZWwxNDc5NTU3NDU2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/oidc",
      "name": "area/oidc",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/314",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/314",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/314/labels",
    "id": 10677603,
    "node_id": "MI_kwDOCFbutM4Aou1j",
    "number": 314,
    "title": "3.10.0.CR1",
    "description": "",
    "creator": {
      "login": "quarkusbot",
      "id": 61254497,
      "node_id": "MDQ6VXNlcjYxMjU0NDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/61254497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quarkusbot",
      "html_url": "https://github.com/quarkusbot",
      "followers_url": "https://api.github.com/users/quarkusbot/followers",
      "following_url": "https://api.github.com/users/quarkusbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quarkusbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarkusbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarkusbot/subscriptions",
      "organizations_url": "https://api.github.com/users/quarkusbot/orgs",
      "repos_url": "https://api.github.com/users/quarkusbot/repos",
      "events_url": "https://api.github.com/users/quarkusbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarkusbot/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 193,
    "state": "closed",
    "created_at": "2024-03-13T09:10:43Z",
    "updated_at": "2024-08-07T12:18:40Z",
    "due_on": null,
    "closed_at": "2024-04-16T15:31:05Z"
  },
  "comments": 3,
  "created_at": "2023-12-15T23:51:30Z",
  "updated_at": "2024-04-03T16:09:40Z",
  "closed_at": "2024-04-03T16:09:36Z",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nNow that the OIDC session cookie is encrypted, in some cases users keep getting warning the session cookie size is more than 4K, with several options proposed how to make the session cookie size less, including turning off the encryption.\r\n\r\nEncryption increases the session cookie size, however the way it is done it is probably increased more than really necessary.\r\nRight now, the content encryption key is generated and the configured or derived encryption key encrypts that content encryption key which then encrypts the cookie.\r\n\r\nSo the  generated content encryption key, in the base64 URL format, is added to the overall encoded cipher text sequence and it can be 45 or so characters.\r\n\r\nDirect encryption is a typical encryption where the configured secret key is used to encrypt the text directly, without a generated content encryption key indirection. \r\n\r\nIn fact, this is exactly what Auth0 also does for its access tokens which have no audiences. \r\n\r\n\r\n### Implementation ideas\r\n\r\nIf the configured/derived encryption key is at least 16 characters then use a `dir` (direct) JWE encryption.\r\nAlso, log the session cookie size if it is larger than 4K ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37785/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
