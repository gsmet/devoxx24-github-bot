{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33820",
  "id": 1741268825,
  "node_id": "I_kwDOCFbutM5nyadZ",
  "number": 33820,
  "title": "DEV UI on reload logs NPE xception in JsonRpcRouter#route on line 200",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2715669984,
      "node_id": "MDU6TGFiZWwyNzE1NjY5OTg0",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/dev-ui",
      "name": "area/dev-ui",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/253",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/253",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/253/labels",
    "id": 9468628,
    "node_id": "MI_kwDOCFbutM4AkHrU",
    "number": 253,
    "title": "3.1.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 83,
    "state": "closed",
    "created_at": "2023-05-31T16:27:01Z",
    "updated_at": "2023-06-28T14:05:39Z",
    "due_on": null,
    "closed_at": "2023-06-07T11:17:31Z"
  },
  "comments": 1,
  "created_at": "2023-06-05T08:31:13Z",
  "updated_at": "2023-06-06T15:55:12Z",
  "closed_at": "2023-06-06T06:20:47Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWe are experiencing NPE when using DEV UI (RESTEasy Classic and RESTEasy Reactive apps, but I have no idea whether it is related to these extensions) and app is reloaded.\r\n\r\n### Expected behavior\r\n\r\nNo exceptions in the log.\r\n\r\n### Actual behavior\r\n\r\nOn slower machines (like in CI), following exceptions are repeatedly logged:\r\n```\r\n2023-06-04T03:35:04.7454573Z 03:35:04,668 INFO  [app] 03:35:03,578 Mutiny had to drop the following exception: java.lang.NullPointerException: Cannot invoke \"Object.getClass()\" because \"item\" is null\r\n2023-06-04T03:35:04.7455330Z 03:35:04,668 INFO  [app] \tat io.quarkus.devui.runtime.comms.JsonRpcRouter.lambda$route$6(JsonRpcRouter.java:200)\r\n2023-06-04T03:35:04.7456037Z 03:35:04,668 INFO  [app] \tat io.smallrye.context.impl.wrappers.SlowContextualConsumer.accept(SlowContextualConsumer.java:21)\r\n2023-06-04T03:35:04.7456745Z 03:35:04,668 INFO  [app] \tat io.smallrye.mutiny.helpers.UniCallbackSubscriber.onItem(UniCallbackSubscriber.java:73)\r\n2023-06-04T03:35:04.7457559Z 03:35:04,676 INFO  [app] \tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\r\n2023-06-04T03:35:04.7458481Z 03:35:04,677 INFO  [app] \tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n2023-06-04T03:35:04.7459098Z 03:35:04,678 INFO  [app] \tat io.smallrye.mutiny.groups.UniSubscribe.withSubscriber(UniSubscribe.java:51)\r\n2023-06-04T03:35:04.7459689Z 03:35:04,678 INFO  [app] \tat io.smallrye.mutiny.groups.UniSubscribe.with(UniSubscribe.java:110)\r\n2023-06-04T03:35:04.7460234Z 03:35:04,679 INFO  [app] \tat io.smallrye.mutiny.groups.UniSubscribe.with(UniSubscribe.java:88)\r\n2023-06-04T03:35:04.7460819Z 03:35:04,679 INFO  [app] \tat io.quarkus.devui.runtime.comms.JsonRpcRouter.route(JsonRpcRouter.java:199)\r\n2023-06-04T03:35:04.7461448Z 03:35:04,680 INFO  [app] \tat io.quarkus.devui.runtime.comms.JsonRpcRouter.lambda$addSocket$1(JsonRpcRouter.java:111)\r\n2023-06-04T03:35:04.7462125Z 03:35:04,680 INFO  [app] \tat io.vertx.core.http.impl.WebSocketImplBase$FrameAggregator.handleTextFrame(WebSocketImplBase.java:630)\r\n2023-06-04T03:35:04.7462902Z 03:35:04,680 INFO  [app] \tat io.vertx.core.http.impl.WebSocketImplBase$FrameAggregator.handle(WebSocketImplBase.java:596)\r\n2023-06-04T03:35:04.7463554Z 03:35:04,680 INFO  [app] \tat io.vertx.core.http.impl.WebSocketImplBase$FrameAggregator.handle(WebSocketImplBase.java:585)\r\n2023-06-04T03:35:04.7464157Z 03:35:04,680 INFO  [app] \tat io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\r\n2023-06-04T03:35:04.7464781Z 03:35:04,681 INFO  [app] \tat io.vertx.core.http.impl.WebSocketImplBase.receiveFrame(WebSocketImplBase.java:533)\r\n2023-06-04T03:35:04.7465431Z 03:35:04,681 INFO  [app] \tat io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)\r\n2023-06-04T03:35:04.7466025Z 03:35:04,681 INFO  [app] \tat io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)\r\n2023-06-04T03:35:04.7466649Z 03:35:04,682 INFO  [app] \tat io.vertx.core.http.impl.WebSocketImplBase.handleFrame(WebSocketImplBase.java:475)\r\n2023-06-04T03:35:04.7467261Z 03:35:04,683 INFO  [app] \tat io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:76)\r\n2023-06-04T03:35:04.7467832Z 03:35:04,683 INFO  [app] \tat io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:153)\r\n2023-06-04T03:35:04.7468481Z 03:35:04,683 INFO  [app] \tat io.vertx.core.http.impl.Http1xConnectionBase.handleWsFrame(Http1xConnectionBase.java:64)\r\n2023-06-04T03:35:04.7469195Z 03:35:04,683 INFO  [app] \tat io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:184)\r\n2023-06-04T03:35:04.7469984Z 03:35:04,684 INFO  [app] \tat io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:169)\r\n2023-06-04T03:35:04.7470627Z 03:35:04,684 INFO  [app] \tat io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:158)\r\n2023-06-04T03:35:04.7471186Z 03:35:04,687 INFO  [app] \tat io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)\r\n2023-06-04T03:35:04.7471895Z 03:35:04,687 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n2023-06-04T03:35:04.7472706Z 03:35:04,687 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-06-04T03:35:04.7473522Z 03:35:04,687 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n2023-06-04T03:35:04.7474242Z 03:35:04,687 INFO  [app] \tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n2023-06-04T03:35:04.7475300Z 03:35:04,687 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n2023-06-04T03:35:04.7476132Z 03:35:04,687 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-06-04T03:35:04.7476947Z 03:35:04,688 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n2023-06-04T03:35:04.7477793Z 03:35:04,688 INFO  [app] \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n2023-06-04T03:35:04.7478514Z 03:35:04,688 INFO  [app] \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333)\r\n2023-06-04T03:35:04.7479206Z 03:35:04,688 INFO  [app] \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454)\r\n2023-06-04T03:35:04.7479885Z 03:35:04,688 INFO  [app] \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\r\n2023-06-04T03:35:04.7480648Z 03:35:04,688 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n2023-06-04T03:35:04.7481475Z 03:35:04,688 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-06-04T03:35:04.7482364Z 03:35:04,688 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n2023-06-04T03:35:04.7483112Z 03:35:04,688 INFO  [app] \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n2023-06-04T03:35:04.7483863Z 03:35:04,689 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n2023-06-04T03:35:04.7484676Z 03:35:04,689 INFO  [app] \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-06-04T03:35:04.7485435Z 03:35:04,689 INFO  [app] \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n2023-06-04T03:35:04.7486108Z 03:35:04,689 INFO  [app] \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n2023-06-04T03:35:04.7486753Z 03:35:04,689 INFO  [app] \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n2023-06-04T03:35:04.7487425Z 03:35:04,689 INFO  [app] \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n2023-06-04T03:35:04.7488087Z 03:35:04,689 INFO  [app] \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n2023-06-04T03:35:04.7488653Z 03:35:04,689 INFO  [app] \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n2023-06-04T03:35:04.7489251Z 03:35:04,689 INFO  [app] \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n2023-06-04T03:35:04.7489872Z 03:35:04,690 INFO  [app] \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n2023-06-04T03:35:04.7490557Z 03:35:04,690 INFO  [app] \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n2023-06-04T03:35:04.7491107Z 03:35:04,690 INFO  [app] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\n### How to Reproduce?\r\n\r\nI can't really reproduce it, probably on my workstation app restarts too quickly, but in our CI it fails pretty regularly, please see:\r\n\r\nhttps://github.com/quarkus-qe/quarkus-test-suite/actions/workflows/daily.yaml logs for HTTP: minimum and HTTP: minimum reactive (DEV mode test)\r\n\r\nor \r\n\r\nhttps://github.com/quarkus-qe/quarkus-test-framework/actions/workflows/daily.yaml and logs for Greetins example (DEV mode test)\r\n\r\nif you want to execute it anyway:\r\n\r\n1. `git clone git@github.com:quarkus-qe/quarkus-test-framework.git`\r\n2. `cd quarkus-test-framework/examples/greetings`\r\n3. `mvn clean verify -Dit.test=DevModeGreetingResourceIT`\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n_No response_\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\nI suggest to simply add `item != null` and I opened https://github.com/quarkusio/quarkus/pull/33821, but opened this issue in case you believe `null` should never arrive or so that someone else who experience it can report here.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33820/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
