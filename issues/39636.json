{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/39636",
  "id": 2202244835,
  "node_id": "I_kwDOCFbutM6DQ5bj",
  "number": 39636,
  "title": "Resteasy Gzip max input with suffix format not working",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1282147660,
      "node_id": "MDU6TGFiZWwxMjgyMTQ3NjYw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/resteasy-classic",
      "name": "area/resteasy-classic",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 5085228218,
      "node_id": "LA_kwDOCFbutM8AAAABLxpsug",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-feedback",
      "name": "triage/needs-feedback",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for feedback."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/328",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/328",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/328/labels",
    "id": 11051630,
    "node_id": "MI_kwDOCFbutM4AqKJu",
    "number": 328,
    "title": "3.8.5",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 112,
    "state": "closed",
    "created_at": "2024-05-14T13:22:35Z",
    "updated_at": "2024-06-05T11:10:12Z",
    "due_on": null,
    "closed_at": "2024-06-05T11:10:12Z"
  },
  "comments": 8,
  "created_at": "2024-03-22T11:04:33Z",
  "updated_at": "2024-05-15T13:42:26Z",
  "closed_at": "2024-04-02T12:56:01Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nThe documentation mentions that the `quarkus.resteasy.gzip.max-input` can be configured by providing a suffix format such as `100M`.\r\n\r\nhttps://github.com/quarkusio/quarkus/blob/26dd881b17ec5804ad5752fec804e515e1d2212d/docs/src/main/asciidoc/resteasy.adoc?plain=1#L725-L726\r\n\r\nIf the property is configured using the allowed suffix (check regex above), Resteasy considers it as an invalid format and falls back to the default value of 10mb.\r\n\r\nA log message can also be identified in the log output.\r\n> RESTEASY002137: Invalid format for resteasy.gzip.max.input, using default value 10000000\r\n\r\nThe properties used in quarkus tests do not use such suffix, considering only the bytes format.\r\n\r\nhttps://github.com/quarkusio/quarkus/blob/26dd881b17ec5804ad5752fec804e515e1d2212d/integration-tests/main/src/main/resources/application.properties#L32\r\nhttps://github.com/quarkusio/quarkus/blob/26dd881b17ec5804ad5752fec804e515e1d2212d/extensions/resteasy-classic/resteasy-client/deployment/src/test/resources/client-using-gzip-application.properties#L2\r\n\r\nIn addition, Resteasy `GZIPDecodingInterceptor` only accepts a value up to 2147483647 (Integer.MAX_VALUE), which I think would worth mentioning in the documentation.\r\nhttps://github.com/resteasy/resteasy/blob/6.2.7.Final/resteasy-core/src/main/java/org/jboss/resteasy/plugins/interceptors/GZIPDecodingInterceptor.java\r\n\r\n### Expected behavior\r\n\r\nQuarkus should be able to properly convert the size if a data storage unit is provided as a suffix\r\n\r\nOR\r\n\r\nConsider only bytes format\r\n\r\n### Actual behavior\r\n\r\nQuarkus is not able to convert the data storage unit falling back to the default value of 10mb\r\n\r\n### How to Reproduce?\r\n\r\n[quarks-gzip-reproducer.zip](https://github.com/quarkusio/quarkus/files/14721600/quarks-gzip-reproducer.zip)\r\n\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk 17.0.9 2023-10-17 OpenJDK Runtime Environment Temurin-17.0.9+9 (build 17.0.9+9) OpenJDK 64-Bit Server VM Temurin-17.0.9+9 (build 17.0.9+9, mixed mode)\r\n\r\n### Quarkus version or git rev\r\n\r\n3.8.3\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/39636/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
