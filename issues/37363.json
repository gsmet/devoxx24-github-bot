{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/37363",
  "id": 2015214879,
  "node_id": "I_kwDOCFbutM54Hb0f",
  "number": 37363,
  "title": "ClassLoader.definePackage throws IllegalArgumentException, `parentFirst` not solving issue",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273027849,
      "node_id": "MDU6TGFiZWwxMjczMDI3ODQ5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/core",
      "name": "area/core",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "milestone": null,
  "comments": 3,
  "created_at": "2023-11-28T20:07:03Z",
  "updated_at": "2023-12-01T13:47:51Z",
  "closed_at": null,
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWhen the [New Relic Java Agent](https://docs.newrelic.com/docs/apm/agents/java-agent/getting-started/introduction-new-relic-java/) is in use in dev mode (`-javaagent:/path/to/newrelic.jar`), `ClassLoader.definePackage` throws `IllegalArgumentException` on `io.netty.bootstrap`, see stacktrace below.\r\n\r\nTried using the `parentFirstArtifacts` configuration based on the dependencies tree (see below) but it didn't work, neither did `quarkus.class-loading.parent-first-artifacts` in `application.properties`.\r\n\r\n```\r\n<plugin>\r\n  <groupId>io.quarkus</groupId>\r\n  <artifactId>quarkus-extension-maven-plugin</artifactId>\r\n  <configuration>\r\n      <parentFirstArtifacts>\r\n        <parentFirstArtifact>...</parentFirstArtifact>\r\n      </parentFirstArtifacts>\r\n  </configuration>\r\n</plugin>    \r\n```\r\n\r\n### Dependencies\r\n```\r\n[INFO] --- quarkus:3.5.3:dependency-tree (default-cli) @ code-with-quarkus ---\r\n[INFO] Quarkus application PROD mode build dependency tree:\r\n[INFO] org.acme:code-with-quarkus:pom:1.0.0-SNAPSHOT\r\n[INFO] ├─ io.quarkus:quarkus-arc-deployment:jar:3.5.3 (compile)\r\n[INFO] │  ├─ io.quarkus:quarkus-core-deployment:jar:3.5.3 (compile)\r\n[INFO] │  │  ├─ org.aesh:readline:jar:2.4 (compile)\r\n[INFO] │  │  │  └─ org.fusesource.jansi:jansi:jar:2.4.0 (compile)\r\n[INFO] │  │  ├─ org.aesh:aesh:jar:2.7 (compile)\r\n[INFO] │  │  ├─ org.apache.commons:commons-lang3:jar:3.12.0 (compile)\r\n[INFO] │  │  ├─ org.wildfly.common:wildfly-common:jar:1.5.4.Final-format-001 (compile)\r\n[INFO] │  │  ├─ io.quarkus.gizmo:gizmo:jar:1.7.0 (compile)\r\n[INFO] │  │  │  └─ org.ow2.asm:asm-util:jar:9.5 (compile)\r\n[INFO] │  │  │     └─ org.ow2.asm:asm-analysis:jar:9.5 (compile)\r\n[INFO] │  │  ├─ io.smallrye:jandex:jar:3.1.5 (compile)\r\n[INFO] │  │  ├─ org.ow2.asm:asm:jar:9.5 (compile)\r\n[INFO] │  │  ├─ org.ow2.asm:asm-commons:jar:9.5 (compile)\r\n[INFO] │  │  │  └─ org.ow2.asm:asm-tree:jar:9.5 (compile)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-development-mode-spi:jar:3.5.3 (compile)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-class-change-agent:jar:3.5.3 (compile)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-bootstrap-core:jar:3.5.3 (compile)\r\n[INFO] │  │  │  ├─ io.quarkus:quarkus-bootstrap-app-model:jar:3.5.3 (compile)\r\n[INFO] │  │  │  └─ io.smallrye.common:smallrye-common-io:jar:2.1.2 (compile)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-devtools-utilities:jar:3.5.3 (compile)\r\n[INFO] │  │  ├─ org.eclipse.sisu:org.eclipse.sisu.inject:jar:0.3.5 (runtime)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-core:jar:3.5.3 (compile)\r\n[INFO] │  │  │  ├─ jakarta.inject:jakarta.inject-api:jar:2.0.1 (compile)\r\n[INFO] │  │  │  ├─ io.smallrye.common:smallrye-common-os:jar:2.1.2 (compile)\r\n[INFO] │  │  │  ├─ io.quarkus:quarkus-ide-launcher:jar:3.5.3 (compile)\r\n[INFO] │  │  │  ├─ io.smallrye.config:smallrye-config:jar:3.4.4 (compile)\r\n[INFO] │  │  │  │  └─ io.smallrye.config:smallrye-config-core:jar:3.4.4 (compile)\r\n[INFO] │  │  │  │     ├─ org.eclipse.microprofile.config:microprofile-config-api:jar:3.0.3 (compile)\r\n[INFO] │  │  │  │     ├─ io.smallrye.common:smallrye-common-classloader:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │     └─ io.smallrye.config:smallrye-config-common:jar:3.4.4 (compile)\r\n[INFO] │  │  │  ├─ org.jboss.logmanager:jboss-logmanager:jar:3.0.2.Final (compile)\r\n[INFO] │  │  │  │  ├─ io.smallrye.common:smallrye-common-constraint:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  ├─ io.smallrye.common:smallrye-common-cpu:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  ├─ io.smallrye.common:smallrye-common-expression:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  │  └─ io.smallrye.common:smallrye-common-function:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  ├─ io.smallrye.common:smallrye-common-net:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  ├─ io.smallrye.common:smallrye-common-ref:jar:2.1.2 (compile)\r\n[INFO] │  │  │  │  └─ jakarta.json:jakarta.json-api:jar:2.1.2 (compile)\r\n[INFO] │  │  │  ├─ org.jboss.logging:jboss-logging-annotations:jar:2.2.1.Final (compile)\r\n[INFO] │  │  │  ├─ org.jboss.threads:jboss-threads:jar:3.5.0.Final (compile)\r\n[INFO] │  │  │  ├─ org.slf4j:slf4j-api:jar:2.0.6 (compile)\r\n[INFO] │  │  │  ├─ org.jboss.slf4j:slf4j-jboss-logmanager:jar:2.0.0.Final (compile)\r\n[INFO] │  │  │  ├─ io.quarkus:quarkus-bootstrap-runner:jar:3.5.3 (compile)\r\n[INFO] │  │  │  └─ io.quarkus:quarkus-fs-util:jar:0.0.9 (compile)\r\n[INFO] │  │  ├─ io.quarkus:quarkus-builder:jar:3.5.3 (compile)\r\n[INFO] │  │  ├─ org.graalvm.sdk:graal-sdk:jar:23.0.1 (compile)\r\n[INFO] │  │  ├─ org.junit.platform:junit-platform-launcher:jar:1.10.0 (compile)\r\n[INFO] │  │  │  ├─ org.junit.platform:junit-platform-engine:jar:1.10.0 (compile)\r\n[INFO] │  │  │  │  ├─ org.opentest4j:opentest4j:jar:1.3.0 (compile)\r\n[INFO] │  │  │  │  └─ org.junit.platform:junit-platform-commons:jar:1.10.0 (compile)\r\n[INFO] │  │  │  └─ org.apiguardian:apiguardian-api:jar:1.1.2 (compile)\r\n[INFO] │  │  └─ org.junit.jupiter:junit-jupiter:jar:5.10.0 (compile)\r\n[INFO] │  │     ├─ org.junit.jupiter:junit-jupiter-api:jar:5.10.0 (compile)\r\n[INFO] │  │     ├─ org.junit.jupiter:junit-jupiter-params:jar:5.10.0 (compile)\r\n[INFO] │  │     └─ org.junit.jupiter:junit-jupiter-engine:jar:5.10.0 (runtime)\r\n[INFO] │  ├─ io.quarkus:quarkus-smallrye-context-propagation-spi:jar:3.5.3 (compile)\r\n[INFO] │  │  └─ org.eclipse.microprofile.context-propagation:microprofile-context-propagation-api:jar:1.3 (compile)\r\n[INFO] │  ├─ io.quarkus:quarkus-vertx-http-dev-ui-spi:jar:3.5.3 (compile)\r\n[INFO] │  ├─ io.quarkus:quarkus-arc:jar:3.5.3 (compile)\r\n[INFO] │  │  └─ io.quarkus.arc:arc:jar:3.5.3 (compile)\r\n[INFO] │  │     ├─ jakarta.transaction:jakarta.transaction-api:jar:2.0.1 (compile)\r\n[INFO] │  │     └─ io.smallrye.reactive:mutiny:jar:2.5.1 (compile)\r\n[INFO] │  │        └─ io.smallrye.common:smallrye-common-annotation:jar:2.1.2 (compile)\r\n[INFO] │  └─ io.quarkus.arc:arc-processor:jar:3.5.3 (compile)\r\n[INFO] │     ├─ jakarta.enterprise:jakarta.enterprise.cdi-api:jar:4.0.1 (compile)\r\n[INFO] │     │  ├─ jakarta.enterprise:jakarta.enterprise.lang-model:jar:4.0.1 (compile)\r\n[INFO] │     │  ├─ jakarta.el:jakarta.el-api:jar:5.0.1 (compile)\r\n[INFO] │     │  └─ jakarta.interceptor:jakarta.interceptor-api:jar:2.1.0 (compile)\r\n[INFO] │     ├─ org.jboss.logging:jboss-logging:jar:3.5.3.Final (compile)\r\n[INFO] │     └─ jakarta.annotation:jakarta.annotation-api:jar:2.1.1 (compile)\r\n[INFO] └─ io.quarkus:quarkus-resteasy-reactive-deployment:jar:3.5.3 (compile)\r\n[INFO]    ├─ io.quarkus.resteasy.reactive:resteasy-reactive-processor:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus.resteasy.reactive:resteasy-reactive:jar:3.5.3 (compile)\r\n[INFO]    │  │  └─ io.quarkus.resteasy.reactive:resteasy-reactive-common:jar:3.5.3 (compile)\r\n[INFO]    │  │     ├─ io.quarkus.resteasy.reactive:resteasy-reactive-common-types:jar:3.5.3 (compile)\r\n[INFO]    │  │     ├─ org.reactivestreams:reactive-streams:jar:1.0.4 (compile)\r\n[INFO]    │  │     └─ io.smallrye.reactive:mutiny-zero-flow-adapters:jar:1.0.0 (compile)\r\n[INFO]    │  ├─ io.quarkus.resteasy.reactive:resteasy-reactive-common-processor:jar:3.5.3 (compile)\r\n[INFO]    │  └─ jakarta.ws.rs:jakarta.ws.rs-api:jar:3.1.0 (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-vertx-http-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-vertx-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ io.quarkus:quarkus-netty-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  │  │  └─ io.quarkus:quarkus-netty:jar:3.5.3 (compile)\r\n[INFO]    │  │  │     ├─ io.netty:netty-codec:jar:4.1.100.Final (compile)\r\n[INFO]    │  │  │     └─ com.aayushatharva.brotli4j:brotli4j:jar:1.12.0 (compile)\r\n[INFO]    │  │  │        ├─ com.aayushatharva.brotli4j:service:jar:1.12.0 (compile)\r\n[INFO]    │  │  │        └─ com.aayushatharva.brotli4j:native-linux-x86_64:jar:1.12.0 (compile)\r\n[INFO]    │  │  └─ io.quarkus:quarkus-vertx:jar:3.5.3 (compile)\r\n[INFO]    │  │     ├─ io.netty:netty-codec-haproxy:jar:4.1.100.Final (compile)\r\n[INFO]    │  │     ├─ io.quarkus:quarkus-vertx-latebound-mdc-provider:jar:3.5.3 (compile)\r\n[INFO]    │  │     └─ io.smallrye:smallrye-fault-tolerance-vertx:jar:6.2.6 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-vertx-http:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ io.quarkus:quarkus-security-runtime-spi:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ io.quarkus:quarkus-credentials:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ io.smallrye.common:smallrye-common-vertx-context:jar:2.1.2 (compile)\r\n[INFO]    │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-web:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-web-common:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-auth-common:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-bridge-common:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  └─ io.smallrye.reactive:smallrye-mutiny-vertx-uri-template:jar:3.7.2 (compile)\r\n[INFO]    │  │  │     └─ io.vertx:vertx-uri-template:jar:4.4.6 (compile)\r\n[INFO]    │  │  └─ io.github.crac:org-crac:jar:0.1.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-vertx-http-deployment-spi:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-mutiny-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  │  └─ io.quarkus:quarkus-smallrye-context-propagation-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-kubernetes-spi:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-vertx-http-dev-ui-resources:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ org.mvnpm.at.vaadin:router:jar:1.7.5 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:path-to-regexp:jar:2.4.0 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.mvnpm:vaadin-webcomponents:jar:24.1.10 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.vaadin:vaadin-usage-statistics:jar:2.1.2 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.vaadin:vaadin-development-mode-detector:jar:2.0.6 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.polymer:polymer:jar:3.5.1 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.webcomponents:shadycss:jar:1.11.2 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.open-wc:dedupe-mixin:jar:1.4.0 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:lit:jar:2.8.0 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.lit:reactive-element:jar:1.6.3 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:lit-element:jar:3.3.3 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:lit-html:jar:2.8.0 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.lit-labs:ssr-dom-shim:jar:1.1.1 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.types:trusted-types:jar:2.0.4 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:lit-element-state:jar:1.7.0 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm:echarts:jar:5.4.3 (runtime)\r\n[INFO]    │  │  │  ├─ org.mvnpm:tslib:jar:2.3.0 (runtime)\r\n[INFO]    │  │  │  └─ org.mvnpm:zrender:jar:5.4.4 (runtime)\r\n[INFO]    │  │  ├─ org.mvnpm.at.vanillawc:wc-codemirror:jar:2.1.0 (runtime)\r\n[INFO]    │  │  └─ org.mvnpm:es-module-shims:jar:1.8.1 (runtime)\r\n[INFO]    │  ├─ io.mvnpm:importmap:jar:1.0.10 (compile)\r\n[INFO]    │  ├─ io.quarkus.qute:qute-core:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ org.yaml:snakeyaml:jar:2.1 (compile)\r\n[INFO]    │  └─ com.fasterxml.jackson.core:jackson-databind:jar:2.15.3 (compile)\r\n[INFO]    │     ├─ com.fasterxml.jackson.core:jackson-annotations:jar:2.15.3 (compile)\r\n[INFO]    │     └─ com.fasterxml.jackson.core:jackson-core:jar:2.15.3 (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-resteasy-reactive:jar:3.5.3 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-resteasy-reactive-common:jar:3.5.3 (compile)\r\n[INFO]    │  │  └─ io.quarkus:quarkus-mutiny:jar:3.5.3 (compile)\r\n[INFO]    │  │     ├─ io.quarkus:quarkus-smallrye-context-propagation:jar:3.5.3 (compile)\r\n[INFO]    │  │     │  └─ io.smallrye:smallrye-context-propagation:jar:2.1.0 (compile)\r\n[INFO]    │  │     │     ├─ io.smallrye:smallrye-context-propagation-api:jar:2.1.0 (compile)\r\n[INFO]    │  │     │     └─ io.smallrye:smallrye-context-propagation-storage:jar:2.1.0 (compile)\r\n[INFO]    │  │     └─ io.smallrye.reactive:mutiny-smallrye-context-propagation:jar:2.5.1 (compile)\r\n[INFO]    │  ├─ io.quarkus.resteasy.reactive:resteasy-reactive-vertx:jar:3.5.3 (compile)\r\n[INFO]    │  │  ├─ io.vertx:vertx-web:jar:4.4.6 (compile)\r\n[INFO]    │  │  │  ├─ io.vertx:vertx-web-common:jar:4.4.6 (compile)\r\n[INFO]    │  │  │  ├─ io.vertx:vertx-auth-common:jar:4.4.6 (compile)\r\n[INFO]    │  │  │  └─ io.vertx:vertx-bridge-common:jar:4.4.6 (compile)\r\n[INFO]    │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-core:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  ├─ io.smallrye.reactive:smallrye-mutiny-vertx-runtime:jar:3.7.2 (compile)\r\n[INFO]    │  │  │  └─ io.smallrye.reactive:vertx-mutiny-generator:jar:3.7.2 (compile)\r\n[INFO]    │  │  │     └─ io.vertx:vertx-codegen:jar:4.4.6 (compile)\r\n[INFO]    │  │  ├─ org.jboss.logging:commons-logging-jboss-logging:jar:1.0.0.Final (compile)\r\n[INFO]    │  │  └─ jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.1 (compile)\r\n[INFO]    │  │     └─ jakarta.activation:jakarta.activation-api:jar:2.1.2 (compile)\r\n[INFO]    │  ├─ io.quarkus:quarkus-jsonp:jar:3.5.3 (compile)\r\n[INFO]    │  │  └─ org.eclipse.parsson:parsson:jar:1.1.5 (compile)\r\n[INFO]    │  └─ io.quarkus:quarkus-virtual-threads:jar:3.5.3 (compile)\r\n[INFO]    │     └─ io.vertx:vertx-core:jar:4.4.6 (compile)\r\n[INFO]    │        ├─ io.netty:netty-common:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-buffer:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-transport:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-handler:jar:4.1.100.Final (compile)\r\n[INFO]    │        │  └─ io.netty:netty-transport-native-unix-common:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-handler-proxy:jar:4.1.100.Final (compile)\r\n[INFO]    │        │  └─ io.netty:netty-codec-socks:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-codec-http:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-codec-http2:jar:4.1.100.Final (compile)\r\n[INFO]    │        ├─ io.netty:netty-resolver:jar:4.1.100.Final (compile)\r\n[INFO]    │        └─ io.netty:netty-resolver-dns:jar:4.1.100.Final (compile)\r\n[INFO]    │           └─ io.netty:netty-codec-dns:jar:4.1.100.Final (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-resteasy-reactive-server-spi-deployment:jar:3.5.3 (compile)\r\n[INFO]    │  └─ io.quarkus:quarkus-resteasy-reactive-spi-deployment:jar:3.5.3 (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-jaxrs-spi-deployment:jar:3.5.3 (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-security-spi:jar:3.5.3 (compile)\r\n[INFO]    │  └─ io.quarkus.security:quarkus-security:jar:2.0.2.Final (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-jsonp-deployment:jar:3.5.3 (compile)\r\n[INFO]    ├─ io.quarkus:quarkus-resteasy-reactive-common-deployment:jar:3.5.3 (compile)\r\n[INFO]    └─ io.quarkus:quarkus-virtual-threads-deployment:jar:3.5.3 (compile)\r\n```\n\n### Expected behavior\n\nQuarkus startup succeeds, http server is running.\n\n### Actual behavior\n\nQuarkus application fails to start.\r\n\r\n### Stacktrace in Logs\r\n```\r\n2023-11-28 00:19:01,768 ERROR [io.qua.run.Application] (Quarkus Main Thread) Failed to start application (with profile [dev]): java.lang.RuntimeException: Failed to start quarkus\r\n        at io.quarkus.runner.ApplicationImpl.doStart(Unknown Source)\r\n        at io.quarkus.runtime.Application.start(Application.java:101)\r\n        at io.quarkus.runtime.ApplicationLifecycleManager.run(ApplicationLifecycleManager.java:111)\r\n        at io.quarkus.runtime.Quarkus.run(Quarkus.java:71)\r\n        at io.quarkus.runtime.Quarkus.run(Quarkus.java:44)\r\n        at io.quarkus.runtime.Quarkus.run(Quarkus.java:124)\r\n        at io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n        at io.quarkus.runner.bootstrap.StartupActionImpl$1.run(StartupActionImpl.java:113)\r\n        at java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.lang.RuntimeException: Unable to start HTTP server\r\n        at io.quarkus.vertx.http.runtime.VertxHttpRecorder.doServerStart(VertxHttpRecorder.java:842)\r\n        at io.quarkus.vertx.http.runtime.VertxHttpRecorder.startServer(VertxHttpRecorder.java:327)\r\n        at io.quarkus.deployment.steps.VertxHttpProcessor$openSocket189362710.deploy_0(Unknown Source)\r\n        at io.quarkus.deployment.steps.VertxHttpProcessor$openSocket189362710.deploy(Unknown Source)\r\n        ... 11 more\r\nCaused by: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: io.netty.bootstrap\r\n        at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\n        at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)\r\n        at io.quarkus.vertx.http.runtime.VertxHttpRecorder.doServerStart(VertxHttpRecorder.java:763)\r\n        ... 14 more\r\nCaused by: java.lang.IllegalArgumentException: io.netty.bootstrap\r\n        at java.base/java.lang.ClassLoader.definePackage(ClassLoader.java:2239)\r\n        at io.quarkus.bootstrap.classloading.QuarkusClassLoader.definePackage(QuarkusClassLoader.java:539)\r\n        at io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:505)\r\n        at io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:466)\r\n        at io.vertx.core.net.impl.TCPServerBase.lambda$listen$4(TCPServerBase.java:216)\r\n        at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)\r\n        at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60)\r\n        at io.vertx.core.impl.future.FutureImpl.addListener(FutureImpl.java:196)\r\n        at io.vertx.core.impl.future.FutureImpl.onComplete(FutureImpl.java:164)\r\n        at io.vertx.core.net.impl.TCPServerBase.listen(TCPServerBase.java:211)\r\n        at io.vertx.core.net.impl.TCPServerBase.bind(TCPServerBase.java:152)\r\n        at io.vertx.core.http.impl.HttpServerImpl.listen(HttpServerImpl.java:180)\r\n        at io.vertx.core.http.HttpServer.listen(HttpServer.java:173)\r\n        at io.vertx.core.http.HttpServer.listen(HttpServer.java:186)\r\n        at io.quarkus.vertx.http.runtime.VertxHttpRecorder$WebDeploymentVerticle.setupTcpHttpServer(VertxHttpRecorder.java:1157)\r\n        at io.quarkus.vertx.http.runtime.VertxHttpRecorder$WebDeploymentVerticle.start(VertxHttpRecorder.java:1086)\r\n        at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:195)\r\n        at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:277)\r\n        at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:259)\r\n        at io.vertx.core.impl.EventLoopContext.lambda$runOnContext$0(EventLoopContext.java:43)\r\n        at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)\r\n        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        ... 1 more\r\n\r\n\r\n2023-11-28 00:19:01,800 INFO  [io.qua.dep.dev.IsolatedDevModeMain] (main) Attempting to start live reload endpoint to recover from previous Quarkus startup failure\r\n2023-11-28 00:19:01,800 INFO  [io.qua.dep.dev.IsolatedDevModeMain] (main) Attempting to start live reload endpoint to recover from previous Quarkus startup failure\r\n```\n\n### How to Reproduce?\n\n1. Can be easily replicated with minimal changes to a `quarkus create` app.\r\n2. Sample pom\r\n    ```\r\n    <?xml version=\"1.0\"?>\r\n    <project\r\n      xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"\r\n      xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n      <modelVersion>4.0.0</modelVersion>\r\n      <groupId>org.acme</groupId>\r\n      <artifactId>code-with-quarkus</artifactId>\r\n      <version>1.0.0-SNAPSHOT</version>\r\n      <properties>\r\n        <compiler-plugin.version>3.11.0</compiler-plugin.version>\r\n        <maven.compiler.release>21</maven.compiler.release>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n        <quarkus.platform.artifact-id>quarkus-bom</quarkus.platform.artifact-id>\r\n        <quarkus.platform.group-id>io.quarkus.platform</quarkus.platform.group-id>\r\n        <quarkus.platform.version>3.5.3</quarkus.platform.version>\r\n        <skipITs>true</skipITs>\r\n        <surefire-plugin.version>3.1.2</surefire-plugin.version>\r\n        <jvm.args>-javaagent:/workspaces/spike-quarkus-newrelic/src/code-with-quarkus/.newrelic/newrelic.jar</jvm.args>\r\n        <!-- <jvm.args>-agentlib:jdwp=transport=dt_socket,address=*:5005,server=y,suspend=n</jvm.args> -->\r\n      </properties>\r\n      <dependencyManagement>\r\n        <dependencies>\r\n          <dependency>\r\n            <groupId>${quarkus.platform.group-id}</groupId>\r\n            <artifactId>${quarkus.platform.artifact-id}</artifactId>\r\n            <version>${quarkus.platform.version}</version>\r\n            <type>pom</type>\r\n            <scope>import</scope>\r\n          </dependency>\r\n        </dependencies>\r\n      </dependencyManagement>\r\n      <dependencies>\r\n        <dependency>\r\n          <groupId>io.quarkus</groupId>\r\n          <artifactId>quarkus-arc</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n          <groupId>io.quarkus</groupId>\r\n          <artifactId>quarkus-resteasy-reactive</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n          <groupId>io.quarkus</groupId>\r\n          <artifactId>quarkus-junit5</artifactId>\r\n          <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n          <groupId>io.rest-assured</groupId>\r\n          <artifactId>rest-assured</artifactId>\r\n          <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n          <groupId>com.newrelic.agent.java</groupId>\r\n          <artifactId>newrelic-java</artifactId>\r\n          <version>8.7.0</version>\r\n          <scope>provided</scope>\r\n          <type>zip</type>\r\n        </dependency>\r\n      </dependencies>\r\n      <build>\r\n        <plugins>\r\n          <plugin>\r\n            <groupId>${quarkus.platform.group-id}</groupId>\r\n            <artifactId>quarkus-maven-plugin</artifactId>\r\n            <version>${quarkus.platform.version}</version>\r\n            <extensions>true</extensions>\r\n            <executions>\r\n              <execution>\r\n                <goals>\r\n                  <goal>build</goal>\r\n                  <goal>generate-code</goal>\r\n                  <goal>generate-code-tests</goal>\r\n                </goals>\r\n              </execution>\r\n            </executions>\r\n          </plugin>\r\n          <plugin>\r\n            <artifactId>maven-compiler-plugin</artifactId>\r\n            <version>${compiler-plugin.version}</version>\r\n            <configuration>\r\n              <compilerArgs>\r\n                <arg>-parameters</arg>\r\n              </compilerArgs>\r\n            </configuration>\r\n          </plugin>\r\n          <plugin>\r\n            <artifactId>maven-surefire-plugin</artifactId>\r\n            <version>${surefire-plugin.version}</version>\r\n            <configuration>\r\n              <systemPropertyVariables>\r\n                <java.util.logging.manager>org.jboss.logmanager.LogManager</java.util.logging.manager>\r\n                <maven.home>${maven.home}</maven.home>\r\n              </systemPropertyVariables>\r\n            </configuration>\r\n          </plugin>\r\n          <plugin>\r\n            <artifactId>maven-failsafe-plugin</artifactId>\r\n            <version>${surefire-plugin.version}</version>\r\n            <executions>\r\n              <execution>\r\n                <goals>\r\n                  <goal>integration-test</goal>\r\n                  <goal>verify</goal>\r\n                </goals>\r\n                <configuration>\r\n                  <systemPropertyVariables>\r\n                    <native.image.path>${project.build.directory}/${project.build.finalName}-runner</native.image.path>\r\n                    <java.util.logging.manager>org.jboss.logmanager.LogManager</java.util.logging.manager>\r\n                    <maven.home>${maven.home}</maven.home>\r\n                  </systemPropertyVariables>\r\n                </configuration>\r\n              </execution>\r\n            </executions>\r\n          </plugin>\r\n          <!-- Unzip New Relic Java agent into target/ -->\r\n          <plugin>\r\n            <groupId>org.apache.maven.plugins</groupId>\r\n            <artifactId>maven-dependency-plugin</artifactId>\r\n            <version>3.1.1</version>\r\n            <executions>\r\n              <execution>\r\n                <id>unpack-newrelic</id>\r\n                <phase>package</phase>\r\n                <goals>\r\n                  <goal>unpack-dependencies</goal>\r\n                </goals>\r\n                <configuration>\r\n                  <includeGroupIds>com.newrelic.agent.java</includeGroupIds>\r\n                  <includeArtifactIds>newrelic-java</includeArtifactIds>\r\n                  <!-- you can optionally exclude files -->\r\n                  <!-- <excludes>**/newrelic.yml</excludes> -->\r\n                  <overWriteReleases>false</overWriteReleases>\r\n                  <overWriteSnapshots>false</overWriteSnapshots>\r\n                  <overWriteIfNewer>true</overWriteIfNewer>\r\n                  <outputDirectory>${project.build.directory}</outputDirectory>\r\n                </configuration>\r\n              </execution>\r\n            </executions>\r\n    </plugin>\r\n    <plugin>\r\n      <groupId>io.quarkus</groupId>\r\n      <artifactId>quarkus-extension-maven-plugin</artifactId>\r\n      <configuration>\r\n          <parentFirstArtifacts>\r\n            <parentFirstArtifact>io.netty:netty</parentFirstArtifact>\r\n          </parentFirstArtifacts>\r\n      </configuration>\r\n    </plugin>    \r\n        </plugins>\r\n      </build>\r\n      <profiles>\r\n        <profile>\r\n          <id>native</id>\r\n          <activation>\r\n            <property>\r\n              <name>native</name>\r\n            </property>\r\n          </activation>\r\n          <properties>\r\n            <skipITs>false</skipITs>\r\n            <quarkus.package.type>native</quarkus.package.type>\r\n          </properties>\r\n        </profile>\r\n      </profiles>\r\n    </project>\r\n    ```\n\n### Output of `uname -a` or `ver`\n\nLinux eb5b568104a9 5.15.133.1-microsoft-standard-WSL2 #1 SMP Thu Oct 5 21:02:42 UTC 2023 x86_64 GNU/Linux\n\n### Output of `java -version`\n\njava version \"21.0.1\" 2023-10-17 LTS Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29) Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)\n\n### Quarkus version or git rev\n\n3.5.3\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.9.5 (57804ffe001d7215b5e7bcb531cf83df38f93546) Maven home: /root/.m2/wrapper/dists/apache-maven-3.9.5-bin/32db9c34/apache-maven-3.9.5 Java version: 21.0.1, vendor: Oracle Corporation, runtime: /usr/lib/jvm/jdk-21-oracle-x64 Default locale: en_US, platform encoding: UTF-8 OS name: \"linux\", version: \"5.15.133.1-microsoft-standard-wsl2\", arch: \"amd64\", family: \"unix\"\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37363/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
