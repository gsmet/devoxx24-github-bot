{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/37134",
  "id": 1996057552,
  "node_id": "I_kwDOCFbutM52-WvQ",
  "number": 37134,
  "title": "Call to DB2 is failing for the first time and abruptly once in a while making a hibernate call from QUARKUS application",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273026509,
      "node_id": "MDU6TGFiZWwxMjczMDI2NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/persistence",
      "name": "area/persistence",
      "color": "FBCA04",
      "default": false,
      "description": "OBSOLETE, DO NOT USE"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 12,
  "created_at": "2023-11-16T04:54:32Z",
  "updated_at": "2023-11-17T17:21:51Z",
  "closed_at": "2023-11-16T12:51:10Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\n**Stack trace from the error :** \r\n\r\n```\r\n\r\n15:11:2023 18:13:19,048 INFO  [com.delta.techops.lmo.med.dao.RoutingRestrictionDao] (main) Message:\"Inside fetchMelItemRestrictions(), FetchQuery : org.hibernate.query.internal.QueryImpl@65cf4d6d\", ServiceName:\"searchRestrictionsForItem\", LambdaRuntimeEnvironment:\"development-us-east-1\", TransactionId:\"mytran123456789\"\r\n15:11:2023 18:13:19,168 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (main) SQL Error: -4499, SQLState: 08001\r\n15:11:2023 18:13:19,183 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (main) [jcc][t4][2030][11211][4.32.28] A communication error occurred during operations on the connection's underlying socket, socket input stream, \r\nor socket output stream.  Error location: Reply.fill() - socketInputStream.read (-1).  Message: Software caused connection abort (Write failed). ERRORCODE=-4499, SQLSTATE=08001\r\njavax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: could not extract ResultSet\r\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\nat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1626)\r\nat org.hibernate.query.Query.getResultList(Query.java:165)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao.fetchMelItemRestrictions(RoutingRestrictionDao.java:53)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_Subclass.fetchMelItemRestrictions$$superforward1(Unknown Source)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_Subclass$$function$$1.apply(Unknown Source)\r\nat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:133)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:104)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.doIntercept(TransactionalInterceptorRequired.java:38)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:58)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.intercept(TransactionalInterceptorRequired.java:32)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired_Bean.intercept(Unknown Source)\r\nat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:42)\r\nat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\nat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:33)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_Subclass.fetchMelItemRestrictions(Unknown Source)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_ClientProxy.fetchMelItemRestrictions(Unknown Source)\r\nat com.delta.techops.lmo.med.service.RoutingRestrictionsServiceImpl.getRestrictionsForItem(RoutingRestrictionsServiceImpl.java:95)\r\nat com.delta.techops.lmo.med.service.RoutingRestrictionsServiceImpl_ClientProxy.getRestrictionsForItem(Unknown Source)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler.handleRequest(SearchRestrictionsForItemHandler.java:94)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler.handleRequest(SearchRestrictionsForItemHandler.java:32)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler_ClientProxy.handleRequest(Unknown Source)\r\nat io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder.handle(AmazonLambdaRecorder.java:83)\r\nat io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler.handleRequest(QuarkusStreamHandler.java:27)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\nat lambdainternal.EventHandlerLoader$StreamMethodRequestHandler.handleRequest(EventHandlerLoader.java:383)\r\nat lambdainternal.EventHandlerLoader$2.call(EventHandlerLoader.java:925)\r\nat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:268)\r\nat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:207)\r\nat lambdainternal.AWSLambda.main(AWSLambda.java:196)\r\nCaused by: org.hibernate.exception.JDBCConnectionException: could not extract ResultSet\r\nat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\r\nat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\r\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\nat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)\r\nat org.hibernate.loader.Loader.getResultSet(Loader.java:2322)\r\nat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)\r\nat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)\r\nat org.hibernate.loader.Loader.doQuery(Loader.java:956)\r\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)\r\nat org.hibernate.loader.Loader.doList(Loader.java:2868)\r\nat org.hibernate.loader.Loader.doList(Loader.java:2850)\r\nat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)\r\nat org.hibernate.loader.Loader.list(Loader.java:2677)\r\nat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)\r\nat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\nat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\nat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)\r\nat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\r\nat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n... 32 more\r\nCaused by: com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException: [jcc][t4][2030][11211][4.32.28] A communication error occurred during operations on the connection's underlying socket, socket input stream, \r\nor socket output stream.  Error location: Reply.fill() - socketInputStream.read (-1).  Message: Software caused connection abort (Write failed). ERRORCODE=-4499, SQLSTATE=08001\r\nat com.ibm.db2.jcc.am.b7.a(b7.java:338)\r\nat com.ibm.db2.jcc.t4.a.a(a.java:577)\r\nat com.ibm.db2.jcc.t4.a.a(a.java:561)\r\nat com.ibm.db2.jcc.t4.a.a(a.java:556)\r\nat com.ibm.db2.jcc.t4.a.b(a.java:1727)\r\nat com.ibm.db2.jcc.t4.a.a(a.java:1752)\r\nat com.ibm.db2.jcc.t4.a.h(a.java:495)\r\nat com.ibm.db2.jcc.t4.a.flush_(a.java:420)\r\nat com.ibm.db2.jcc.am.Agent.flow(Agent.java:265)\r\nat com.ibm.db2.jcc.am.ld.a(ld.java:4723)\r\nat com.ibm.db2.jcc.am.ld.b(ld.java:4338)\r\nat com.ibm.db2.jcc.am.ld.bd(ld.java:787)\r\nat com.ibm.db2.jcc.am.ld.executeQuery(ld.java:752)\r\nat io.agroal.pool.wrapper.PreparedStatementWrapper.executeQuery(PreparedStatementWrapper.java:78)\r\nat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\r\n... 47 more\r\nCaused by: java.net.SocketException: Software caused connection abort (Write failed)\r\nat java.base/java.net.SocketOutputStream.socketWrite0(Native Method)\r\nat java.base/java.net.SocketOutputStream.socketWrite(Unknown Source)\r\nat java.base/java.net.SocketOutputStream.write(Unknown Source)\r\nat java.base/sun.security.ssl.SSLSocketOutputRecord.deliver(Unknown Source)\r\nat java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(Unknown Source)\r\nat com.ibm.db2.jcc.t4.ae.b(ae.java:2069)\r\nat com.ibm.db2.jcc.t4.ae.a(ae.java:2011)\r\nat com.ibm.db2.jcc.t4.a.h(a.java:488)\r\n... 55 more\r\n15:11:2023 18:13:19,219 WARN  [io.quarkus.agroal.runtime.AgroalEventLoggingListener] (main) Datasource '<default>': JDBC resources leaked: 0 ResultSet(s) and 1 Statement(s)\r\n15:11:2023 18:13:19,235 WARN  [com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord] (main) ARJUNA016045: attempted rollback of < formatId=131077, gtrid_length=35, bqual_length=36, tx_uid=0:ffffa9fef005:b1dd:65550a3e:0, node_name=quarkus, branch_uid=0:ffffa9fef005:b1dd:65550a3e:3, subordinatenodename=null, eis_name=0 > (io.agroal.narayana.LocalXAResource@6dd36ab6) failed with exception code XAException.XAER_RMERR: javax.transaction.xa.XAException: Error trying to transactionRollback local transaction: [jcc][t4][10335][10366][4.32.28] Invalid operation: Connection is closed. ERRORCODE=-4470, SQLSTATE=08003\r\nat io.agroal.narayana.LocalXAResource.xaException(LocalXAResource.java:140)\r\nat io.agroal.narayana.LocalXAResource.xaException(LocalXAResource.java:134)\r\nat io.agroal.narayana.LocalXAResource.rollback(LocalXAResource.java:88)\r\nat com.arjuna.ats.internal.jta.resources.arjunacore.XAResourceRecord.topLevelAbort(XAResourceRecord.java:362)\r\nat com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3037)\r\nat com.arjuna.ats.arjuna.coordinator.BasicAction.doAbort(BasicAction.java:3016)\r\nat com.arjuna.ats.arjuna.coordinator.BasicAction.Abort(BasicAction.java:1679)\r\nat com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.cancel(TwoPhaseCoordinator.java:124)\r\nat com.arjuna.ats.arjuna.AtomicAction.abort(AtomicAction.java:186)\r\nat com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.rollbackAndDisassociate(TransactionImple.java:1377)\r\nat com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.rollback(BaseTransaction.java:145)\r\nat io.quarkus.narayana.jta.runtime.NotifyingTransactionManager.rollback(NotifyingTransactionManager.java:94)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.endTransaction(TransactionalInterceptorBase.java:372)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:170)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:104)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.doIntercept(TransactionalInterceptorRequired.java:38)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:58)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.intercept(TransactionalInterceptorRequired.java:32)\r\nat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired_Bean.intercept(Unknown Source)\r\nat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:42)\r\nat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\nat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:33)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_Subclass.fetchMelItemRestrictions(Unknown Source)\r\nat com.delta.techops.lmo.med.dao.RoutingRestrictionDao_ClientProxy.fetchMelItemRestrictions(Unknown Source)\r\nat com.delta.techops.lmo.med.service.RoutingRestrictionsServiceImpl.getRestrictionsForItem(RoutingRestrictionsServiceImpl.java:95)\r\nat com.delta.techops.lmo.med.service.RoutingRestrictionsServiceImpl_ClientProxy.getRestrictionsForItem(Unknown Source)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler.handleRequest(SearchRestrictionsForItemHandler.java:94)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler.handleRequest(SearchRestrictionsForItemHandler.java:32)\r\nat com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler_ClientProxy.handleRequest(Unknown Source)\r\nat io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder.handle(AmazonLambdaRecorder.java:83)\r\nat io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler.handleRequest(QuarkusStreamHandler.java:27)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\nat lambdainternal.EventHandlerLoader$StreamMethodRequestHandler.handleRequest(EventHandlerLoader.java:383)\r\nat lambdainternal.EventHandlerLoader$2.call(EventHandlerLoader.java:925)\r\nat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:268)\r\nat lambdainternal.AWSLambda.startRuntime(AWSLambda.java:207)\r\nat lambdainternal.AWSLambda.main(AWSLambda.java:196)\r\nCaused by: com.ibm.db2.jcc.am.SqlNonTransientConnectionException: [jcc][t4][10335][10366][4.32.28] Invalid operation: Connection is closed. ERRORCODE=-4470, SQLSTATE=08003\r\nat com.ibm.db2.jcc.am.b7.a(b7.java:800)\r\nat com.ibm.db2.jcc.am.b7.a(b7.java:66)\r\nat com.ibm.db2.jcc.am.b7.a(b7.java:133)\r\nat com.ibm.db2.jcc.am.Connection.checkForClosedConnection(Connection.java:6279)\r\nat com.ibm.db2.jcc.am.Connection.rollbackX(Connection.java:1423)\r\nat com.ibm.db2.jcc.am.Connection.rollback(Connection.java:1412)\r\nat io.agroal.pool.ConnectionHandler.transactionRollback(ConnectionHandler.java:366)\r\nat io.agroal.narayana.LocalXAResource.rollback(LocalXAResource.java:85)\r\n... 37 more\r\n15:11:2023 18:13:19,244 WARN  [io.quarkus.agroal.runtime.AgroalEventLoggingListener] (main) Datasource '<default>': [jcc][t4][10335][10366][4.32.28] Invalid operation: Connection is closed. ERRORCODE=-4470, SQLSTATE=08003\r\n15:11:2023 18:13:19,250 ERROR [com.delta.techops.lmo.med.service.RoutingRestrictionsServiceImpl] (main) Message:\"Exit getRestrictionsForItem() - MEDException -> getRestrictionsForItem() Failure in DB2 Processing failed (Status Code) -> getRestrictionsForItem() 500\", ServiceName:\"searchRestrictionsForItem\", LambdaRuntimeEnvironment:\"development-us-east-1\", TransactionId:\"mytran123456789\"\r\n15:11:2023 18:13:19,272 ERROR [com.delta.techops.lmo.med.handler.SearchRestrictionsForItemHandler] (main) Message:\"Exit handleRequest() - MEDException - null Processing failed (Response) - {statusCode: 503,headers: {X-Custom-Header=application/json, Access-Control-Allow-Origin=*, Access-Control-Allow-Methods=GET, OPTIONS, Access-Control-Allow-Headers=*, Content-Type=application/json},body: {\"statusCode\":503,\"errorDescription\":\"Error while executing query fetch MEL item restrictions\",\"errors\":[{\"code\":\"ROURES006E\",\"message\":\"Failure occurred in DB2\"}]}}\", ServiceName:\"searchRestrictionsForItem\", LambdaRuntimeEnvironment:\"development-us-east-1\", TransactionId:\"mytran123456789\"\r\n\r\n```\r\n### Expected behavior\r\n\r\nExpected behavior is the call should be consistent and should not fail abruptly.\r\n\r\n### Actual behavior\r\n\r\nCall failing for the first time, after that it is passing and again if kept idle for sometime it is failing and then again passing, same pattern noticed time and time again.\r\n\r\n### How to Reproduce?\r\n\r\nReproducer:\r\n\r\nQuarkus version 2.15.1.Final\r\nUsing Quarkus hibernate ORM and Quarkus JDBC DB2\r\n\r\n```\r\n**Sample code :** \r\n```\r\n```\r\n @Transactional\r\n    @SuppressWarnings(\"unchecked\")\r\n    public List<String> fetchItemCodeForSingleRestrictionId(String transactionId, String restrictionId) throws MEDException {\r\n        String logMessage = MEDUtil.generateLog(Constant.SEARCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getConstantType(), \"Enter fetchItemCodeForSingleRestrictionId()\", transactionId);\r\n        LOGGER.info(logMessage);\r\n        logMessage = MEDUtil.generateLog(Constant.SEARCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getConstantType(), \"Inside fetchItemCodeForSingleRestrictionId(), The incoming restrictionId is :\" +restrictionId, transactionId);\r\n        LOGGER.info(logMessage);\r\n        try {\r\n            List<String> filteredItemCodeListForSingleRestrictionId = new ArrayList<>();\r\n            Query fetchQuery = em.createQuery(QueryScript.getItemCodeSubFleetDetailsQuery).\r\n                    setParameter(RESTRICTIONID,restrictionId);\r\n            logMessage = MEDUtil.generateLog(Constant.SEARCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getConstantType(), \"Inside fetchItemCodeForSingleRestrictionId(), FetchQuery : \" +fetchQuery.toString(), transactionId);\r\n            LOGGER.info(logMessage);\r\n            List<Object[]> resultList = fetchQuery.getResultList();\r\n            if(ObjectUtils.isNotEmpty(fetchQuery.getResultList())) {\r\n                for (Object[] arr : resultList) {\r\n                    System.out.println(Arrays.toString(arr));\r\n                    filteredItemCodeListForSingleRestrictionId.add(Arrays.toString(arr));\r\n                }\r\n            }\r\n            logMessage = MEDUtil.generateLog(Constant.SEARCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getConstantType(), \"Exit fetchItemCodeForSingleRestrictionId(), size of filteredItemCodeListForSingleRestrictionId : \" +filteredItemCodeListForSingleRestrictionId.size(), transactionId);\r\n            LOGGER.info(logMessage);\r\n            return filteredItemCodeListForSingleRestrictionId;\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n            throw new MEDException(HttpStatus.SC_INTERNAL_SERVER_ERROR, ErrorDetails.ERROR_CODE_FETCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getErrorDesc(),\r\n                    ErrorDetails.ERROR_CODE_FETCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getErrorCode(),\r\n                    String.format(ErrorDetails.ERROR_CODE_FETCH_ITEM_CODE_SINGLE_RESTRICTION_ID.getErrorMsg(), ex.getMessage()));\r\n        }\r\n    }\r\n```\r\n    \r\n```\r\n    **The HQL is :** \r\n```\r\n    \r\n        public static final String getItemCodeSubFleetDetailsQuery = \"SELECT DISTINCT rest.deferralNumber, ser.configurationSubFleetNumber FROM MelItemRestrictions as rest, SerEquipmentAccount as ser WHERE ser.hpLpFleetCode = rest.ossFleetNumber AND rest.registrationId = :restrictionId\";\r\n\r\n\r\nCalling fetchItemCodeForSingleRestrictionId from service layer, PLEASE NOTE there is nothing wrong with the code and the query as it is working consistently after the first time, the issue is for the first time it is failing which should not\r\n\r\nCall is happening from POSTMAN (9.20.3)\r\n    \r\n\r\n### Output of `uname -a` or `ver`\r\n\r\nWindows 10 64 bit\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk version \"11.0.1\" 2018-10-16 OpenJDK Runtime Environment 18.9 (build 11.0.1+13) OpenJDK 64-Bit Server VM 18.9 (build 11.0.1+13, mixed mode)\r\n\r\n### Quarkus version or git rev\r\n\r\nQuarkus version 2.15.1.Final\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n$ mvn -version\r\nApache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)\r\nMaven home: C:\\Users\\633647\\softwares\\delta_softwares\\apache-maven-3.8.6\r\nJava version: 11.0.18, vendor: Red Hat, Inc., runtime: C:\\Program Files\\RedHat\\java-11-openjdk-11.0.18-1\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: \"windows 10\", version: \"10.0\", arch: \"amd64\", family: \"windows\"\r\n\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37134/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
