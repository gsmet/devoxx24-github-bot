{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/38989",
  "id": 2152040996,
  "node_id": "I_kwDOCFbutM6ARYok",
  "number": 38989,
  "title": "cert chain public key resolver thumbprints",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1479557456,
      "node_id": "MDU6TGFiZWwxNDc5NTU3NDU2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/oidc",
      "name": "area/oidc",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/313",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/313",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/313/labels",
    "id": 10643439,
    "node_id": "MI_kwDOCFbutM4Aomfv",
    "number": 313,
    "title": "3.8.2",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 43,
    "state": "closed",
    "created_at": "2024-03-05T18:50:21Z",
    "updated_at": "2024-03-07T12:48:57Z",
    "due_on": null,
    "closed_at": "2024-03-07T12:48:57Z"
  },
  "comments": 4,
  "created_at": "2024-02-24T01:51:27Z",
  "updated_at": "2024-03-05T18:55:26Z",
  "closed_at": "2024-03-01T16:00:15Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nI have a truststore configured to validate the oidc token, a self contained token with full chain certs, but fails to validate the thumbprints [here](https://github.com/quarkusio/quarkus/blob/main/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/runtime/CertChainPublicKeyResolver.java#L40). However, I can debug and verified that one if the thumbprints is valid, happens not to be the **first one** on index 0. \r\n\r\nSo, I'm thinking if instead of picking one (index 0), we should instead call calculate all the thumbprints of the chain and check if any of the set are part of the trust store certificate thumprints.\r\n\r\n### Expected behavior\r\n\r\nExcept one the thumbprints to be valid and proceed.\r\n\r\n### Actual behavior\r\n\r\nThrows an exception `UnresolvableKeyException(\"Certificate chain thumprint is invalid\")`\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n_No response_\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38989/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
