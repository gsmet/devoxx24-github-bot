{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/34763",
  "id": 1805322671,
  "node_id": "I_kwDOCFbutM5rmwmv",
  "number": 34763,
  "title": "Build Error introduced by 3.2.0 not extant in 2.16.x",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2744442223,
      "node_id": "MDU6TGFiZWwyNzQ0NDQyMjIz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-reproducer",
      "name": "triage/needs-reproducer",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for a reproducer."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 2,
  "created_at": "2023-07-14T18:22:23Z",
  "updated_at": "2023-07-28T14:03:22Z",
  "closed_at": "2023-07-28T14:03:22Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nHave a Service which uses a homegrown extension. This compiles and runs in 2.16.x. However, when the extensions and service are converted to 3.2.0 the compile produces the following error. There is no reference to which Producer it refers. We looked at every known producer both in the service and the extension code and all are tagged @ApplicationScoped.\r\n\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\nExpected the compile to run withut error. \r\n\r\n### Actual behavior\r\n\r\nCompiler produced this error:\r\n\r\n```posh\r\n[INFO] Reactor Summary for quarkus-mvp-async-parent 2.0.1-SNAPSHOT:\r\n[INFO] \r\n[INFO] quarkus-mvp-async-parent ........................... SUCCESS [  0.065 s]\r\n[INFO] quarkus-mvp-async .................................. FAILURE [  7.106 s]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  7.906 s\r\n[INFO] Finished at: 2023-07-14T09:43:30-07:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal io.quarkus:quarkus-maven-plugin:3.2.0.Final:build (default) on project quarkus-mvp-async: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n[ERROR] \t[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: jakarta.enterprise.inject.spi.DeploymentException: Found 4 deployment problems: \r\n[ERROR] [1] Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter():providers\r\n[ERROR] \t- declared on CLASS bean [types=[jakarta.ws.rs.ext.MessageBodyWriter<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter$AllWriteableMessageBodyWriter, org.jboss.resteasy.reactive.common.types.AllWriteableMarker, io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] [2] Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader():providers\r\n[ERROR] \t- declared on CLASS bean [types=[io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader, org.jboss.resteasy.reactive.server.jackson.JacksonBasicMessageBodyReader, org.jboss.resteasy.reactive.common.providers.serialisers.AbstractJsonMessageBodyReader, jakarta.ws.rs.ext.MessageBodyReader<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyReader<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] [3] Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader#providers\r\n[ERROR] \t- declared on CLASS bean [types=[jakarta.ws.rs.ext.MessageBodyReader<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyReader<java.lang.Object>, java.lang.Object, io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] [4] Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter#providers\r\n[ERROR] \t- declared on CLASS bean [types=[io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter, jakarta.ws.rs.ext.MessageBodyWriter<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter$AllWriteableMessageBodyWriter, org.jboss.resteasy.reactive.common.types.AllWriteableMarker, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] \tat io.quarkus.arc.processor.BeanDeployment.processErrors(BeanDeployment.java:1443)\r\n[ERROR] \tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:310)\r\n[ERROR] \tat io.quarkus.arc.processor.BeanProcessor.initialize(BeanProcessor.java:155)\r\n[ERROR] \tat io.quarkus.arc.deployment.ArcProcessor.validate(ArcProcessor.java:469)\r\n[ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n[ERROR] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n[ERROR] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n[ERROR] \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n[ERROR] \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n[ERROR] \tat io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n[ERROR] \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n[ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n[ERROR] \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n[ERROR] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n[ERROR] \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n[ERROR] \tSuppressed: jakarta.enterprise.inject.AmbiguousResolutionException: Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter():providers\r\n[ERROR] \t- declared on CLASS bean [types=[jakarta.ws.rs.ext.MessageBodyWriter<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter$AllWriteableMessageBodyWriter, org.jboss.resteasy.reactive.common.types.AllWriteableMarker, io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] \t\tat io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:486)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:624)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:298)\r\n[ERROR] \t\t... 13 more\r\n[ERROR] \tSuppressed: jakarta.enterprise.inject.AmbiguousResolutionException: Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader():providers\r\n[ERROR] \t- declared on CLASS bean [types=[io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader, org.jboss.resteasy.reactive.server.jackson.JacksonBasicMessageBodyReader, org.jboss.resteasy.reactive.common.providers.serialisers.AbstractJsonMessageBodyReader, jakarta.ws.rs.ext.MessageBodyReader<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyReader<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] \t\tat io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:486)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:624)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:298)\r\n[ERROR] \t\t... 13 more\r\n[ERROR] \tSuppressed: jakarta.enterprise.inject.AmbiguousResolutionException: Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader#providers\r\n[ERROR] \t- declared on CLASS bean [types=[jakarta.ws.rs.ext.MessageBodyReader<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyReader<java.lang.Object>, java.lang.Object, io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyReader]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] \t\tat io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:486)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:624)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:298)\r\n[ERROR] \t\t... 13 more\r\n[ERROR] \tSuppressed: jakarta.enterprise.inject.AmbiguousResolutionException: Ambiguous dependencies for type jakarta.ws.rs.ext.Providers and qualifiers [@Default]\r\n[ERROR] \t- java member: io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter#providers\r\n[ERROR] \t- declared on CLASS bean [types=[io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter, jakarta.ws.rs.ext.MessageBodyWriter<java.lang.Object>, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter$AllWriteableMessageBodyWriter, org.jboss.resteasy.reactive.common.types.AllWriteableMarker, org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter<java.lang.Object>, java.lang.Object], qualifiers=[@Default, @Any], target=io.quarkus.resteasy.reactive.jaxb.runtime.serialisers.ServerJaxbMessageBodyWriter]\r\n[ERROR] \t- available beans:\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=org.jboss.resteasy.cdi.ContextProducers]\r\n[ERROR] \t\t- PRODUCER METHOD bean [types=[java.lang.Object, jakarta.ws.rs.ext.Providers], qualifiers=[@Default, @Any], target=jakarta.ws.rs.ext.Providers providers(), declaringBean=io.quarkus.resteasy.reactive.server.runtime.QuarkusContextProducers]\r\n[ERROR] \t\tat io.quarkus.arc.processor.Beans.resolveInjectionPoint(Beans.java:486)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanInfo.init(BeanInfo.java:624)\r\n[ERROR] \t\tat io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:298)\r\n[ERROR] \t\t... 13 more\r\n```\r\n\r\n### How to Reproduce?\r\n\r\nNot sure how to provide all the code needed or if I am allowed to. Would have to get permission from Kaiser. \r\nCode is in internal github instance.\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n22.5.0 Darwin Kernel Version 22.5.0: Thu Jun  8 22:22:20 PDT 2023; root:xnu-8796.121.3~7/RELEASE_ARM64_T6000 arm64\r\n\r\n### Output of `java -version`\r\n\r\njava version \"17.0.7\" 2023-04-18 LTS Java(TM) SE Runtime Environment Oracle GraalVM 17.0.7+8.1 (build 17.0.7+8-LTS-jvmci-23.0-b12) Java HotSpot(TM) 64-Bit Server VM Oracle GraalVM 17.0.7+8.1 (build 17.0.7+8-LTS-jvmci-23.0-b12, mixed mode, sharing)\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n3.2.0\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34763/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
