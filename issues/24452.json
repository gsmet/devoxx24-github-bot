{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/24452",
  "id": 1175687066,
  "node_id": "I_kwDOCFbutM5GE4-a",
  "number": 24452,
  "title": "CDI issue with avro after migration to Quarkus 2.7",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273026591,
      "node_id": "MDU6TGFiZWwxMjczMDI2NTkx",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/gradle",
      "name": "area/gradle",
      "color": "0366d6",
      "default": false,
      "description": "Gradle"
    },
    {
      "id": 1287515315,
      "node_id": "MDU6TGFiZWwxMjg3NTE1MzE1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kotlin",
      "name": "area/kotlin",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2744442223,
      "node_id": "MDU6TGFiZWwyNzQ0NDQyMjIz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-reproducer",
      "name": "triage/needs-reproducer",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for a reproducer."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/184",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/184",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/184/labels",
    "id": 7922797,
    "node_id": "MI_kwDOCFbutM4AeORt",
    "number": 184,
    "title": "2.7.6.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 171,
    "state": "closed",
    "created_at": "2022-04-28T08:08:41Z",
    "updated_at": "2022-05-30T11:25:22Z",
    "due_on": null,
    "closed_at": "2022-05-30T11:25:22Z"
  },
  "comments": 8,
  "created_at": "2022-03-21T17:12:29Z",
  "updated_at": "2022-05-12T08:09:41Z",
  "closed_at": "2022-03-30T10:48:03Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWe have a Quarkus application with **Java** and **Kotlin** sources.\r\nThis component contains an avro file used to produce messages for Kafka\r\n\r\nGradle build of this application works perfectly with Quarkus 2.6 (2.6.3.Final)\r\nBut after migration to Quarkus 2.7 (2.7.5.Final), gradle build fails with some dependencies injection issues (see below)\r\n\r\nIt seems that some classes generated from Kotlin sources are not found by @Inject annotation used in classes generated from Java sources.\r\n\r\nIf we remove avro generation from this component, gradle build works fine.\r\n\n\n### Expected behavior\n\n> Task :quarkusBuild\r\nCaching disabled for task ':quarkusBuild' because:\r\n  Build cache is disabled\r\nTask ':quarkusBuild' is not up-to-date because:\r\n  Task has failed previously.\r\nbuilding quarkus jar\r\n\r\n> Task :quarkusBuild\r\nQuarkus augmentation completed in 6991ms\r\n:quarkusBuild (Thread[Execution worker for ':',5,main]) completed. Took 8.685 secs.\r\n:assemble (Thread[Execution worker for ':',5,main]) started.\r\n\r\n> Task :assemble\r\nSkipping task ':assemble' as it has no actions.\r\n:assemble (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.\r\n:check (Thread[Execution worker for ':',5,main]) started.\r\n\r\n> Task :check\r\nSkipping task ':check' as it has no actions.\r\n:check (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.\r\n:build (Thread[Execution worker for ':',5,main]) started.\r\n\r\n> Task :build\r\nSkipping task ':build' as it has no actions.\r\n:build (Thread[Execution worker for ':',5,main]) completed. Took 0.0 secs.\r\n\r\nBUILD SUCCESSFUL\n\n### Actual behavior\n\n> Task :quarkusBuild FAILED\r\n:quarkusBuild (Thread[Execution worker for ':',5,main]) completed. Took 10.161 secs.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':quarkusBuild'.\r\n> io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n        [error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: Found 8 deployment problems:\r\nUnsatisfied dependency for type xxx.xxx.MonitoringEventService and qualifiers [@Default]\r\n        - java member: xxx.xxx.XxxxService#monitoringEventService\r\n        - declared on CLASS bean [types=[xxx.xxx.XxxxService, java.lang.Object], qualifiers=[@Default, @Any], target=xxx.xxx.XxxxService]\n\n### How to Reproduce?\n\n_No response_\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n11.0.10\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.7.5.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24452/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
