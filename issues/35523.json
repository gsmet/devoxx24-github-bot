{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/35523",
  "id": 1864827396,
  "node_id": "I_kwDOCFbutM5vJwIE",
  "number": 35523,
  "title": "Qute in 3.3.0 can no longer accept enums that are null",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1714005220,
      "node_id": "MDU6TGFiZWwxNzE0MDA1MjIw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/qute",
      "name": "area/qute",
      "color": "0366d6",
      "default": false,
      "description": "The template engine"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/269",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/269",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/269/labels",
    "id": 9829121,
    "node_id": "MI_kwDOCFbutM4AlfsB",
    "number": 269,
    "title": "3.3.1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 28,
    "state": "closed",
    "created_at": "2023-08-23T11:03:29Z",
    "updated_at": "2023-10-31T11:52:22Z",
    "due_on": null,
    "closed_at": "2023-08-28T20:04:03Z"
  },
  "comments": 4,
  "created_at": "2023-08-24T10:06:18Z",
  "updated_at": "2023-08-26T09:48:42Z",
  "closed_at": "2023-08-25T10:50:05Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nQute rendering error: If I have a class that has an enum field, and the enum happens to be null in an instance, from 3.3.0 on, Quarkus throws. This happens on reasteasy classic and reactive. with 3.2.x, it was working.\n\n### Expected behavior\n\nExpect to output empty string as before\n\n### Actual behavior\n\nThrows exception \r\n\r\n```\r\njava.lang.NullPointerException: Cannot invoke \"Object.equals(Object)\" because \"<local5>\" is null\r\n\tat foo.FooResource$_TemplateClass_ValueResolver.resolve(Unknown Source)\r\n\tat io.quarkus.qute.EvaluatorImpl.resolve(EvaluatorImpl.java:208)\r\n\tat io.quarkus.qute.EvaluatorImpl.resolveReference(EvaluatorImpl.java:128)\r\n\tat io.quarkus.qute.EvaluatorImpl.lambda$resolveReference$2(EvaluatorImpl.java:132)\r\n\tat io.quarkus.qute.CompletedStage.thenCompose(CompletedStage.java:249)\r\n\tat io.quarkus.qute.EvaluatorImpl.resolveReference(EvaluatorImpl.java:132)\r\n\tat io.quarkus.qute.EvaluatorImpl.evaluate(EvaluatorImpl.java:87)\r\n\tat io.quarkus.qute.ResolutionContextImpl.evaluate(ResolutionContextImpl.java:29)\r\n\tat io.quarkus.qute.ExpressionNode.resolve(ExpressionNode.java:34)\r\n\tat io.quarkus.qute.SectionNode$SectionResolutionContextImpl.execute(SectionNode.java:228)\r\n\tat io.quarkus.qute.SectionHelper$SectionResolutionContext.execute(SectionHelper.java:66)\r\n\tat io.quarkus.qute.Parser$1.resolve(Parser.java:1274)\r\n\tat io.quarkus.qute.SectionNode.resolve(SectionNode.java:53)\r\n\tat io.quarkus.qute.SectionNode.resolve(SectionNode.java:58)\r\n\tat io.quarkus.qute.TemplateImpl$TemplateInstanceImpl.renderData(TemplateImpl.java:233)\r\n\tat io.quarkus.qute.TemplateImpl$TemplateInstanceImpl.renderAsyncNoTimeout(TemplateImpl.java:224)\r\n\tat io.quarkus.qute.TemplateImpl$TemplateInstanceImpl.renderAsync(TemplateImpl.java:197)\r\n\tat io.quarkus.qute.runtime.TemplateProducer$InjectableTemplate$InjectableTemplateInstanceImpl.renderAsync(TemplateProducer.java:220)\r\n\tat io.quarkus.resteasy.qute.runtime.TemplateResponseFilter.filter(TemplateResponseFilter.java:65)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:329)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:243)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:100)\r\n\tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:73)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:518)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:458)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:240)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:154)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:321)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:157)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:229)\r\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:82)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:147)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:93)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:577)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nResulted in: io.quarkus.qute.TemplateException\r\n\tat io.quarkus.qute.CompletedStage.get(CompletedStage.java:65)\r\n\tat io.quarkus.qute.MultiResultNode.process(MultiResultNode.java:20)\r\n\tat io.quarkus.qute.TemplateImpl$TemplateInstanceImpl.lambda$renderData$5(TemplateImpl.java:239)\r\n\tat io.quarkus.qute.CompletedStage.whenComplete(CompletedStage.java:285)\r\n\t... 26 more\r\nResulted in: java.util.concurrent.CompletionException: io.quarkus.qute.TemplateException\r\n\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:674)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:662)\r\n\tat java.base/java.util.concurrent.CompletableFuture.thenApply(CompletableFuture.java:2200)\r\n\tat java.base/java.util.concurrent.CompletableFuture.thenApply(CompletableFuture.java:144)\r\n\t... 25 more\r\nResulted in: org.jboss.resteasy.spi.UnhandledException: java.util.concurrent.CompletionException: io.quarkus.qute.TemplateException\r\n\tat org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:357)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:205)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:537)\r\n\t... 16 more\r\n```\n\n### How to Reproduce?\n\nRun this reproducer repo, navigate to http://127.0.0.1:8080\r\n\r\nhttps://github.com/imperatorx/qute-regression-reproducer\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n21\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n3.3.0\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35523/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
