{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/40055",
  "id": 2240706544,
  "node_id": "I_kwDOCFbutM6Fjnfw",
  "number": 40055,
  "title": "Unable to compile qute codestart to native on windows  ",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    },
    {
      "id": 1714005220,
      "node_id": "MDU6TGFiZWwxNzE0MDA1MjIw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/qute",
      "name": "area/qute",
      "color": "0366d6",
      "default": false,
      "description": "The template engine"
    },
    {
      "id": 2244490669,
      "node_id": "MDU6TGFiZWwyMjQ0NDkwNjY5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/codestarts",
      "name": "area/codestarts",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2497075451,
      "node_id": "MDU6TGFiZWwyNDk3MDc1NDUx",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/native-image",
      "name": "area/native-image",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/328",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/328",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/328/labels",
    "id": 11051630,
    "node_id": "MI_kwDOCFbutM4AqKJu",
    "number": 328,
    "title": "3.8.5",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 112,
    "state": "closed",
    "created_at": "2024-05-14T13:22:35Z",
    "updated_at": "2024-06-05T11:10:12Z",
    "due_on": null,
    "closed_at": "2024-06-05T11:10:12Z"
  },
  "comments": 18,
  "created_at": "2024-04-12T18:37:52Z",
  "updated_at": "2024-05-22T13:15:40Z",
  "closed_at": "2024-04-22T08:58:05Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWhen I try compile resteasy-qute and rest-qute (resteasy-reactive-qute) codestart to native on windows the compilation fail with this error:\r\n```\r\n[1/8] Initializing...\r\n(11,5s @ 0,14GB)\r\nJava version: 21.0.2+13-LTS, vendor version: Oracle GraalVM 21.0.2+13.1\r\nGraal compiler: optimization level: 2, target machine: x86-64-v3, PGO: ML-inferred\r\nC compiler: cl.exe (microsoft, x64, 19.38.33130)\r\nGarbage collector: Serial GC (max heap size: 80% of RAM)\r\n4 user-specific feature(s):\r\n- com.oracle.svm.thirdparty.gson.GsonFeature\r\n- io.quarkus.runner.Feature: Auto-generated class by Quarkus from the existing extensions\r\n - io.quarkus.runtime.graal.DisableLoggingFeature: Disables INFO logging during the analysis phase\r\n- org.eclipse.angus.activation.nativeimage.AngusActivationFeature\r\n ------------------------------------------------------------------------------------------------------------------------\r\n3 experimental option(s) unlocked:\r\n- '-H:+AllowFoldMethods' (origin(s): command line)\r\n- '-H:BuildOutputJSONFile' (origin(s): command line)\r\n- '-H:-UseServiceLoaderFeature' (origin(s): command line)\r\n------------------------------------------------------------------------------------------------------------------------\r\nBuild resources:\r\n- 12,09GB of memory (75,6% of 16,00GB system memory, determined at start)\r\n- 2 thread(s) (100,0% of 2 available processor(s), determined at start)\r\n[2/8] Performing analysis...  [*]  (76,8s @ 1,08GB)\r\n 11 652 reachable types   (86,9% of   13 416 total)\r\n 16 854 reachable fields  (58,6% of   28 750 total)\r\n 63 411 reachable methods (58,6% of  108 179 total)\r\n 3 693 types,   155 fields, and 3 238 methods registered for reflection\r\n 4 native libraries: crypt32, ncrypt, psapi, winhttp\r\n------------------------------------------------------------------------------------------------------------------------\r\n11,3s (12,6% of total time) in 111 GCs | Peak RSS: 1,88GB | CPU load: 1,94\r\n------------------------------------------------------------------------------------------------------------------------\r\nProduced artifacts:\r\nC:\\Users\\jedla\\Downloads\\code-with-quarkus\\target\\code-with-quarkus-1.0.0-SNAPSHOT-native-image-source-jar\\svm_err_b_20240412T200838.238_pid2728.md (build_info)\r\n========================================================================================================================\r\nFailed generating 'code-with-quarkus-1.0.0-SNAPSHOT-runner' after 1m 28s.\r\nThe build process encountered an unexpected error:\r\ncom.oracle.svm.core.util.VMError$HostedError: InternalFeature defined by com.oracle.svm.hosted.ResourcesFeature unexpectedly failed with a(n) java.util.regex.PatternSyntaxException\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.core.util.VMError.shouldNotReachHere(VMError.java:86)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.FeatureHandler.handleFeatureError(FeatureHandler.java:287)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.FeatureHandler.forEachFeature(FeatureHandler.java:92)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$11(NativeImageGenerator.java:786)\r\nat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.AbstractAnalysisEngine.runAnalysis(AbstractAnalysisEngine.java:181)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:783)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:592)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:550)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:539)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:721)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.start(NativeImageGeneratorRunner.java:143)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:98)\r\n\r\nCaused by: java.util.regex.PatternSyntaxException: Unknown character property name {a} near index 11\r\ntemplates\\page.qute.html\r\n           ^\r\n\r\nat java.base/java.util.regex.Pattern.error(Pattern.java:2204)\r\nat java.base/java.util.regex.Pattern.family(Pattern.java:3089)\r\nat java.base/java.util.regex.Pattern.sequence(Pattern.java:2332)\r\nat java.base/java.util.regex.Pattern.expr(Pattern.java:2245)\r\nat java.base/java.util.regex.Pattern.compile(Pattern.java:1945)\r\nat java.base/java.util.regex.Pattern.<init>(Pattern.java:1576)\r\nat java.base/java.util.regex.Pattern.compile(Pattern.java:1101)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ResourcesFeature.makeResourcePattern(ResourcesFeature.java:364)\r\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\nat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\nat java.base/java.util.concurrent.ConcurrentHashMap$KeySpliterator.forEachRemaining(ConcurrentHashMap.java:3573)\r\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\nat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\nat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)\r\nat java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)\r\nat java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)\r\nat java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)\r\nat java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ResourcesFeature.compilePatterns(ResourcesFeature.java:357)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ResourcesFeature.duringAnalysis(ResourcesFeature.java:335)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$10(NativeImageGenerator.java:786)\r\nat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.FeatureHandler.forEachFeature(FeatureHandler.java:90)\r\n... 9 more\r\n```\r\n\r\n### Expected behavior\r\n\r\nFinish build without any error.\r\n\r\n### Actual behavior\r\n\r\n```\r\nCaused by: java.util.regex.PatternSyntaxException: Unknown character property name {a} near index 11\r\ntemplates\\page.qute.html\r\n```\r\n\r\n### How to Reproduce?\r\n\r\n1. Download [https://code.quarkus.io/d?e=resteasy-qute&cn=code.quarkus.io](https://code.quarkus.io/d?e=resteasy-qute&cn=code.quarkus.io)\r\n2. Compile to native by `mvn.cmd install -Dnative`\r\n3. During the stage 2 error appear\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\nWindows\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### Mandrel or GraalVM version (if different from Java)\r\n\r\nGraalVM 23.1 JDK 21.0.2+13-LTS-jvmci-23.1-b30\r\n\r\n### Quarkus version or git rev\r\n\r\n3.8.3+, 3.9.0.CR2+\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nApache maven 3.8.8\r\n\r\n### Additional information\r\n\r\nLatest version where this is working are 3.8.2 and 3.9.0.CR1 (just tested if all 3.9 is affected)\r\nTried it on Windows 10 but this happening also on github runners. Tested it on Linux and build fine.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40055/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
