{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/21602",
  "id": 1059809666,
  "node_id": "I_kwDOCFbutM4_K2mC",
  "number": 21602,
  "title": "Quarkus 2.5.0.CR1 / Final: Assets loaded from jar/classpath are not served (parsed?) correctly anymore",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/160",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/160",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/160/labels",
    "id": 7427013,
    "node_id": "MI_kwDOCFbutM4AcVPF",
    "number": 160,
    "title": "2.5.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 110,
    "state": "closed",
    "created_at": "2021-11-24T15:28:10Z",
    "updated_at": "2021-12-02T11:14:37Z",
    "due_on": null,
    "closed_at": "2021-12-01T12:26:44Z"
  },
  "comments": 22,
  "created_at": "2021-11-22T07:51:10Z",
  "updated_at": "2021-11-24T15:38:07Z",
  "closed_at": "2021-11-24T00:15:00Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nHey there,\r\n\r\nI just tried to update our Keycloak.X distribution (mutable-jar) from 2.4.2.Final to 2.5.0.Final. \r\n\r\nSadly, when opening the main login page with a freshly started distribution, it seems that the assets we load from classpath/jar are not loaded correctly anymore, and thus the page looks like this:\r\n![Screenshot 2021-11-22 at 08 34 54](https://user-images.githubusercontent.com/89905860/142821304-3c555e57-28f8-440e-827a-fdef18efa806.png)\r\n \r\n\r\nI then checked also with 2.5.0.CR1 -> Bug also appears.\r\n\r\nThen with same codebase from our side and 2.4.2.Final -> Assets get served correctly.\r\n\r\nI then checked request logs -> assets get \"served\" with a 200 success message. \r\n\r\nThen I checked the actual contents which are served =>  all served assets (images, css, js) seem to be served, but the actual content seems to be \"cut-off\".\r\nSo the Issue seems to be the parsing of the css/js/png files from the jar. (see screenshot in actual behaviour).\r\n\r\nI'll try to narrow it down more now, but wanted to reach out to you people to ask if you might have an idea what could cause this new behaviour?\r\n\r\n\n\n### Expected behavior\n\nAssets get served correctly as with 2.4.2.Final\n\n### Actual behavior\n\nAssets (images, css, js) do not get served correctly. Looks like something has changed in the parsing of these files, resulting in them being kind of cut-off. See e.g.:\r\n![Screenshot 2021-11-22 at 08 28 59](https://user-images.githubusercontent.com/89905860/142821641-444a72ed-a7c9-45bd-ba90-914e16bd0f99.png)\r\n \r\n\n\n### How to Reproduce?\n\n1. Build Keycloak.X Distribution with pom.xml in quarkus package set to 2.5.0.Final (and postgres to 42.3.1), use e.g. `mvn clean install -DskipTests -Pdistribution` in root directory (or see readme here: https://github.com/keycloak/keycloak/tree/main/quarkus ).\r\n2. unpack zip from distribution/server-x-dist/target \r\n3. cd <dist>/bin\r\n4. run ./kc.sh start-dev\r\n5. open localhost:8080\r\n\r\n(feel free to reach out to get a dist package with 2.4.2.Final/2.5.0.CR1/2.5.0.Final)\n\n### Output of `uname -a` or `ver`\n\nDarwin dguhr-mac 20.6.0 Darwin Kernel Version 20.6.0: Tue Oct 12 18:33:42 PDT 2021; root:xnu-7195.141.8~1/RELEASE_X86_64 x86_64\n\n### Output of `java -version`\n\nopenjdk version \"11.0.12\" 2021-07-20 OpenJDK Runtime Environment Homebrew (build 11.0.12+0) OpenJDK 64-Bit Server VM Homebrew (build 11.0.12+0, mixed mode)\n\n### GraalVM version (if different from Java)\n\n-\n\n### Quarkus version or git rev\n\n2.5.0.CR1 / 2.5.0.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n3.6.3\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21602/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
