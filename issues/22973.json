{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/22973",
  "id": 1106976381,
  "node_id": "I_kwDOCFbutM5B-x59",
  "number": 22973,
  "title": "JSON response may be truncated at 8192 bytes boundary",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/170",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/170",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/170/labels",
    "id": 7576680,
    "node_id": "MI_kwDOCFbutM4Ac5xo",
    "number": 170,
    "title": "2.6.3.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 54,
    "state": "closed",
    "created_at": "2022-01-15T21:47:17Z",
    "updated_at": "2022-10-31T15:34:22Z",
    "due_on": null,
    "closed_at": "2022-01-20T14:36:42Z"
  },
  "comments": 1,
  "created_at": "2022-01-18T14:29:24Z",
  "updated_at": "2022-01-19T16:22:33Z",
  "closed_at": "2022-01-19T09:36:40Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nA JAX-RS endpoint returns a `Map` instance to be serialized to JSON and returned. In some cases (I was not able to find the actual cause) the response returned to the client is truncated and does not contain the full JSON response.\r\n\r\nThe code behaves correctly with Quarkus 2.4.1, but when built with a newer version (tried 2.5.1 and 2.6.2), it produces the truncated response. I was able to reproduce the behavior reliably on different systems (Oracle on Windows, Eclipse Temurin on Alpine) with the given example. The interesting thing is that even small changes of the response may cause the response to be rendered correctly. I could not figure out the reason for the behavior. A notable point is that the response chunk that is returned, has 8192 bytes.\r\n\n\n### Expected behavior\n\nThe response returned by the reproducing example should be complete, not truncated.\n\n### Actual behavior\n\nThe example returns the truncated response, which is truncated at 8192 bytes (ends with `{\"fileName\":\"tome2.pdf\",\"modifiedAt\":\"2021-12-14T09:53:`).\n\n### How to Reproduce?\n\n1. Build the example `mvn clean package`, JDK 17 assumed (`toolchains` profile may be used to choose the JDK if toolchains is configured).\r\n2. Run the example application.\r\n3. Get the response: `curl --request GET --url http://localhost:8080/objects`\r\n\r\nChanges in the POM file's `quarkus.version` property may deliver different results as noted, the correct behavior should be observed when the property is changed to `2.4.1`.\r\n\r\n[cut-off-bug.zip](https://github.com/quarkusio/quarkus/files/7889728/cut-off-bug.zip)\r\n\n\n### Output of `uname -a` or `ver`\n\nMicrosoft Windows [Version 10.0.19043.1415]\n\n### Output of `java -version`\n\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.1+12-LTS-39, mixed mode, sharing)\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.6.2\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.2 (ea98e05a04480131370aa0c110b8c54cf726c06f)\n\n### Additional information\n\nAs noted in the description, the problem was observed for the first  time with the original code in Docker based on `eclipse-temurin:17-alpine`.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22973/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
