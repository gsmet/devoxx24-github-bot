{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/37782",
  "id": 2044111559,
  "node_id": "I_kwDOCFbutM551qrH",
  "number": 37782,
  "title": "`ExtensionDescriptorMojoTest` fails on a pristine computer",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/299",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/299",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/299/labels",
    "id": 10429739,
    "node_id": "MI_kwDOCFbutM4AnyUr",
    "number": 299,
    "title": "3.9.0.CR1",
    "description": "",
    "creator": {
      "login": "quarkusbot",
      "id": 61254497,
      "node_id": "MDQ6VXNlcjYxMjU0NDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/61254497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quarkusbot",
      "html_url": "https://github.com/quarkusbot",
      "followers_url": "https://api.github.com/users/quarkusbot/followers",
      "following_url": "https://api.github.com/users/quarkusbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quarkusbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarkusbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarkusbot/subscriptions",
      "organizations_url": "https://api.github.com/users/quarkusbot/orgs",
      "repos_url": "https://api.github.com/users/quarkusbot/repos",
      "events_url": "https://api.github.com/users/quarkusbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarkusbot/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 298,
    "state": "closed",
    "created_at": "2024-01-17T09:57:21Z",
    "updated_at": "2024-07-18T12:19:14Z",
    "due_on": null,
    "closed_at": "2024-03-13T12:25:09Z"
  },
  "comments": 8,
  "created_at": "2023-12-15T17:38:01Z",
  "updated_at": "2024-03-01T15:23:42Z",
  "closed_at": "2024-03-01T09:59:18Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nThe `ExtensionDescriptorMojoTest` fails on a pristine system with an error like this:\r\n\r\n```\r\n[ERROR] io.quarkus.maven.ExtensionDescriptorMojoTest.shouldProcessRealisticExtensionCleanly -- Time elapsed: 8.031 s <<< ERROR!\r\norg.apache.maven.plugin.MojoExecutionException: Failed to resolve dependencies of io.quackiverse:quarkus-fake-extension:jar:999-SNAPSHOT\r\n    at io.quarkus.maven.ExtensionDescriptorMojo.resolveRuntimeDeps(ExtensionDescriptorMojo.java:890)\r\n    at io.quarkus.maven.ExtensionDescriptorMojo.validateExtensionDeps(ExtensionDescriptorMojo.java:788)\r\n    at io.quarkus.maven.ExtensionDescriptorMojo.execute(ExtensionDescriptorMojo.java:255)\r\n    at io.quarkus.maven.ExtensionDescriptorMojoTest.shouldProcessRealisticExtensionCleanly(ExtensionDescriptorMojoTest.java:146)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\nCaused by: org.eclipse.aether.resolution.DependencyResolutionException: Failed to collect dependencies at io.quarkus:quarkus-core:jar:2.12.0.Final -> org.jboss.logging:jboss-logging-annotations:jar:2.2.1.Final\r\n    at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:362)\r\n    at io.quarkus.maven.ExtensionDescriptorMojo.resolveRuntimeDeps(ExtensionDescriptorMojo.java:887)\r\n    ... 6 more\r\nCaused by: org.eclipse.aether.collection.DependencyCollectionException: Failed to collect dependencies at io.quarkus:quarkus-core:jar:2.12.0.Final -> org.jboss.logging:jboss-logging-annotations:jar:2.2.1.Final\r\n    at org.eclipse.aether.internal.impl.collect.DependencyCollectorDelegate.collectDependencies(DependencyCollectorDelegate.java:260)\r\n    at org.eclipse.aether.internal.impl.collect.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:87)\r\n    at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:327)\r\n    ... 7 more\r\nCaused by: org.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.jboss.logging:jboss-logging-annotations:jar:2.2.1.Final\r\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:289)\r\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:175)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.resolveCachedArtifactDescriptor(DfDependencyCollector.java:382)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.getArtifactDescriptorResult(DfDependencyCollector.java:368)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.processDependency(DfDependencyCollector.java:218)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.processDependency(DfDependencyCollector.java:156)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.process(DfDependencyCollector.java:138)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.doRecurse(DfDependencyCollector.java:343)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.processDependency(DfDependencyCollector.java:277)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.processDependency(DfDependencyCollector.java:156)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.process(DfDependencyCollector.java:138)\r\n    at org.eclipse.aether.internal.impl.collect.df.DfDependencyCollector.doCollectDependencies(DfDependencyCollector.java:108)\r\n    at org.eclipse.aether.internal.impl.collect.DependencyCollectorDelegate.collectDependencies(DependencyCollectorDelegate.java:222)\r\n    ... 9 more\r\nCaused by: org.apache.maven.model.resolution.UnresolvableModelException: The following artifacts could not be resolved: org.jboss:jboss-parent:pom:34 (present, but unavailable): Cannot access central (https://repo.maven.apache.org/maven2) in offline mode and the artifact org.jboss:jboss-parent:pom:34 has not been downloaded from it before.\r\n    at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel(DefaultModelResolver.java:160)\r\n    at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel(DefaultModelResolver.java:204)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:1009)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:801)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:327)\r\n    at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:243)\r\n    at io.quarkus.bootstrap.resolver.maven.MavenModelBuilder.build(MavenModelBuilder.java:63)\r\n    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:284)\r\n    ... 21 more\r\nCaused by: org.eclipse.aether.resolution.ArtifactResolutionException: The following artifacts could not be resolved: org.jboss:jboss-parent:pom:34 (present, but unavailable): Cannot access central (https://repo.maven.apache.org/maven2) in offline mode and the artifact org.jboss:jboss-parent:pom:34 has not been downloaded from it before.\r\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:459)\r\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:259)\r\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:242)\r\n    at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel(DefaultModelResolver.java:158)\r\n    ... 28 more\r\nCaused by: org.eclipse.aether.transfer.ArtifactNotFoundException: Cannot access central (https://repo.maven.apache.org/maven2) in offline mode and the artifact org.jboss:jboss-parent:pom:34 has not been downloaded from it before.\r\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:410)\r\n    ... 31 more\r\nCaused by: org.eclipse.aether.transfer.RepositoryOfflineException: Cannot access central (https://repo.maven.apache.org/maven2) in offline mode\r\n    at org.eclipse.aether.internal.impl.DefaultOfflineController.checkOffline(DefaultOfflineController.java:59)\r\n    at org.eclipse.aether.internal.impl.Utils.checkOffline(Utils.java:106)\r\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:404)\r\n    ... 31 more\r\n```\r\n\r\nAs a workaround, set the `io.quarkus.maven.ExtensionDescriptorMojoTest#RESOLVE_OFFLINE` field to `false` and re-run the tests in `independent-projects/extension-maven-plugin`. After the tests pass, the field can be reverted as the test will continue to pass from now on.\n\n### Expected behavior\n\nThe test should pass.\n\n### Actual behavior\n\nThe test fails with the aforementioned exception.\n\n### How to Reproduce?\n\n1. Start with a pristine system. It may be enough to drop `~/.m2/repository` but I haven't been brave enough to try it.\r\n2. Build Quarkus, including this test.\r\n3. Observe failure.\n\n### Output of `uname -a` or `ver`\n\nDarwin xxxx 23.1.0 Darwin Kernel Version 23.1.0: Mon Oct  9 21:28:45 PDT 2023; root:xnu-10002.41.9~6/RELEASE_ARM64_T6020 arm64\n\n### Output of `java -version`\n\nopenjdk version \"17.0.9\" 2023-10-17 OpenJDK Runtime Environment Temurin-17.0.9+9 (build 17.0.9+9) OpenJDK 64-Bit Server VM Temurin-17.0.9+9 (build 17.0.9+9, mixed mode)\n\n### Quarkus version or git rev\n\n0d90b7c0b82262ed38a00ac8b34385f19c88dd9a\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.9.5 (57804ffe001d7215b5e7bcb531cf83df38f93546) Maven home: /Users/david/local/apache-maven Java version: 17.0.9, vendor: Eclipse Adoptium, runtime: /Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home Default locale: en_US, platform encoding: UTF-8 OS name: \"mac os x\", version: \"14.1.2\", arch: \"aarch64\", family: \"mac\"\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37782/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
