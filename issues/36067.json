{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/36067",
  "id": 1907061138,
  "node_id": "I_kwDOCFbutM5xq3GS",
  "number": 36067,
  "title": "@ClientObjectMapper should run only once",
  "labels": [
    {
      "id": 985346622,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjI=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/enhancement",
      "name": "kind/enhancement",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/285",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/285",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/285/labels",
    "id": 10111535,
    "node_id": "MI_kwDOCFbutM4Amkov",
    "number": 285,
    "title": "3.5.1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 60,
    "state": "closed",
    "created_at": "2023-10-26T19:15:39Z",
    "updated_at": "2024-01-23T17:09:43Z",
    "due_on": null,
    "closed_at": "2023-11-08T14:18:05Z"
  },
  "comments": 8,
  "created_at": "2023-09-21T14:01:20Z",
  "updated_at": "2023-11-06T17:37:10Z",
  "closed_at": "2023-09-25T18:47:07Z",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nWhen using context resolver. I can use a pattern like this. Which will make the ObjectMapper copied a single time;\r\n```java\r\npublic class MyWriter implements ContextResolver<ObjectMapper> {\r\n\r\n    private final ObjectMapper myMapper;\r\n\r\n    MyWriter(ObjectMapper mapper) {\r\n        this.myMapper = mapper.copy();\r\n        myMapper.setConfig(myMapper.getSerializationConfig().withView(getClass()));\r\n    }\r\n\r\n    @Override\r\n    public ObjectMapper getContext(Class<?> type) {\r\n        return myMapper;\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen using \r\n```java\r\n    @ClientObjectMapper\r\n    static ObjectMapper objectMapper(ObjectMapper defaultObjectMapper) {\r\n        ObjectMapper myMapper = defaultObjectMapper.copy();\r\n        return myMapper.setConfig(myMapper.getSerializationConfig().withView(MyApi.class));\r\n    }\r\n```\r\n\r\nThis have the effect that if I have 100 concurrent requests to the api, I can see 100 objectMappers getting created. Since the static method does not have any context of what is being called, it could only be ran once so save the overhead of creating /copying and storing an extra object mapper.\r\n\r\n### Implementation ideas\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36067/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
