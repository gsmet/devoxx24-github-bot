{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27589",
  "id": 1355502505,
  "node_id": "I_kwDOCFbutM5Qy1Op",
  "number": 27589,
  "title": "Quarkus startup hangs after upgrade to version 2.11.x.Final",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/204",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/204",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/204/labels",
    "id": 8384152,
    "node_id": "MI_kwDOCFbutM4Af-6Y",
    "number": 204,
    "title": "2.12.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 77,
    "state": "closed",
    "created_at": "2022-09-05T19:04:15Z",
    "updated_at": "2022-09-13T05:31:24Z",
    "due_on": null,
    "closed_at": "2022-09-07T11:32:02Z"
  },
  "comments": 24,
  "created_at": "2022-08-30T10:00:28Z",
  "updated_at": "2022-09-05T19:07:15Z",
  "closed_at": "2022-08-31T20:47:40Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nAfter upgrading our services one of the service isn't starting up anymore, at first even the build hangs. The other services are working correctly, but this one repository ([CoMPAS SCL Validator](https://github.com/com-pas/compas-scl-validator)) doesn't work anymore.\r\n\r\nThis repository is using a Library (RiseClipse) that's based on the Eclipse Framework and Eclipse OCL. To make it compile and run we are using the plugin 'tycho-eclipserun-plugin' to create a local maven mirror from a Eclipse P2 Site. Maybe this is causing the problem in the new version or the way the Eclipse Framework is working.\r\n\r\nFirst the build stopped at the goal 'generate-code-tests' from the Quarkus plugin. after adding some configuration (skipSourceGeneration) to the plugin\r\n\r\n```\r\n<plugin>\r\n  <groupId>io.quarkus</groupId>\r\n  <artifactId>quarkus-maven-plugin</artifactId>\r\n  <version>${quarkus.platform.version}</version>\r\n  <extensions>true</extensions>\r\n  <executions>\r\n    <execution>\r\n      <goals>\r\n        <goal>build</goal>\r\n        <goal>generate-code</goal>\r\n        <goal>generate-code-tests</goal>\r\n      </goals>\r\n    </execution>\r\n  </executions>\r\n  <configuration>\r\n    <skipSourceGeneration>true</skipSourceGeneration>\r\n  </configuration>\r\n</plugin>\r\n```\r\n\r\nThe build continued but next hangs when trying to execute the HealthCheckTest where Quarkus is started and we first check if the server starts. In all situation the CPU is running at 100%, so something is happening.\r\n\r\n### Expected behavior\r\n\r\nBuild runs correctly and application starts.\r\n\r\n### Actual behavior\r\n\r\nIt look when the application tries to startup it comes in a loop, because the CPU stays at 100%.\r\n\r\n### How to Reproduce?\r\n\r\nThe problem is that it only occurs in this specific repository ([CoMPAS SCL Validator](https://github.com/com-pas/compas-scl-validator)) after upgrading from the latest 2.10.x.Final to all version of 2.1.x.Final. \r\n\r\nAnd see the Additional information, there isn't much info to go for.\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\nLinux ubuntu 5.15.0-46-generic #49-Ubuntu SMP Thu Aug 4 18:03:25 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n### Output of `java -version`\r\n\r\nOpenJDK 64-Bit Server VM (build 17.0.4+8-Ubuntu-122.04, mixed mode, sharing)\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n-\r\n\r\n### Quarkus version or git rev\r\n\r\n2.11.3.Final\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nApache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)\r\n\r\n### Additional information\r\n\r\nIn this PR [#98](https://github.com/com-pas/compas-scl-validator/pull/98) of the project I tried some different changes to make it work and investigate if I could figure out what is going wrong.\r\n\r\nWhen starting the application without executing the tests in development mode it stays running at 100% without any output.\r\n```\r\n[INFO] \r\n[INFO] --- quarkus-maven-plugin:2.11.3.Final:dev (default-cli) @ app ---\r\n^C%                                                                                                                                                                                                                                     \r\n```\r\nI needed to cancel the command to stop it.\r\n\r\nWhen setting the log level for test on debug this is the last logging that is shown\r\n```\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"GET /com-pas/*/org/eclipse/jdt/org.eclipse.jdt.annotation/maven-metadata.xml HTTP/1.1[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Cache-control: no-cache[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Pragma: no-cache[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"User-Agent: Apache-Maven/3.8.6 (Java 17.0.4; Linux 5.15.0-46-generic)[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Host: maven.pkg.github.com[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Connection: Keep-Alive[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Accept-Encoding: gzip,deflate[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"Authorization: Basic ZGxhYm9yZHVzOmdocF94SmFwcHZ3aDRYanc1RURwdDE0TUpBZjhkV0cyUHEzejBjTTA=[\\r][\\n]\"\r\n2022-08-30 11:06:21,224 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 >> \"[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"HTTP/1.1 404 Not Found[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"access-control-allow-methods: GET, HEAD, OPTIONS[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Access-Control-Allow-Origin: *[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Content-Security-Policy: default-src 'none';[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Content-Type: text/plain; charset=utf-8[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Server: GitHub Registry[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Strict-Transport-Security: max-age=31536000;[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"X-Content-Type-Options: nosniff[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"X-Frame-Options: DENY[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"X-XSS-Protection: 1; mode=block[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Date: Tue, 30 Aug 2022 09:06:21 GMT[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"Content-Length: 143[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"X-GitHub-Request-Id: A99C:F9C0:62FE6:6950A:630DD30D[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"[\\r][\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.wire] (main) http-outgoing-0 << \"unable to fetch maven-metadata for package : \"maven package \"org.eclipse.jdt.org.eclipse.jdt.annotation\" does not exist under owner \"com-pas\"\"[\\n]\"\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << HTTP/1.1 404 Not Found\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << access-control-allow-methods: GET, HEAD, OPTIONS\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Access-Control-Allow-Origin: *\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Content-Security-Policy: default-src 'none';\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Content-Type: text/plain; charset=utf-8\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Server: GitHub Registry\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Strict-Transport-Security: max-age=31536000;\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << X-Content-Type-Options: nosniff\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << X-Frame-Options: DENY\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << X-XSS-Protection: 1; mode=block\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Date: Tue, 30 Aug 2022 09:06:21 GMT\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << Content-Length: 143\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.headers] (main) http-outgoing-0 << X-GitHub-Request-Id: A99C:F9C0:62FE6:6950A:630DD30D\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.imp.exe.MainClientExec] (main) Connection can be kept alive indefinitely\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.imp.aut.HttpAuthenticator] (main) Authentication succeeded\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.imp.cli.TargetAuthenticationStrategy] (main) Caching 'basic' auth scheme for https://maven.pkg.github.com:443\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.imp.con.PoolingHttpClientConnectionManager] (main) Connection [id: 0][route: {s}->https://maven.pkg.github.com:443] can be kept alive indefinitely\r\n2022-08-30 11:06:21,445 DEBUG [org.apa.htt.imp.con.DefaultManagedHttpClientConnection] (main) http-outgoing-0: set socket timeout to 0\r\n2022-08-30 11:06:21,446 DEBUG [org.apa.htt.imp.con.PoolingHttpClientConnectionManager] (main) Connection released: [id: 0][route: {s}->https://maven.pkg.github.com:443][total available: 2; route allocated: 1 of 20; total allocated: 2 of 40]\r\n2022-08-30 11:06:21,446 DEBUG [org.ecl.aet.int.imp.TrackingFileManager] (main) Writing tracking file /home/dlabordus/.m2/repository/org/eclipse/jdt/org.eclipse.jdt.annotation/resolver-status.properties\r\n2022-08-30 11:06:21,747 DEBUG [org.ecl.aet.int.imp.DefaultRemoteRepositoryManager] (main) Using mirror maven-default-http-blocker (http://0.0.0.0/) for jboss-public-repository-group (http://repository.jboss.org/nexus/content/groups/public/).\r\n2022-08-30 11:06:21,841 DEBUG [org.ecl.aet.int.imp.DefaultRemoteRepositoryManager] (main) Using mirror maven-default-http-blocker (http://0.0.0.0/) for apache.snapshots (http://repository.apache.org/snapshots).\r\n2022-08-30 11:06:21,856 DEBUG [org.ecl.aet.int.imp.DefaultRemoteRepositoryManager] (main) Using mirror maven-default-http-blocker (http://0.0.0.0/) for ow2-snapshot (http://repository.ow2.org/nexus/content/repositories/snapshots).\r\n^C%                                                                                                                                                                                                                                     \r\n```\r\nAnd then the CPU is again at 100% and I need to cancel the command.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27589/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
