{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/26228",
  "id": 1276676251,
  "node_id": "I_kwDOCFbutM5MGIib",
  "number": 26228,
  "title": "Unexpected `INFO` \"exception\" Log is thrown when I am dropping and creating a schema/tables on Oracle",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 11,
  "created_at": "2022-06-20T10:01:04Z",
  "updated_at": "2024-01-22T09:29:23Z",
  "closed_at": "2024-01-22T09:29:22Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nQuarkus: 2.9.2.Final\r\n\r\nWhen a Quarkus application that is using `quarkus-hibernate-orm-panache` extension is dropping and creating an Oracle schema/tables an unexpected `INFO` log is dropped to the console:\r\n\r\n**Note:** Works well in Mysql or Postgresql\r\n\r\n```\r\n11:47:07,875 INFO  [app] 11:47:06,950 GenerationTarget encountered exception accepting command : Error executing DDL \"drop table book cascade constraints\" via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"drop table book cascade constraints\" via JDBC Statement\r\n11:47:07,875 INFO  [app]        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n11:47:07,875 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:387)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:371)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:246)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:156)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:128)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:114)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:157)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85)\r\n11:47:07,878 INFO  [app]        at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:335)\r\n11:47:07,878 INFO  [app]        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:74)\r\n11:47:07,878 INFO  [app]        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:71)\r\n11:47:07,878 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n11:47:07,879 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n11:47:07,879 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n11:47:07,879 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n11:47:07,879 INFO  [app]        at java.base/java.lang.Thread.run(Thread.java:829)\r\n11:47:07,880 INFO  [app] Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n\r\n```\r\n\r\nIn my opinion, the table `book` should not be removed if doesn't exist, or at least don't print an \"error\" stacktrace on the console. \r\n\r\napplication.properties\r\n\r\n```\r\nquarkus.datasource.db-kind=oracle\r\nquarkus.hibernate-orm.sql-load-script=import.sql\r\nquarkus.hibernate-orm.database.generation=drop-and-create\r\n```\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\nNo `INFO` error is logged. Same behavior as other datasources as postgresql\r\n\r\n### Actual behavior\r\n\r\nThe following `INFO` is logged on the console:\r\n\r\n```\r\n11:47:07,873 INFO  [app] __  ____  __  _____   ___  __ ____  ______ \r\n11:47:07,874 INFO  [app]  --/ __ \\/ / / / _ | / _ \\/ //_/ / / / __/ \r\n11:47:07,874 INFO  [app]  -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\\ \\   \r\n11:47:07,875 INFO  [app] --\\___\\_\\____/_/ |_/_/|_/_/|_|\\____/___/   \r\n11:47:07,875 INFO  [app] 11:47:06,950 GenerationTarget encountered exception accepting command : Error executing DDL \"drop table book cascade constraints\" via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"drop table book cascade constraints\" via JDBC Statement\r\n11:47:07,875 INFO  [app]        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n11:47:07,875 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:387)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:371)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:246)\r\n11:47:07,876 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:156)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:128)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:114)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:157)\r\n11:47:07,877 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85)\r\n11:47:07,878 INFO  [app]        at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:335)\r\n11:47:07,878 INFO  [app]        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:74)\r\n11:47:07,878 INFO  [app]        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:71)\r\n11:47:07,878 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n11:47:07,879 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n11:47:07,879 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n11:47:07,879 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n11:47:07,879 INFO  [app]        at java.base/java.lang.Thread.run(Thread.java:829)\r\n11:47:07,880 INFO  [app] Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n11:47:07,880 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:630)\r\n11:47:07,881 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:564)\r\n11:47:07,881 INFO  [app]        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1231)\r\n11:47:07,881 INFO  [app]        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:772)\r\n11:47:07,881 INFO  [app]        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:299)\r\n11:47:07,882 INFO  [app]        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:512)\r\n11:47:07,882 INFO  [app]        at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:123)\r\n11:47:07,882 INFO  [app]        at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1200)\r\n11:47:07,882 INFO  [app]        at oracle.jdbc.driver.OracleStatement.executeSQLStatement(OracleStatement.java:1820)\r\n11:47:07,882 INFO  [app]        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1472)\r\n11:47:07,883 INFO  [app]        at oracle.jdbc.driver.OracleStatement.executeInternal(OracleStatement.java:2505)\r\n11:47:07,883 INFO  [app]        at oracle.jdbc.driver.OracleStatement.execute(OracleStatement.java:2460)\r\n11:47:07,883 INFO  [app]        at oracle.jdbc.driver.OracleStatementWrapper.execute(OracleStatementWrapper.java:328)\r\n11:47:07,883 INFO  [app]        at io.agroal.pool.wrapper.StatementWrapper.execute(StatementWrapper.java:235)\r\n11:47:07,884 INFO  [app]        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n11:47:07,884 INFO  [app]        ... 16 more\r\n11:47:07,884 INFO  [app] Caused by: Error : 942, Position : 11, Sql = drop table book cascade constraints, OriginalSql = drop table book cascade constraints, Error Msg = ORA-00942: table or view does not exist\r\n11:47:07,884 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:637)\r\n11:47:07,884 INFO  [app]        ... 30 more\r\n11:47:07,885 INFO  [app] 11:47:06,967 GenerationTarget encountered exception accepting command : Error executing DDL \"drop sequence hibernate_sequence\" via JDBC Statement: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"drop sequence hibernate_sequence\" via JDBC Statement\r\n11:47:07,885 INFO  [app]        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n11:47:07,885 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:387)\r\n11:47:07,885 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:371)\r\n11:47:07,885 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:256)\r\n11:47:07,886 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:156)\r\n11:47:07,886 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:128)\r\n11:47:07,886 INFO  [app]        at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:114)\r\n11:47:07,886 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:157)\r\n11:47:07,887 INFO  [app]        at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85)\r\n11:47:07,887 INFO  [app]        at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:335)\r\n11:47:07,887 INFO  [app]        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:74)\r\n11:47:07,887 INFO  [app]        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:71)\r\n11:47:07,887 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n11:47:07,888 INFO  [app]        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n11:47:07,888 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n11:47:07,888 INFO  [app]        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n11:47:07,888 INFO  [app]        at java.base/java.lang.Thread.run(Thread.java:829)\r\n11:47:07,888 INFO  [app] Caused by: java.sql.SQLSyntaxErrorException: ORA-02289: sequence does not exist\r\n11:47:07,889 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:630)\r\n11:47:07,889 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:564)\r\n11:47:07,889 INFO  [app]        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1231)\r\n11:47:07,889 INFO  [app]        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:772)\r\n11:47:07,889 INFO  [app]        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:299)\r\n11:47:07,890 INFO  [app]        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:512)\r\n11:47:07,892 INFO  [app]        at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:123)\r\n11:47:07,892 INFO  [app]        at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1200)\r\n11:47:07,892 INFO  [app]        at oracle.jdbc.driver.OracleStatement.executeSQLStatement(OracleStatement.java:1820)\r\n11:47:07,893 INFO  [app]        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1472)\r\n11:47:07,893 INFO  [app]        at oracle.jdbc.driver.OracleStatement.executeInternal(OracleStatement.java:2505)\r\n11:47:07,893 INFO  [app]        at oracle.jdbc.driver.OracleStatement.execute(OracleStatement.java:2460)\r\n11:47:07,893 INFO  [app]        at oracle.jdbc.driver.OracleStatementWrapper.execute(OracleStatementWrapper.java:328)\r\n11:47:07,894 INFO  [app]        at io.agroal.pool.wrapper.StatementWrapper.execute(StatementWrapper.java:235)\r\n11:47:07,895 INFO  [app]        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n11:47:07,896 INFO  [app]        ... 16 more\r\n11:47:07,896 INFO  [app] Caused by: Error : 2289, Position : 14, Sql = drop sequence hibernate_sequence, OriginalSql = drop sequence hibernate_sequence, Error Msg = ORA-02289: sequence does not exist\r\n11:47:07,897 INFO  [app]        at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:637)\r\n11:47:07,897 INFO  [app]        ... 30 more\r\n\r\n```\r\n\r\n### How to Reproduce?\r\n\r\n1. `git clone --branch feat/oracle_example  git@github.com:pjgg/quarkus-test-framework-1.git`\r\n2. `mvn clean verify -Dexamples -pl examples/database-oracle -Dit.test=OracleDatabaseIT -Dts.app.log.enable=true`\r\n\r\n\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk 11.0.14 2022-01-18 OpenJDK Runtime Environment Temurin-11.0.14+9 (build 11.0.14+9) OpenJDK 64-Bit Server VM Temurin-11.0.14+9 (build 11.0.14+9, mixed mode)\r\n\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26228/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
