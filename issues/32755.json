{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/32755",
  "id": 1674543254,
  "node_id": "I_kwDOCFbutM5jz4CW",
  "number": 32755,
  "title": "[Quarkus 3.0.0.CR2] [quarkus-mailer] NullPointerException when sending with MailTemplateInstance",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2955096556,
      "node_id": "MDU6TGFiZWwyOTU1MDk2NTU2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/mailer",
      "name": "area/mailer",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/246",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/246",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/246/labels",
    "id": 9296662,
    "node_id": "MI_kwDOCFbutM4AjdsW",
    "number": 246,
    "title": "3.0.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 115,
    "state": "closed",
    "created_at": "2023-04-18T08:50:05Z",
    "updated_at": "2023-05-15T14:00:32Z",
    "due_on": null,
    "closed_at": "2023-04-26T09:04:58Z"
  },
  "comments": 5,
  "created_at": "2023-04-19T09:37:01Z",
  "updated_at": "2023-04-25T04:43:19Z",
  "closed_at": "2023-04-19T13:35:55Z",
  "active_lock_reason": null,
  "body": "### Description\r\nHello,\r\nwhen sending an email with:\r\n\r\n     @CheckedTemplate\r\n     static class Templates {\r\n         public static native MailTemplate.MailTemplateInstance mailTemplate(String something);\r\n     }\r\n\r\nvia\r\n\r\n`Templates.mailTemplate(\"This is an email\").to(\"test@email.org\").subject(\"Something happened\").send()`\r\n\r\nin a Resteasy Reactive resource I get a NullPointerException. It seems that no mailer gets injected.\r\n\r\n### Stacktrace\r\n\r\n    java.lang.NullPointerException: Cannot invoke \"io.quarkus.mailer.reactive.ReactiveMailer.send(io.quarkus.mailer.Mail[])\" because \"this.this$0.mailer\" is null\r\n\t    at io.smallrye.mutiny.groups.UniOnFailure.lambda$call$3(UniOnFailure.java:108)\r\n\t    at io.smallrye.context.impl.wrappers.SlowContextualFunction.apply(SlowContextualFunction.java:21)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnFailureTransform$UniOnFailureTransformProcessor.onFailure(UniOnFailureTransform.java:54)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:67)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:67)\r\n\t    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownFailure$KnownFailureSubscription.forward(UniCreateFromKnownFailure.java:38)\r\n\t    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownFailure.subscribe(UniCreateFromKnownFailure.java:23)\r\n\t    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onItem(UniOnItemOrFailureFlatMap.java:54)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:60)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:60)\r\n\t    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onItem(UniOperatorProcessor.java:47)\r\n\t    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:63)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\t    at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\r\n\t    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:131)\r\n\t    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.lambda$unroll$0(AsyncTrampoline.java:126)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\t    at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\n\t    at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\r\n\t    at io.vertx.core.Future.lambda$toCompletionStage$3(Future.java:384)\r\n\t    at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)\r\n\t    at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60)\r\n\t    at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:211)\r\n\t    at io.vertx.core.impl.future.PromiseImpl.tryComplete(PromiseImpl.java:23)\r\n\t    at io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:100)\r\n\t    at io.vertx.sqlclient.impl.QueryResultBuilder.tryComplete(QueryResultBuilder.java:34)\r\n\r\nI am working in a reactive environment with following extensions:\r\n\r\n### Environment\r\n\r\n      dependencies {\r\n          implementation(enforcedPlatform(\"${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}\"))\r\n          implementation(\"io.quarkus:quarkus-hibernate-reactive-panache\")\r\n          implementation(\"io.quarkus:quarkus-resteasy-reactive-jackson\")\r\n          implementation(\"io.smallrye.reactive:smallrye-mutiny-vertx-web-client\")\r\n          implementation(\"io.quarkus:quarkus-reactive-mysql-client\")\r\n          implementation(\"io.quarkus:quarkus-hibernate-validator\")\r\n          implementation(\"io.quarkus:quarkus-smallrye-openapi\")\r\n          implementation(\"io.quarkus:quarkus-config-yaml\")\r\n          implementation(\"io.quarkus:quarkus-scheduler\")\r\n          implementation(\"io.quarkus:quarkus-qute\")\r\n          implementation(\"io.quarkus:quarkus-mailer\")\r\n          implementation(\"io.quarkus:quarkus-arc\")\r\n          testImplementation(\"io.quarkus:quarkus-junit5\")\r\n          testImplementation(\"io.rest-assured:rest-assured\")\r\n      }\r\n\r\n    #Gradle properties\r\n    #Tue Apr 18 20:56:58 CEST 2023\r\n    quarkusPluginVersion=3.0.0.CR2\r\n    quarkusPlatformArtifactId=quarkus-bom\r\n    quarkusPluginId=io.quarkus\r\n    quarkusPlatformGroupId=io.quarkus.platform\r\n    quarkusPlatformVersion=3.0.0.CR2\r\n\r\nAs a workaround I need to Inject an unused instance of ReactiveMailer to be able to send an email.\r\n\r\n    @Inject\r\n    ReactiveMailer reactiveMailer;\r\n\r\nUsing the bare reactiveMailer works, too.\r\n\r\nIf you need further information please tell me.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32755/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
