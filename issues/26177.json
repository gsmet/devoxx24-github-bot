{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/26177",
  "id": 1273421150,
  "node_id": "I_kwDOCFbutM5L5t1e",
  "number": 26177,
  "title": "No automatic drop-and-create of schema when using dev services in (native) integration tests",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2955097667,
      "node_id": "MDU6TGFiZWwyOTU1MDk3NjY3",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/devservices",
      "name": "area/devservices",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/189",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/189",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/189/labels",
    "id": 8065991,
    "node_id": "MI_kwDOCFbutM4AexPH",
    "number": 189,
    "title": "2.11.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 244,
    "state": "closed",
    "created_at": "2022-06-09T10:38:20Z",
    "updated_at": "2023-01-13T10:47:01Z",
    "due_on": null,
    "closed_at": "2022-07-13T14:14:46Z"
  },
  "comments": 2,
  "created_at": "2022-06-16T11:17:31Z",
  "updated_at": "2022-06-21T10:47:45Z",
  "closed_at": "2022-06-21T10:47:40Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWhen running integration tests (application running in native mode), dev services are enabled as expected, in exactly the same way as when running \"unit\" tests (application running in JVM mode).\r\n\r\nHowever, some configuration related to dev services are *not* the same. In particular, database generation is not automatically set to `drop-and-create` as would be the case when running tests in JVM mode.\r\n\r\n\r\nWe never noticed the problem because tests and the quickstart generally set database generation explicitly:\r\n\r\n```\r\nquarkus.hibernate-orm.database.generation=drop-and-create\r\n```\n\n### Expected behavior\n\n`quarkus.hibernate-orm.database.generation` should default to `drop-and-create` when running (native) integration tests with dev services enabled.\n\n### Actual behavior\n\n`quarkus.hibernate-orm.database.generation` defaults to `none` when running (native) integration tests with dev services enabled.\n\n### How to Reproduce?\n\n_No response_\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\nI suspect there are specific mechanics in `@QuarkusIntegrationTest` to launch dev services even though no such build items were produced during the native (prod) build. We should look into that.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/26177/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
