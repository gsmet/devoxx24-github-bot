{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/32449",
  "id": 1656222030,
  "node_id": "I_kwDOCFbutM5it_FO",
  "number": 32449,
  "title": "Multitenancy OIDC permit tenant enumeration",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1479557456,
      "node_id": "MDU6TGFiZWwxNDc5NTU3NDU2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/oidc",
      "name": "area/oidc",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/247",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/247",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/247/labels",
    "id": 9298241,
    "node_id": "MI_kwDOCFbutM4AjeFB",
    "number": 247,
    "title": "2.16.7.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 36,
    "state": "closed",
    "created_at": "2023-04-18T14:29:46Z",
    "updated_at": "2023-05-09T09:51:44Z",
    "due_on": null,
    "closed_at": "2023-05-05T07:43:07Z"
  },
  "comments": 6,
  "created_at": "2023-04-05T20:11:35Z",
  "updated_at": "2023-04-18T14:34:18Z",
  "closed_at": "2023-04-06T22:25:28Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWe have a multi tenant application which programmatically choose the tenant based in the URL path.  However, unauthorized users are able to find out tenant names because if the OIDC server is down (not exists in this case) it return a 500 error messag. But if OIDC server exists it will return a 401.   \n\n### Expected behavior\n\nTo avoid tenant enumeration both requests should return the same status code (401 or 404). \n\n### Actual behavior\n\nThe framework return 500 if server is down (or not exits) \n\n### How to Reproduce?\n\n1. Create a project with OIDC and Keycloak as dev service.\r\n2. Configure a multi tenant architecture to [resolve tenant in URL path](https://quarkus.io/guides/security-openid-connect-multitenancy#tenant-config-resolver). \r\n3. Try to access a nonexistence tenant with any credentials, it will return 500 \r\n4. Try to access a existence tenant with any credentials, it will return 401\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\nI tried to workaround the issue by using exception mapper but it not worked. (Method was not called) ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32449/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
