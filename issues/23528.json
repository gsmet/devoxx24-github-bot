{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23528",
  "id": 1127771008,
  "node_id": "I_kwDOCFbutM5DOGuA",
  "number": 23528,
  "title": "Allow `@QuarkusTest` and `@QuarkusIntegrationTest` to coexist in same test suite",
  "labels": [
    {
      "id": 985346622,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjI=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/enhancement",
      "name": "kind/enhancement",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1375177076,
      "node_id": "MDU6TGFiZWwxMzc1MTc3MDc2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/testing",
      "name": "area/testing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/171",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/171",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/171/labels",
    "id": 7587967,
    "node_id": "MI_kwDOCFbutM4Ac8h_",
    "number": 171,
    "title": "2.8.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 371,
    "state": "closed",
    "created_at": "2022-01-19T09:05:12Z",
    "updated_at": "2023-02-21T15:11:02Z",
    "due_on": null,
    "closed_at": "2022-03-23T12:37:30Z"
  },
  "comments": 34,
  "created_at": "2022-02-08T21:21:36Z",
  "updated_at": "2022-03-09T03:53:49Z",
  "closed_at": "2022-03-08T09:42:46Z",
  "active_lock_reason": null,
  "body": "### Description\n\nI am running across some major hurtles with `@QuarkusTest` vs `QuarkusIntegrationTest`. Essentially, it makes sense to me as a developer that I would want to run both in the same `test*` command, and for the test codebase to comingle.\r\n\r\nWhat I want to accomplish with this:\r\n\r\n - have the same tests for both native and non-native mode (possible in Maven, but not Gradle?)\r\n - simplify test writing, running, and configuration; nothing special for integration tests\r\n - potentially simplify Jacoco coverage? (Haven't looked into it, but I might think the extra config typically required for coverage of integration tests would be resolved with these proposed changes)\r\n\r\n\r\nCurrently though it seems that due to how the app is packaged for the different types of test, this is not currently supported and requires multiple code bases and different commands to be used to run them.\r\n\r\nIn Gradle, this seems to be the purpose of the `native-test` source set at the core, and in Maven an amount of pom configuration.\r\n\r\nI suggest that we support a homogeneous codebase and command for running both `@QuarkuTest` and `@QuarkusIntegrationTest` tests. This would drastically simplify test creation and required configuration. If one wanted to have additional source-sets for Gradle runs it should still be possible, but one could also just run the same source set of `test` in native mode, and have the same tests available for jar integration testing.\r\n\r\nI also realize I could be missing something and a reasonable solution might exist but I am not seeing it.\n\n### Implementation ideas\n\nWe already have the ability to segment/ order tests by profiles and test resources; if we added the ability to order based on the two test annotations, we can separate the required runtime contexts and ensure they can run in the same suite/ run. It is possible I have a naive view of how the tests execution/ordering is handled, but I believe this is possible based on a couple of assumptions:\r\n\r\n- we can carefully order the tests\r\n- we have an amount of control of the running instance of quarkus used for each test\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23528/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
