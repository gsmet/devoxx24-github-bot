{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/22723",
  "id": 1096220521,
  "node_id": "I_kwDOCFbutM5BVv9p",
  "number": 22723,
  "title": "quarkus setup fails with error \"quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source thus not running it automatically.\"",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    },
    {
      "id": 2313298528,
      "node_id": "MDU6TGFiZWwyMzEzMjk4NTI4",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/cli",
      "name": "area/cli",
      "color": "0366d6",
      "default": false,
      "description": "Related to quarkus cli (not maven/gradle/etc.)"
    },
    {
      "id": 2323889171,
      "node_id": "MDU6TGFiZWwyMzIzODg5MTcx",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/jbang",
      "name": "area/jbang",
      "color": "0052cc",
      "default": false,
      "description": "Issues related to when using jbang.dev with Quarkus"
    }
  ],
  "state": "open",
  "locked": false,
  "milestone": null,
  "comments": 14,
  "created_at": "2022-01-07T11:10:50Z",
  "updated_at": "2022-01-24T10:30:25Z",
  "closed_at": null,
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nThe Quarkus install fails and states that I am prompted to choose a 0/1 option but there is no prompt at all !\r\n\r\n```console\r\n[jbang] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source thus not running it automatically.\r\n\r\nIf you trust the url to be safe to run you can do one of the following:\r\n0) Trust once: Add no trust, just run this time\r\n1) Trust limited url in future:\r\n    jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\r\n\r\nAny other response will result in exit.\r\n\r\n[jbang] Type in your choice (0 or 1) and hit enter. Times out after 10 seconds.\r\n[jbang] [ERROR] Could not parse answer as a number. Aborting\r\n[jbang] [ERROR] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source and user did not confirm trust thus aborting.    \r\n```\r\n    \r\n   \n\n### Expected behavior\n\nsetup should run sucessfully as described at [https://quarkus.io/get-started/](https://quarkus.io/get-started/)\n\n### Actual behavior\n\nthe Quarkus setup through jbang fails\n\n### How to Reproduce?\n\nReproducer repo : [https://github.com/ezYakaEagle442/azure-java-quarkus/blob/main/tools.md](https://github.com/ezYakaEagle442/azure-java-quarkus/blob/main/tools.md)\r\n\r\nsteps : \r\n\r\n1. Install java\r\n```sh\r\nwget https://aka.ms/download-jdk/microsoft-jdk-11.0.13.8.1-linux-x64.tar.gz\r\ntar -xvf microsoft-jdk-11.0.13.8.1-linux-x64.tar.gz\r\n\r\nvim .profile\r\nJAVA_HOME=\"$HOME/jdk-11.0.13+8\"\r\nPATH=\"$JAVA_HOME/bin:$PATH\"\r\n\r\n. .profile\r\n\r\njava -version\r\nwhereis java\r\nwhich java\r\n\r\n```\r\n\r\n2. Quarkus setup\r\n```sh\r\ncurl -Ls https://sh.jbang.dev | bash -s - app install --fresh --force quarkus@quarkusio\r\nquarkus@quarkusio\r\n```\r\nYou get the here under error : \r\n```console\r\n[jbang] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source thus not running it automatically.\r\n\r\nIf you trust the url to be safe to run you can do one of the following:\r\n0) Trust once: Add no trust, just run this time\r\n1) Trust limited url in future:\r\n    jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\r\n\r\n\r\nAny other response will result in exit.\r\n\r\n[jbang] Type in your choice (0 or 1) and hit enter. Times out after 10 seconds.\r\n[jbang] [ERROR] Could not parse answer as a number. Aborting\r\n[jbang] [ERROR] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source and user did not confirm trust thus aborting.\r\nIf you trust the url to be safe to run are here a few suggestions:\r\nLimited trust:\r\n     jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\r\nTrust all subdomains:\r\n    jbang trust add *.repo1.maven.org\r\nTrust all sources (WARNING! disables url protection):\r\n    jbang trust add *\r\n\r\nFor more control edit ~/.jbang/trusted-sources.json\r\n```\r\n\r\n3. Try to add certificates to trust Maven web site certificate\r\n```sh\r\n# jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli\r\n# https://github.com/microsoft/WSL/issues/3161\r\n# https://www.pmichaels.net/2020/12/29/add-certificate-into-wsl/\r\n\r\n# export certificate from https://repo1.maven.org\r\necho -n | openssl s_client -showcerts -connect repo1.maven.org:443 -servername repo1.maven.org \\\r\n    | openssl x509 > /tmp/repo1.maven.org.cert\r\n\r\nopenssl x509 -in /tmp/repo1.maven.org.cert -text -noout\r\n\r\ncp /tmp/repo1.maven.org.cert /usr/local/share/ca-certificates\r\nsudo update-ca-certificates\r\n# If it works, your certificate will be here below :\r\nll /etc/ssl/certs\r\n```\r\nHit the same error message\r\n\r\n4. Try with --verbose option :\r\n\r\n```sh\r\ncurl -Ls https://sh.jbang.dev --verbose | bash -s - app install --fresh --force quarkus@quarkusio\r\nquarkus@quarkusio\r\n```\r\n\r\n```console\r\n@quarkusio*   Trying 104.26.10.211:443...\r\n* TCP_NODELAY set\r\n* Connected to sh.jbang.dev (104.26.10.211) port 443 (#0)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\r\n  CApath: /etc/ssl/certs\r\n} [5 bytes data]\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n} [512 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n{ [122 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n{ [19 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n{ [2330 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n{ [80 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n{ [52 bytes data]\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n} [1 bytes data]\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n} [52 bytes data]\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN, server accepted to use h2\r\n* Server certificate:\r\n*  subject: C=US; ST=California; L=San Francisco; O=Cloudflare, Inc.; CN=sni.cloudflaressl.com\r\n*  start date: Sep  6 00:00:00 2021 GMT\r\n*  expire date: Sep  5 23:59:59 2022 GMT\r\n*  subjectAltName: host \"sh.jbang.dev\" matched cert's \"*.jbang.dev\"\r\n*  issuer: C=US; O=Cloudflare, Inc.; CN=Cloudflare Inc ECC CA-3\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multi-use\r\n* Connection state changed (HTTP/2 confirmed)\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n} [5 bytes data]\r\n* Using Stream ID: 1 (easy handle 0x55744517a880)\r\n} [5 bytes data]\r\n> GET / HTTP/2\r\n> Host: sh.jbang.dev\r\n> user-agent: curl/7.68.0\r\n> accept: */*\r\n>\r\n{ [5 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n{ [230 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n{ [230 bytes data]\r\n* old SSL session ID is stale, removing\r\n{ [5 bytes data]\r\n* Connection state changed (MAX_CONCURRENT_STREAMS == 256)!\r\n} [5 bytes data]\r\n< HTTP/2 302\r\n< date: Fri, 07 Jan 2022 11:00:41 GMT\r\n< location: https://raw.githubusercontent.com/jbangdev/jbang/master/src/main/scripts/jbang\r\n< cf-ray: 6c9caf0e0ba63aab-CDG\r\n< cache-control: private, max-age=0, no-store, no-cache, must-revalidate, post-check=0, pre-check=0\r\n< expires: Thu, 01 Jan 1970 00:00:01 GMT\r\n< vary: Accept-Encoding\r\n< expect-ct: max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"\r\n< report-to: {\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v3?s=m3ESkRjHgsl%2FwRjDhdD84mCBn6Yc3Eo6%2BY5tdzpUUsX2KCuBAbRqg3OStHBw5OQpGKRs0E75tTmKhHw1ciGHCSQFiRoHI8aY7nc75EjOH09rsQsJKCmR1rKiF3oqNQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\r\n< nel: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\r\n< server: cloudflare\r\n<\r\n{ [0 bytes data]\r\n* Connection #0 to host sh.jbang.dev left intact\r\n* Issue another request to this URL: 'https://raw.githubusercontent.com/jbangdev/jbang/master/src/main/scripts/jbang'\r\n*   Trying 185.199.109.133:443...\r\n* TCP_NODELAY set\r\n* Connected to raw.githubusercontent.com (185.199.109.133) port 443 (#1)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\r\n  CApath: /etc/ssl/certs\r\n} [5 bytes data]\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n} [512 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n{ [122 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n{ [19 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n{ [3067 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n{ [264 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n{ [52 bytes data]\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n} [1 bytes data]\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n} [52 bytes data]\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN, server accepted to use h2\r\n* Server certificate:\r\n*  subject: C=US; ST=California; L=San Francisco; O=GitHub, Inc.; CN=www.github.com\r\n*  start date: May  6 00:00:00 2020 GMT\r\n*  expire date: Apr 14 12:00:00 2022 GMT\r\n*  subjectAltName: host \"raw.githubusercontent.com\" matched cert's \"*.githubusercontent.com\"\r\n*  issuer: C=US; O=DigiCert Inc; OU=www.digicert.com; CN=DigiCert SHA2 High Assurance Server CA\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multi-use\r\n* Connection state changed (HTTP/2 confirmed)\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n} [5 bytes data]\r\n* Using Stream ID: 1 (easy handle 0x55744517a880)\r\n} [5 bytes data]\r\n> GET /jbangdev/jbang/master/src/main/scripts/jbang HTTP/2\r\n> Host: raw.githubusercontent.com\r\n> user-agent: curl/7.68.0\r\n> accept: */*\r\n>\r\n{ [5 bytes data]\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n{ [193 bytes data]\r\n* Connection state changed (MAX_CONCURRENT_STREAMS == 100)!\r\n} [5 bytes data]\r\n< HTTP/2 200\r\n< cache-control: max-age=300\r\n< content-security-policy: default-src 'none'; style-src 'unsafe-inline'; sandbox\r\n< content-type: text/plain; charset=utf-8\r\n< etag: \"5592c5aa9cda499f474996ceabf7d569d5f83ea9c2961ce0c6f2b85f0d0542e2\"\r\n< strict-transport-security: max-age=31536000\r\n< x-content-type-options: nosniff\r\n< x-frame-options: deny\r\n< x-xss-protection: 1; mode=block\r\n< x-github-request-id: 6CE6:3FA0:2716AB:2A60AB:61D7FCE4\r\n< accept-ranges: bytes\r\n< date: Fri, 07 Jan 2022 11:00:41 GMT\r\n< via: 1.1 varnish\r\n< x-served-by: cache-cdg20741-CDG\r\n< x-cache: HIT\r\n< x-cache-hits: 1\r\n< x-timer: S1641553242.596507,VS0,VE1\r\n< vary: Authorization,Accept-Encoding,Origin\r\n< access-control-allow-origin: *\r\n< x-fastly-request-id: e7462a1ef94f02117a839c33aef5223b81e9809c\r\n< expires: Fri, 07 Jan 2022 11:05:41 GMT\r\n< source-age: 114\r\n< content-length: 6302\r\n<\r\n{ [504 bytes data]\r\n* Connection #1 to host raw.githubusercontent.com left intact\r\n[jbang] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source thus not running it automatically.\r\n\r\nIf you trust the url to be safe to run you can do one of the following:\r\n0) Trust once: Add no trust, just run this time\r\n1) Trust limited url in future:\r\n    jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\r\n\r\n\r\nAny other response will result in exit.\r\n\r\n[jbang] Type in your choice (0 or 1) and hit enter. Times out after 10 seconds.\r\n[jbang] [ERROR] Could not parse answer as a number. Aborting\r\n[jbang] [ERROR] https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/2.6.1.Final/quarkus-cli-2.6.1.Final-runner.jar is not from a trusted source and user did not confirm trust thus aborting.\r\nIf you trust the url to be safe to run are here a few suggestions:\r\nLimited trust:\r\n     jbang trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/\r\nTrust all subdomains:\r\n    jbang trust add *.repo1.maven.org\r\nTrust all sources (WARNING! disables url protection):\r\n    jbang trust add *\r\n\r\nFor more control edit ~/.jbang/trusted-sources.json\r\n\r\n[jbang] Run with --verbose for more details\r\n```\n\n### Output of `uname -a` or `ver`\n\nLinux MININT-279OPT8 5.10.60.1-microsoft-standard-WSL2 #1 SMP Wed Aug 25 23:20:18 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n\n### Output of `java -version`\n\nopenjdk version \"11.0.13\" 2021-10-19 LTS OpenJDK Runtime Environment Microsoft-27990 (build 11.0.13+8-LTS) OpenJDK 64-Bit Server VM Microsoft-27990 (build 11.0.13+8-LTS, mixed mode)\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537) Maven home: /mnt/c/ProgramData/chocolatey/lib/maven/apache-maven-3.8.4 Java version: 11.0.13, vendor: Microsoft, runtime: /home/pinpin/jdk-11.0.13+8 Default locale: en, platform encoding: UTF-8 OS name: \"linux\", version: \"5.10.60.1-microsoft-standard-wsl2\", arch: \"amd64\", family: \"unix\"\n\n### Additional information\n\nI run WSL2/Ubuntu 20.04 on Windows 11\r\n\r\nI have found related issues at : \r\n\r\n- [https://github.com/jbangdev/jbang-action/issues/4](https://github.com/jbangdev/jbang-action/issues/4)\r\n- [https://www.jbang.dev/documentation/guide/latest/usage.html](https://www.jbang.dev/documentation/guide/latest/usage.html)",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22723/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
