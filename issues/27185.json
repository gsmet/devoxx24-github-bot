{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27185",
  "id": 1331986390,
  "node_id": "I_kwDOCFbutM5PZH_W",
  "number": 27185,
  "title": "quarkus.http.host property initialization exception during build time, started from Qarkus 2.10.1+ ",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273030910,
      "node_id": "MDU6TGFiZWwxMjczMDMwOTEw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/config",
      "name": "area/config",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/204",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/204",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/204/labels",
    "id": 8384152,
    "node_id": "MI_kwDOCFbutM4Af-6Y",
    "number": 204,
    "title": "2.12.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 77,
    "state": "closed",
    "created_at": "2022-09-05T19:04:15Z",
    "updated_at": "2022-09-13T05:31:24Z",
    "due_on": null,
    "closed_at": "2022-09-07T11:32:02Z"
  },
  "comments": 4,
  "created_at": "2022-08-08T14:48:57Z",
  "updated_at": "2022-09-06T18:48:24Z",
  "closed_at": "2022-09-04T23:17:37Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nHi guys!\r\nI believe something is changed in the build process in Quarkus 2.10.x+ for \"quarkus.http.host\" property initialization process.\r\nRight now, it's necessary to have it during container build time, which doesn't look correct because the build system host may differ from the app's host.\r\nIn our project, it works as ENV variable from a container:\r\n\r\n`quarkus.http.host: ${HOST}`\r\n\r\nand it worked perfectly fine up to 2.9.2 version, but today I checked all versions from 2.10.1 to 2.11.2, and the build process failed with the following exception:\r\n\r\n```posh\r\n2022-08-08T14:35:22.6914579Z #15 126.2 * What went wrong:\r\n2022-08-08T14:35:22.6916064Z #15 126.2 Execution failed for task ':some-service:quarkusBuild'.\r\n2022-08-08T14:35:22.6916697Z #15 126.2 > io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n2022-08-08T14:35:22.8415007Z #15 126.2   \t[error]: Build step io.quarkus.smallrye.openapi.deployment.SmallRyeOpenApiProcessor#build threw an exception: java.util.NoSuchElementException: SRCFG00011: Could not expand value HOST in property quarkus.http.host\r\n2022-08-08T14:35:22.8417268Z #15 126.2   \tat io.smallrye.config.ExpressionConfigSourceInterceptor$1.accept(ExpressionConfigSourceInterceptor.java:68)\r\n2022-08-08T14:35:22.8418927Z #15 126.2   \tat io.smallrye.config.ExpressionConfigSourceInterceptor$1.accept(ExpressionConfigSourceInterceptor.java:58)\r\n2022-08-08T14:35:22.8420391Z #15 126.2   \tat io.smallrye.common.expression.ExpressionNode.emit(ExpressionNode.java:22)\r\n2022-08-08T14:35:22.8421680Z #15 126.2   \tat io.smallrye.common.expression.Expression.evaluateException(Expression.java:56)\r\n2022-08-08T14:35:22.8422955Z #15 126.2   \tat io.smallrye.common.expression.Expression.evaluate(Expression.java:70)\r\n2022-08-08T14:35:22.8424310Z #15 126.2   \tat io.smallrye.config.ExpressionConfigSourceInterceptor.getValue(ExpressionConfigSourceInterceptor.java:58)\r\n2022-08-08T14:35:22.8425850Z #15 126.2   \tat io.smallrye.config.ExpressionConfigSourceInterceptor.getValue(ExpressionConfigSourceInterceptor.java:38)\r\n2022-08-08T14:35:22.8427426Z #15 126.2   \tat io.smallrye.config.SmallRyeConfigSourceInterceptorContext.proceed(SmallRyeConfigSourceInterceptorContext.java:20)\r\n2022-08-08T14:35:22.8428995Z #15 126.2   \tat io.smallrye.config.FallbackConfigSourceInterceptor.getValue(FallbackConfigSourceInterceptor.java:24)\r\n2022-08-08T14:35:22.8430624Z #15 126.2   \tat io.smallrye.config.SmallRyeConfigSourceInterceptorContext.proceed(SmallRyeConfigSourceInterceptorContext.java:20)\r\n2022-08-08T14:35:22.8432169Z #15 126.2   \tat io.smallrye.config.FallbackConfigSourceInterceptor.getValue(FallbackConfigSourceInterceptor.java:24)\r\n2022-08-08T14:35:22.8434393Z #15 126.2   \tat io.smallrye.config.SmallRyeConfigSourceInterceptorContext.proceed(SmallRyeConfigSourceInterceptorContext.java:20)\r\n2022-08-08T14:35:22.8436036Z #15 126.2   \tat io.smallrye.config.PropertyNamesConfigSourceInterceptor.getValue(PropertyNamesConfigSourceInterceptor.java:17)\r\n2022-08-08T14:35:22.8437654Z #15 126.2   \tat io.smallrye.config.SmallRyeConfigSourceInterceptorContext.proceed(SmallRyeConfigSourceInterceptorContext.java:20)\r\n2022-08-08T14:35:22.8439137Z #15 126.2   \tat io.smallrye.config.SmallRyeConfig.getConfigValue(SmallRyeConfig.java:307)\r\n2022-08-08T14:35:22.8440428Z #15 126.2   \tat io.smallrye.config.SmallRyeConfig.getValue(SmallRyeConfig.java:225)\r\n2022-08-08T14:35:22.8441639Z #15 126.2   \tat io.smallrye.config.SmallRyeConfig.getOptionalValue(SmallRyeConfig.java:324)\r\n2022-08-08T14:35:22.8443617Z #15 126.2   \tat io.quarkus.smallrye.openapi.deployment.SmallRyeOpenApiProcessor.getAutoServerFilter(SmallRyeOpenApiProcessor.java:455)\r\n2022-08-08T14:35:22.8446409Z #15 126.2   \tat io.quarkus.smallrye.openapi.deployment.SmallRyeOpenApiProcessor.storeDocument(SmallRyeOpenApiProcessor.java:1024)\r\n2022-08-08T14:35:22.8448037Z #15 126.2   \tat io.quarkus.smallrye.openapi.deployment.SmallRyeOpenApiProcessor.storeDocument(SmallRyeOpenApiProcessor.java:1004)\r\n2022-08-08T14:35:22.8449599Z #15 126.2   \tat io.quarkus.smallrye.openapi.deployment.SmallRyeOpenApiProcessor.build(SmallRyeOpenApiProcessor.java:719)\r\n2022-08-08T14:35:22.8451040Z #15 126.2   \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)15 actionable tasks: 15 executed\r\n2022-08-08T14:35:22.8452000Z #15 126.2 \r\n2022-08-08T14:35:22.8452977Z #15 126.2   \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n2022-08-08T14:35:22.8454447Z #15 126.2   \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n2022-08-08T14:35:22.8455732Z #15 126.2   \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n2022-08-08T14:35:22.8456941Z #15 126.2   \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:944)\r\n2022-08-08T14:35:22.8458138Z #15 126.2   \tat io.quarkus.builder.BuildContext.run(BuildContext.java:277)\r\n2022-08-08T14:35:22.8459305Z #15 126.2   \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n2022-08-08T14:35:22.8460522Z #15 126.2   \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n2022-08-08T14:35:22.8461873Z #15 126.2   \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n2022-08-08T14:35:22.8463026Z #15 126.2   \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n2022-08-08T14:35:22.8463964Z #15 126.2   \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n```\r\n\r\n\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\nquarkus.http.host property is initialized during runtime (on startup) as in Quarkus 2.9.2 version\r\n\r\n### Actual behavior\r\n\r\nA container build process fails with an exception \"Could not expand value HOST in property quarkus.http.host\"\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.10.1+\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27185/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
