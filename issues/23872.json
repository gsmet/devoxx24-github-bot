{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23872",
  "id": 1146804913,
  "node_id": "I_kwDOCFbutM5EWtqx",
  "number": 23872,
  "title": "RestEasy Reactive client: optional FormParameters throw error when null",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/176",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/176",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/176/labels",
    "id": 7721855,
    "node_id": "MI_kwDOCFbutM4AddN_",
    "number": 176,
    "title": "2.7.3.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 65,
    "state": "closed",
    "created_at": "2022-02-28T18:06:00Z",
    "updated_at": "2022-03-02T13:50:20Z",
    "due_on": null,
    "closed_at": "2022-03-02T13:50:20Z"
  },
  "comments": 1,
  "created_at": "2022-02-22T11:42:03Z",
  "updated_at": "2022-02-28T18:32:58Z",
  "closed_at": "2022-02-22T18:15:03Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWhen using a reactive restclient created from an interface, it's not possible to call a method with an optional form parameter when the actual value of the parameter is null. \r\nIt gives the following error:\r\n\r\n    java.lang.IllegalStateException: Form parameter 'formParam' could not be converted to 'String' for REST Client interface 'org.acme.GreetingResourceApi'. A proper implementation of 'javax.ws.rs.ext.ParamConverter' needs to be returned by a 'javax.ws.rs.ext.ParamConverterProvider' that is registered with the client via the @RegisterProvider annotation on the REST Client interface.\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\nThe service method can be called without error and the value of the delivered parameter value is null. \r\n\r\n\r\n### Actual behavior\r\n\r\nThe error message from the bug description. \r\n\r\n### How to Reproduce?\r\n\r\nClone the following reproducer project:\r\nhttps://github.com/pravussum/quarkus-restclient-reactive-formparam-repro\r\n\r\nThe test ReactiveGreetingResourceTest shows the good case (form param not null) and the error case (sent form param is null). \r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n5.13.0-27-generic #29-Ubuntu SMP Wed Jan 12 17:36:47 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk-15.0.2\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.7.1\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nMaven 3.8.4\r\n\r\n### Additional information\r\n\r\nThe `JaxrsClientReactiveProcessor.addFormParam()` method does [a \"isString\" check on the null value returned from the converter](https://github.com/quarkusio/quarkus/blob/main/extensions/resteasy-reactive/jaxrs-client-reactive/deployment/src/main/java/io/quarkus/jaxrs/client/reactive/deployment/JaxrsClientReactiveProcessor.java#L2398), which obviously fails and leads to the given error message.\r\nThe null case should be handled properly here (neither throwing an exception, nor adding the parameter to the formParams map). ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23872/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
