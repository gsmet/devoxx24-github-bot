{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/34998",
  "id": 1820238259,
  "node_id": "I_kwDOCFbutM5sfqGz",
  "number": 34998,
  "title": "ExecutorService should expose metrics",
  "labels": [
    {
      "id": 985346622,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjI=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/enhancement",
      "name": "kind/enhancement",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1283619446,
      "node_id": "MDU6TGFiZWwxMjgzNjE5NDQ2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/smallrye",
      "name": "area/smallrye",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2236031886,
      "node_id": "MDU6TGFiZWwyMjM2MDMxODg2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/metrics",
      "name": "area/metrics",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/265",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/265",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/265/labels",
    "id": 9762660,
    "node_id": "MI_kwDOCFbutM4AlPdk",
    "number": 265,
    "title": "3.4.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 152,
    "state": "closed",
    "created_at": "2023-08-09T06:34:41Z",
    "updated_at": "2023-10-31T11:58:00Z",
    "due_on": null,
    "closed_at": "2023-09-06T13:01:00Z"
  },
  "comments": 16,
  "created_at": "2023-07-25T12:34:23Z",
  "updated_at": "2023-08-24T17:51:05Z",
  "closed_at": "2023-08-24T13:32:55Z",
  "active_lock_reason": null,
  "body": "### Description\n\nQuarkus starts an ExecutorService which by default has 200 threads and an unbounded queue. Via configuration options the maximum size can be changed, and a queue length can be defined. \r\n\r\nTo monitor this thread pool in a production or load test environment, metrics on this thread pool would be helpful. \r\n\r\nWhen running Keycloak which is based on Quarkus, the metrics aren't exposed, while for example Vert.x thread pool metrics are exposed. \r\n\r\nHelpful metrics would be: \r\n\r\n* completedTaskCount \r\n* rejectedTaskCount\r\n* submittedTaskCount \r\n* queueSize\r\n* activeCount\r\n* maximumPoolSize\r\n* maximumQueueSize\r\n\r\nAlthough the max values don't change during runtime, it would be helpful to show them as the upper limit in a Dashboard afterwards (for example Grafana). \n\n### Implementation ideas\n\nAll those values are already available as part of the `EnhancedQueueExecutor` implementation, and they need to be published via Micrometer.\r\n\r\nThe metrics `rejectedTaskCount` and `submittedTaskCount` could be two different labels values of one metric, as they can be summed up, but I don't want to make things more complicated if this would hold this feature back.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/34998/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
