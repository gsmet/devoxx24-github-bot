{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/36129",
  "id": 1911143102,
  "node_id": "I_kwDOCFbutM5x6bq-",
  "number": 36129,
  "title": "auto-service-loader-registration fails with GraalVM CE 21+35.1 ",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2497075451,
      "node_id": "MDU6TGFiZWwyNDk3MDc1NDUx",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/native-image",
      "name": "area/native-image",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/286",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/286",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/286/labels",
    "id": 10179892,
    "node_id": "MI_kwDOCFbutM4Am1U0",
    "number": 286,
    "title": "3.5.2",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 41,
    "state": "closed",
    "created_at": "2023-11-13T15:25:02Z",
    "updated_at": "2024-01-14T20:37:47Z",
    "due_on": null,
    "closed_at": "2023-11-16T12:50:54Z"
  },
  "comments": 4,
  "created_at": "2023-09-25T10:09:22Z",
  "updated_at": "2023-11-13T15:27:04Z",
  "closed_at": "2023-11-08T21:04:36Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nUsing Quarkus `3.4.1` and GraalVM CE 21+35.1, it's not possible to naively compile an application with the property `quarkus.native.auto-service-loader-registration=true`. The following exception is thrown:\r\n\r\n```java\r\n[INFO] [io.quarkus.deployment.pkg.steps.NativeImageBuildRunner] /home/remerson/Programs/graalvm-community-openjdk-21+35.1/bin/native-image -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager -J-Dlogging.initial-configurator.min-level=500 -J-Duser.language=en -J-Duser.country=GB -J-Dfile.encoding=UTF-8 --features=io.quarkus.runner.Feature,io.quarkus.runtime.graal.DisableLoggingFeature -J--add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED -J--add-opens=java.base/java.text=ALL-UNNAMED -J--add-opens=java.base/java.io=ALL-UNNAMED -J--add-opens=java.base/java.lang.invoke=ALL-UNNAMED -J--add-opens=java.base/java.util=ALL-UNNAMED -H:+UnlockExperimentalVMOptions -H:BuildOutputJSONFile=reproducer-1.0-SNAPSHOT-runner-build-output-stats.json -H:-UnlockExperimentalVMOptions -H:+UnlockExperimentalVMOptions -H:+AllowFoldMethods -H:-UnlockExperimentalVMOptions -J-Djava.awt.headless=true --no-fallback --link-at-build-time -H:+UnlockExperimentalVMOptions -H:+ReportExceptionStackTraces -H:-UnlockExperimentalVMOptions -H:-AddAllCharsets --enable-url-protocols=http -H:NativeLinkerOption=-no-pie -H:+UnlockExperimentalVMOptions -H:+UseServiceLoaderFeature -H:-UnlockExperimentalVMOptions -H:+TraceServiceLoaderFeature -J--add-exports=org.graalvm.nativeimage/org.graalvm.nativeimage.impl=ALL-UNNAMED reproducer-1.0-SNAPSHOT-runner -jar reproducer-1.0-SNAPSHOT-runner.jar\r\nWarning: The option '-H:+TraceServiceLoaderFeature' is experimental and must be enabled via '-H:+UnlockExperimentalVMOptions' in the future.\r\nWarning: Please re-evaluate whether any experimental option is required, and either remove or unlock it. The build output lists all active experimental options, including where they come from and possible alternatives. If you think an experimental option should be considered as stable, please file an issue.\r\nError: Could not find option 'TraceServiceLoaderFeature' from 'user'. Did you mean one of these: ServiceLoaderFeatureExcludeServiceProviders ServiceLoaderFeatureExcludeServices UseServiceLoaderFeature. Use -H:PrintFlags= to list all available options.\r\n\r\n```\n\n### Expected behavior\n\n_No response_\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n1. Define `quarkus.native.auto-service-loader-registration=true` in application.properties\r\n2. Build the application with `mvn clean install -Pnative`\r\n\r\nhttps://github.com/ryanemerson/TraceServiceLoaderFeatureReproducer\n\n### Output of `uname -a` or `ver`\n\nLinux fedora 6.2.15-100.fc36.x86_64 #1 SMP PREEMPT_DYNAMIC Thu May 11 16:51:53 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\nopenjdk version \"21\" 2023-09-19 OpenJDK Runtime Environment GraalVM CE 21+35.1 (build 21+35-jvmci-23.1-b15) OpenJDK 64-Bit Server VM GraalVM CE 21+35.1 (build 21+35-jvmci-23.1-b15, mixed mode, sharing)\n\n### Quarkus version or git rev\n\n3.4.1\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.9.1 (2e178502fcdbffc201671fb2537d0cb4b4cc58f8) Maven home: /home/remerson/Programs/apache-maven-3.9.1 Java version: 21, vendor: Oracle Corporation, runtime: /usr/lib/jvm/jdk-21 Default locale: en_GB, platform encoding: UTF-8 OS name: \"linux\", version: \"6.2.15-100.fc36.x86_64\", arch: \"amd64\", family: \"unix\"\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36129/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
