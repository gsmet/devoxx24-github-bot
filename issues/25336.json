{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/25336",
  "id": 1224105098,
  "node_id": "I_kwDOCFbutM5I9lyK",
  "number": 25336,
  "title": "OpenTelemetry Vertx issue - divided traces",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2236031412,
      "node_id": "MDU6TGFiZWwyMjM2MDMxNDEy",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/tracing",
      "name": "area/tracing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/193",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/193",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/193/labels",
    "id": 8159705,
    "node_id": "MI_kwDOCFbutM4AfIHZ",
    "number": 193,
    "title": "2.10.2.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 41,
    "state": "closed",
    "created_at": "2022-07-04T14:37:59Z",
    "updated_at": "2023-02-21T15:10:00Z",
    "due_on": null,
    "closed_at": "2022-07-06T12:17:12Z"
  },
  "comments": 6,
  "created_at": "2022-05-03T13:29:37Z",
  "updated_at": "2022-07-04T14:44:30Z",
  "closed_at": "2022-07-04T14:25:26Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWhen using nested/parallel vertx calls with reactive quarkus, issue with OpenTelemetry occurs. Traces are divided instead of being in single trace and some http post spans are missing.\r\n\r\nFor parallel calls all of them are missing (if using parallel calls greater than 2)\r\nFor cascaded calls the dependent http posts spans are missing.\r\n\r\n\r\n\n\n### Expected behavior\n\nOne single trace with http post calls included.\n\n### Actual behavior\n\n**Cascaded calls (two parallel calls and on result called third):**\r\nall traces:\r\n![bugged_all_spans](https://user-images.githubusercontent.com/10795311/166456047-162e0a6b-3923-457f-979c-2ab5ae2c939d.PNG)\r\n\r\ndetached trace:\r\n![bugged_detached_trace](https://user-images.githubusercontent.com/10795311/166456064-a47d1d55-aa5c-4b83-9232-262ef81b043d.PNG)\r\n\r\nmain trace:\r\n![bugged_main_trace](https://user-images.githubusercontent.com/10795311/166456065-7b060d9b-97ef-4d53-978a-0b72addd9f73.PNG)\r\n\r\n**3 Parallel calls:**\r\nall traces:\r\n![image](https://user-images.githubusercontent.com/10795311/166456524-c8606c0a-32a8-4fac-a192-4271b9fff5c1.png)\r\n\r\nfirst trace with http post\r\n![image](https://user-images.githubusercontent.com/10795311/166456786-84ce55d2-fcc4-4ed8-8e45-edcda028531e.png)\r\n\r\nother 2 traces (both same, uploading only one image)\r\n![image](https://user-images.githubusercontent.com/10795311/166456889-83b6d5d2-e0c0-4d45-82f3-c5efdc4eca03.png)\r\n\n\n### How to Reproduce?\n\n1. Have standard jaeger all in one with collector listening on 14250\r\n2. Download and run project from an attachment (can be simply runned from idea via quarkus plugin)\r\n[quarkus-vertx-otel-bug-001.zip](https://github.com/quarkusio/quarkus/files/8610712/quarkus-vertx-otel-bug-001.zip)\r\n3. Call get on localhost:8080/parallel or localhost:8080/cascaded\r\n4. Observe the traces in jaeger ui \n\n### Output of `uname -a` or `ver`\n\nLinux optimus-insurance-get-5b9fbc85c4-hdhhk 5.4.181-99.354.amzn2.x86_64 #1 SMP Wed Mar 2 18:50:46 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\n\n### Output of `java -version`\n\ngraalvm-ce-java11-linux-amd64-20.3.0\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.8.2.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nRunnable from intellij idea quarkus plugin simply\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25336/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
