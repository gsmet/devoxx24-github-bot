{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23010",
  "id": 1108039850,
  "node_id": "I_kwDOCFbutM5CC1iq",
  "number": 23010,
  "title": "Reactive REST Client breaks with ClassFormatError if attribute is present in interface",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/161",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/161",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/161/labels",
    "id": 7468359,
    "node_id": "MI_kwDOCFbutM4AcfVH",
    "number": 161,
    "title": "2.7.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 334,
    "state": "closed",
    "created_at": "2021-12-08T07:48:18Z",
    "updated_at": "2022-02-03T19:52:11Z",
    "due_on": null,
    "closed_at": "2022-01-19T12:42:36Z"
  },
  "comments": 4,
  "created_at": "2022-01-19T12:25:28Z",
  "updated_at": "2022-01-19T15:02:54Z",
  "closed_at": "2022-01-19T14:58:07Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nSince Quarkus 2.5.1.Final we experience a regression that the Reactive REST Client is not able to handle attributes in the interface annotated with @RegisterRestClient anymore. For example, the user might want to statically initialize variables for default methods provided in the interface. This previously worked with Quarkus 2.5.0.Final and earlier versions, but doesn't anymore.\n\n### Expected behavior\n\nThe REST Client should work even when (static) attributes are present in the interface.\n\n### Actual behavior\n\nAny call to the REST client results in the following exception:\r\n\r\n```\r\n2022-01-19 13:12:37,836 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-2) HTTP Request to /test failed, error id: 403e59c7-1090-401b-b7ea-a86967eca787-1: java.lang.ClassFormatError: Method <clinit> is not static in class file com/example/SomeApi$$CDIWrapper\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:445)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:405)\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:445)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:405)\r\n\tat com.example.SomeApi$$CDIWrapper_Bean.proxy(Unknown Source)\r\n\tat com.example.SomeApi$$CDIWrapper_Bean.get(Unknown Source)\r\n\tat com.example.SomeApi$$CDIWrapper_Bean.get(Unknown Source)\r\n\tat com.example.TestResource_Bean.create(Unknown Source)\r\n\tat com.example.TestResource_Bean.create(Unknown Source)\r\n\t...\r\n```\n\n### How to Reproduce?\n\nReproducer: https://github.com/markusdlugi/rest-client-attributes\r\n\r\nSteps to reproduce the behavior:\r\n\r\n1. Start application and send request `GET http://localhost:8080/test`\r\n2. Observe failure in application logs\r\n3. Remove line 26 in com.example.SomeApi and re-test\r\n4. Observe that REST call is performed correctly\n\n### Output of `uname -a` or `ver`\n\nMicrosoft Windows [Version 10.0.19042.631]\n\n### Output of `java -version`\n\nOpenJDK 64-Bit Server VM Corretto-11.0.10.9.1 (build 11.0.10+9-LTS, mixed mode)\n\n### GraalVM version (if different from Java)\n\nN/A\n\n### Quarkus version or git rev\n\n2.6.2.Final (regression started in 2.5.1.Final)\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.6.3\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23010/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
