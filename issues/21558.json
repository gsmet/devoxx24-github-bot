{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/21558",
  "id": 1058237464,
  "node_id": "I_kwDOCFbutM4_E2wY",
  "number": 21558,
  "title": "SseEventSource does not get the close call from server after upgrading to Quarkus 2.1.0.Final or later",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1341157944,
      "node_id": "MDU6TGFiZWwxMzQxMTU3OTQ0",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/upstream",
      "name": "triage/upstream",
      "color": "7db4d8",
      "default": false,
      "description": "Used for issues which are caused by issues in upstream projects/dependency"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/158",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/158",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/158/labels",
    "id": 7346869,
    "node_id": "MI_kwDOCFbutM4AcBq1",
    "number": 158,
    "title": "2.6.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 238,
    "state": "closed",
    "created_at": "2021-11-10T17:24:12Z",
    "updated_at": "2022-01-01T18:29:17Z",
    "due_on": null,
    "closed_at": "2021-12-08T10:39:04Z"
  },
  "comments": 8,
  "created_at": "2021-11-19T07:40:18Z",
  "updated_at": "2022-01-01T18:29:17Z",
  "closed_at": "2022-01-01T18:29:08Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nI have created an application that uses a SseEventSource to consume events from a service. The service in some cases close the connection to the client. Using Quarkus 2.0.3.Final or earlier builds the client gets the disconnected and auto connect. So far so good. Upgrading to Quarkus 2.1.0.Final or later the client does not get disconnected. The client just stops receiving events. SseEventSource::isOpen is still true\n\n### Expected behavior\n\nClient should get the close call from server and auto connect\n\n### Actual behavior\n\nClient still think the connection is open but no events are consumed.\n\n### How to Reproduce?\n\n[sse-example.zip](https://github.com/quarkusio/quarkus/files/7568462/sse-example.zip)\r\n\r\nThe example inlcudes two projects. One for the broker and on for the subscriber.\r\n\r\n1. Run in a command prompt or terminal **gradlew build** in _path to project/sse-broker_\r\n2. Run **gradlew quarkusDev** in _path to project/sse-broker_\r\n3. Run in another command prompt **gradlew build** in _path to project/sse-test_\r\n4. Run **gradlew quarkusDev** in _path to project/sse-test_\r\n5. Observe that the log _Number of events: x, connected true_ still counts after the connection is closed (after a minute)\r\n6. Update Quarkus version in _path to project/sse-test_/gradle.properties to **2.1.0.Final** and restart the applications\r\n7. Now observe that the log _Number of events: x, connected true_ stops counting after the connections is closed\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n11\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.1.0.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nGradle 7.1\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/21558/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
