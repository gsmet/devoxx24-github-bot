{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33433",
  "id": 1713312946,
  "node_id": "I_kwDOCFbutM5mHxSy",
  "number": 33433,
  "title": "Unsatisfied dependency for type @RestClient Since Quarkus 3.0.3 working with 2.16.7",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2744442223,
      "node_id": "MDU6TGFiZWwyNzQ0NDQyMjIz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-reproducer",
      "name": "triage/needs-reproducer",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for a reproducer."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 9,
  "created_at": "2023-05-17T07:37:57Z",
  "updated_at": "2023-05-17T13:20:36Z",
  "closed_at": "2023-05-17T13:20:35Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nSince updating from Quarkus 2.16.7 to Quarkus 3.0.3, my RestClient no longer works.\r\n\r\n**Error message:**\r\n`Suppressed: jakarta.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type at.tanzauswertung.portal.shared.restclient.TurniersoftwareClient and qualifiers [@RestClient]`\r\n\r\nMy RestClient interface:\r\n\r\n```\r\npackage at.tanzauswertung.portal.shared.restclient;\r\n\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.LetzteTanzIDApi;\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.MesterschaftTurniersoftwareApi;\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.MusicApi;\r\nimport jakarta.ws.rs.Path;\r\nimport org.eclipse.microprofile.rest.client.annotation.RegisterClientHeaders;\r\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\r\n\r\nimport static at.tanzauswertung.api.rest.constants.PortalRestPaths.TURNIERSOFTWARE_ENDPOINT;\r\n\r\n@Path( TURNIERSOFTWARE_ENDPOINT )\r\n@RegisterRestClient( configKey = \"turniersoftware-api\" )\r\n@RegisterClientHeaders\r\npublic interface TurniersoftwareClient extends MusicApi, MesterschaftTurniersoftwareApi, LetzteTanzIDApi {\r\n    \r\n}\r\n```\r\n\r\nI can solve the problem if I copy at least one endpoint from `MusicAPI`, `ChampionshipAPI` or Last `DanceIDApi` and put it into the tournament software client interface. Example:\r\n\r\n```\r\npackage at.tanzauswertung.portal.shared.restclient;\r\n\r\nimport at.tanzauswertung.api.rest.dto.common.ResponseDTO;\r\nimport at.tanzauswertung.api.rest.dto.music.MusikreihenfolgeDTO;\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.LetzteTanzIDApi;\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.MesterschaftTurniersoftwareApi;\r\nimport at.tanzauswertung.api.rest.endpointTurniersoftware.MusicApi;\r\nimport jakarta.ws.rs.*;\r\nimport jakarta.ws.rs.core.MediaType;\r\nimport org.eclipse.microprofile.rest.client.annotation.RegisterClientHeaders;\r\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\r\n\r\nimport java.util.List;\r\n\r\nimport static at.tanzauswertung.api.rest.constants.PortalRestPaths.*;\r\n\r\n@Path( TURNIERSOFTWARE_ENDPOINT )\r\n@RegisterRestClient( configKey = \"turniersoftware-api\" )\r\n@RegisterClientHeaders\r\npublic interface TurniersoftwareClient extends MusicApi, MesterschaftTurniersoftwareApi, LetzteTanzIDApi {\r\n\r\n    /*\r\n    THIS IS AN EXACT COPY OF THE ENDPOINT FROM THE EXTENDED INTERFACE \"MusicAPI\"\r\n     */\r\n    @GET\r\n    @Path( GET_STARTREIHENFOLGE_FOR_CHAMPIONSHIP )\r\n    @Consumes( MediaType.APPLICATION_JSON )\r\n    @Produces( { MediaType.APPLICATION_JSON } )\r\n    ResponseDTO<List<MusikreihenfolgeDTO>> getStartreihenfolgeForChampionship(\r\n            @HeaderParam( value = HEADER_CHAMPIONSHIPID ) String championshipid\r\n    );\r\n\r\n}\r\n```\r\nAfter at least one endpoint has been declared in this interface, the RestClient works without errors.\r\n\r\nI don't know if it could be important but here is the `MusicAPI` interface:\r\n```\r\npackage at.tanzauswertung.api.rest.endpointTurniersoftware;\r\n\r\nimport at.tanzauswertung.api.rest.dto.common.ResponseDTO;\r\nimport at.tanzauswertung.api.rest.dto.music.MusikreihenfolgeDTO;\r\n\r\nimport jakarta.ws.rs.*;\r\nimport jakarta.ws.rs.core.MediaType;\r\nimport java.util.List;\r\n\r\nimport static at.tanzauswertung.api.rest.constants.PortalRestPaths.GET_STARTREIHENFOLGE_FOR_CHAMPIONSHIP;\r\nimport static at.tanzauswertung.api.rest.constants.PortalRestPaths.HEADER_CHAMPIONSHIPID;\r\n\r\npublic interface MusicApi {\r\n\r\n    @GET\r\n    @Path( GET_STARTREIHENFOLGE_FOR_CHAMPIONSHIP )\r\n    @Consumes( MediaType.APPLICATION_JSON )\r\n    @Produces( { MediaType.APPLICATION_JSON } )\r\n    ResponseDTO<List<MusikreihenfolgeDTO>> getStartreihenfolgeForChampionship(\r\n            @HeaderParam( value = HEADER_CHAMPIONSHIPID ) String championshipid\r\n    );\r\n}\r\n```\r\nIf needed my pom.xml\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"\r\n         xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <parent>\r\n        <groupId>at.tanzauswertung.portal</groupId>\r\n        <artifactId>portal-parent</artifactId>\r\n        <version>1.0-SNAPSHOT</version>\r\n    </parent>\r\n\r\n    <groupId>at.tanzauswertung.portal-backend</groupId>\r\n    <artifactId>portal-backend</artifactId>\r\n\r\n    <properties>\r\n        <webapp.dependency.phase>prepare-package</webapp.dependency.phase>\r\n        <surefire-plugin.version>3.0.0-M5</surefire-plugin.version>\r\n        <lombok.version>1.18.26</lombok.version>\r\n        <testcontainers.version>1.17.6</testcontainers.version>\r\n        <quarkus.version>3.0.3.Final</quarkus.version>\r\n        <version.apache-poi>5.2.2</version.apache-poi>\r\n        <maven.compiler.source>17</maven.compiler.source>\r\n        <maven.compiler.target>17</maven.compiler.target>\r\n    </properties>\r\n\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>io.quarkus.platform</groupId>\r\n                <artifactId>quarkus-bom</artifactId>\r\n                <version>${quarkus.version}</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>at.tanzauswertung.api</groupId>\r\n            <artifactId>pea-portal-api</artifactId>\r\n            <version>1.1-SNAPSHOT</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>net.sf.jasperreports</groupId>\r\n            <artifactId>jasperreports</artifactId>\r\n            <version>6.20.1</version>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <groupId>com.fasterxml.jackson.core</groupId>\r\n                    <artifactId>jackson-core</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>com.fasterxml.jackson.core</groupId>\r\n                    <artifactId>jackson-databind</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>com.fasterxml.jackson.core</groupId>\r\n                    <artifactId>jackson-annotations</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.apache.lucene</groupId>\r\n                    <artifactId>lucene-core</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>com.fasterxml.jackson.core</groupId>\r\n                    <artifactId>lucene-analyzers-common</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.apache.lucene</groupId>\r\n                    <artifactId>lucene-queryparser</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.jfree</groupId>\r\n                    <artifactId>jcommon</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.jfree</groupId>\r\n                    <artifactId>jfreechart</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.eclipse.jdt.core.compiler</groupId>\r\n                    <artifactId>ecj</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.codehaus.castor</groupId>\r\n                    <artifactId>castor-xml</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>org.olap4j</groupId>\r\n                    <artifactId>olap4j</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>com.google.zxing</groupId>\r\n                    <artifactId>core</artifactId>\r\n                </exclusion>\r\n                <exclusion>\r\n                    <groupId>com.ibm.icu</groupId>\r\n                    <artifactId>icu4j</artifactId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.apache.poi</groupId>\r\n            <artifactId>poi</artifactId>\r\n            <version>${version.apache-poi}</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.apache.commons</groupId>\r\n            <artifactId>commons-lang3</artifactId>\r\n            <version>3.12.0</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.apache.poi</groupId>\r\n            <artifactId>poi-ooxml</artifactId>\r\n            <version>${version.apache-poi}</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-arc</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-mailer</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-narayana-jta</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-hibernate-orm</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-hibernate-orm-panache</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-scheduler</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.hibernate.orm</groupId>\r\n            <artifactId>hibernate-jpamodelgen</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-agroal</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-rest-client-reactive</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-rest-client-reactive-jackson</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-resteasy-reactive</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-resteasy-reactive-jackson</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-jdbc-postgresql</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-undertow</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-keycloak-admin-client-reactive</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-keycloak-authorization</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-oidc</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.rest-assured</groupId>\r\n            <artifactId>rest-assured</artifactId>\r\n            <version>5.3.0</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-junit5</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-test-h2</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.testcontainers</groupId>\r\n            <artifactId>junit-jupiter</artifactId>\r\n            <version>${testcontainers.version}</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.testcontainers</groupId>\r\n            <artifactId>postgresql</artifactId>\r\n            <version>${testcontainers.version}</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.github.dasniko</groupId>\r\n            <artifactId>testcontainers-keycloak</artifactId>\r\n            <version>2.4.0</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-junit5-mockito</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.quarkus</groupId>\r\n            <artifactId>quarkus-flyway</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n            <version>${lombok.version}</version>\r\n            <scope>provided</scope>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.apache.maven.plugins</groupId>\r\n                <artifactId>maven-surefire-plugin</artifactId>\r\n                <version>${surefire-plugin.version}</version>\r\n                <configuration>\r\n                    <skipTests>true</skipTests>\r\n                    <systemProperties>\r\n                        <java.util.logging.manager>org.jboss.logmanager.LogManager</java.util.logging.manager>\r\n                    </systemProperties>\r\n                </configuration>\r\n            </plugin>\r\n            <plugin>\r\n                <groupId>io.quarkus</groupId>\r\n                <artifactId>quarkus-maven-plugin</artifactId>\r\n                <version>${quarkus.version}</version>\r\n                <executions>\r\n                    <execution>\r\n                        <goals>\r\n                            <goal>build</goal>\r\n                        </goals>\r\n                    </execution>\r\n                </executions>\r\n            </plugin>\r\n            <plugin>\r\n                <groupId>org.apache.maven.plugins</groupId>\r\n                <artifactId>maven-resources-plugin</artifactId>\r\n                <version>3.2.0</version>\r\n                <executions>\r\n                    <execution>\r\n                        <id>copy-resources</id>\r\n                        <phase>validate</phase>\r\n                        <goals>\r\n                            <goal>copy-resources</goal>\r\n                        </goals>\r\n                        <configuration>\r\n                            <outputDirectory>${project.build.directory}/classes/META-INF/resources/portal\r\n                            </outputDirectory>\r\n                            <resources>\r\n                                <resource>\r\n                                    <directory>${project.parent.basedir}/portal-webapp/build/</directory>\r\n                                </resource>\r\n                            </resources>\r\n                        </configuration>\r\n                    </execution>\r\n                </executions>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n\r\n    <profiles>\r\n        <profile>\r\n            <id>skipFrontendBuild</id>\r\n            <properties>\r\n                <surefire-plugin.version>${surefire-plugin.version}</surefire-plugin.version>\r\n                <webapp.dependency.phase>none</webapp.dependency.phase>\r\n            </properties>\r\n        </profile>\r\n    </profiles>\r\n\r\n</project>\r\n\r\n```\r\n\r\nAny help is appreciated\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Actual behavior\r\n\r\n_No response_\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n17\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n3.0.3\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nmaven 3.9.2\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33433/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
