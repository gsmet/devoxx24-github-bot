{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/36656",
  "id": 1958812152,
  "node_id": "I_kwDOCFbutM50wRn4",
  "number": 36656,
  "title": "TrustedXForwarderProxiesUnknownHostnameFailureTest failing on Windows",
  "labels": [
    {
      "id": 1320737519,
      "node_id": "MDU6TGFiZWwxMzIwNzM3NTE5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/vertx",
      "name": "area/vertx",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1676631606,
      "node_id": "MDU6TGFiZWwxNjc2NjMxNjA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/windows",
      "name": "env/windows",
      "color": "edea47",
      "default": false,
      "description": "Impacts Windows machines"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/284",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/284",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/284/labels",
    "id": 10103752,
    "node_id": "MI_kwDOCFbutM4AmivI",
    "number": 284,
    "title": "3.2.8.Final",
    "description": "",
    "creator": {
      "login": "aloubyansky",
      "id": 323379,
      "node_id": "MDQ6VXNlcjMyMzM3OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/323379?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aloubyansky",
      "html_url": "https://github.com/aloubyansky",
      "followers_url": "https://api.github.com/users/aloubyansky/followers",
      "following_url": "https://api.github.com/users/aloubyansky/following{/other_user}",
      "gists_url": "https://api.github.com/users/aloubyansky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aloubyansky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aloubyansky/subscriptions",
      "organizations_url": "https://api.github.com/users/aloubyansky/orgs",
      "repos_url": "https://api.github.com/users/aloubyansky/repos",
      "events_url": "https://api.github.com/users/aloubyansky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aloubyansky/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 129,
    "state": "closed",
    "created_at": "2023-10-25T07:58:05Z",
    "updated_at": "2023-11-15T14:06:19Z",
    "due_on": "2023-11-15T08:00:00Z",
    "closed_at": "2023-11-08T14:04:29Z"
  },
  "comments": 0,
  "created_at": "2023-10-24T09:00:31Z",
  "updated_at": "2023-10-26T07:37:57Z",
  "closed_at": "2023-10-25T18:46:50Z",
  "active_lock_reason": null,
  "body": "We have seen multiple failures of `TrustedXForwarderProxiesUnknownHostnameFailureTest` lately.\r\n\r\nThe log is the following:\r\n\r\n```\r\n2023-10-23T19:15:44.3488972Z [INFO] Running io.quarkus.vertx.http.proxy.TrustedXForwarderProxiesUnknownHostnameFailureTest\r\n2023-10-23T19:15:46.0525436Z 2023-10-23 19:15:45,766 INFO  [io.quarkus] (main) quarkus-vertx-http-deployment 999-SNAPSHOT on JVM (powered by Quarkus 999-SNAPSHOT) started in 0.584s. Listening on: http://localhost:8081\r\n2023-10-23T19:15:46.4971597Z 2023-10-23 19:15:45,766 INFO  [io.quarkus] (main) Profile test activated. \r\n2023-10-23T19:15:46.4979008Z 2023-10-23 19:15:45,766 INFO  [io.quarkus] (main) Installed features: [cdi, security, smallrye-context-propagation, vertx]\r\n2023-10-23T19:15:47.1086455Z 2023-10-23 19:15:47,076 WARN  [io.net.res.dns.DefaultDnsServerAddressStreamProvider] (vert.x-eventloop-thread-0) Default DNS servers: [/8.8.8.8:53, /8.8.4.4:53] (Google Public DNS as a fallback)\r\n2023-10-23T19:15:47.2104672Z 2023-10-23 19:15:47,115 ERROR [io.qua.ver.cor.run.VertxCoreRecorder] (vert.x-eventloop-thread-0) Uncaught exception received by Vert.x: java.lang.NullPointerException: Cannot invoke \"String.indexOf(int)\" because \"address\" is null\r\n2023-10-23T19:15:47.2107640Z \tat org.wildfly.common.net.Inet.parseInetAddress(Inet.java:629)\r\n2023-10-23T19:15:47.2108853Z \tat org.wildfly.common.net.Inet.parseInetAddress(Inet.java:616)\r\n2023-10-23T19:15:47.2110282Z \tat io.quarkus.vertx.http.runtime.ForwardedProxyHandler$1.handle(ForwardedProxyHandler.java:83)\r\n2023-10-23T19:15:47.2112037Z \tat io.quarkus.vertx.http.runtime.ForwardedProxyHandler$1.handle(ForwardedProxyHandler.java:79)\r\n2023-10-23T19:15:47.2113579Z \tat io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)\r\n2023-10-23T19:15:47.2114869Z \tat io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60)\r\n2023-10-23T19:15:47.2116234Z \tat io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:211)\r\n2023-10-23T19:15:47.2117548Z \tat io.vertx.core.impl.future.Mapping.onSuccess(Mapping.java:40)\r\n2023-10-23T19:15:47.2118880Z \tat io.vertx.core.impl.future.FutureBase.lambda$emitSuccess$0(FutureBase.java:54)\r\n2023-10-23T19:15:47.2120244Z \tat io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:86)\r\n2023-10-23T19:15:47.2121624Z \tat io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:184)\r\n2023-10-23T19:15:47.2122994Z \tat io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:51)\r\n2023-10-23T19:15:47.2124352Z \tat io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:211)\r\n2023-10-23T19:15:47.2125687Z \tat io.vertx.core.impl.future.PromiseImpl.tryComplete(PromiseImpl.java:23)\r\n2023-10-23T19:15:47.2127314Z \tat io.vertx.core.Promise.complete(Promise.java:66)\r\n2023-10-23T19:15:47.2128566Z \tat io.vertx.core.impl.future.PromiseImpl.operationComplete(PromiseImpl.java:65)\r\n2023-10-23T19:15:47.2130134Z \tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n2023-10-23T19:15:47.2131712Z \tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n2023-10-23T19:15:47.2133402Z \tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n2023-10-23T19:15:47.2136060Z \tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n2023-10-23T19:15:47.2137566Z \tat io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)\r\n2023-10-23T19:15:47.2138998Z \tat io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:97)\r\n2023-10-23T19:15:47.2140425Z \tat io.vertx.core.dns.impl.DnsClientImpl$Query.handle(DnsClientImpl.java:344)\r\n2023-10-23T19:15:47.2141816Z \tat io.vertx.core.dns.impl.DnsClientImpl$1.channelRead0(DnsClientImpl.java:89)\r\n2023-10-23T19:15:47.2143207Z \tat io.vertx.core.dns.impl.DnsClientImpl$1.channelRead0(DnsClientImpl.java:83)\r\n2023-10-23T19:15:47.2144901Z \tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\r\n2023-10-23T19:15:47.2146903Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n2023-10-23T19:15:47.2148990Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-10-23T19:15:47.2151042Z \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n2023-10-23T19:15:47.2152911Z \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\r\n2023-10-23T19:15:47.2154855Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n2023-10-23T19:15:47.2156947Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-10-23T19:15:47.2159238Z \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n2023-10-23T19:15:47.2161284Z \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n2023-10-23T19:15:47.2163468Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n2023-10-23T19:15:47.2165755Z \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n2023-10-23T19:15:47.2167742Z \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n2023-10-23T19:15:47.2169611Z \tat io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)\r\n2023-10-23T19:15:47.2171392Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n2023-10-23T19:15:47.2173064Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n2023-10-23T19:15:47.2174752Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n2023-10-23T19:15:47.2176121Z \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n2023-10-23T19:15:47.2177675Z \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n2023-10-23T19:15:47.2179318Z \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n2023-10-23T19:15:47.2181037Z \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n2023-10-23T19:15:47.2182398Z \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n2023-10-23T19:15:47.2183095Z \r\n2023-10-23T19:16:17.1813867Z 2023-10-23 19:16:17,136 INFO  [io.quarkus] (main) quarkus-vertx-http-deployment stopped in 0.018s\r\n2023-10-23T19:16:17.3778724Z [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 32.93 s <<< FAILURE! -- in io.quarkus.vertx.http.proxy.TrustedXForwarderProxiesUnknownHostnameFailureTest\r\n2023-10-23T19:16:17.3787803Z [ERROR] io.quarkus.vertx.http.proxy.TrustedXForwarderProxiesUnknownHostnameFailureTest.testHeadersAreIgnored -- Time elapsed: 31.34 s <<< ERROR!\r\n2023-10-23T19:16:17.3789554Z java.net.SocketTimeoutException: Read timed out\r\n2023-10-23T19:16:17.3790613Z \tat java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:288)\r\n2023-10-23T19:16:17.3792012Z \tat java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:314)\r\n2023-10-23T19:16:17.3793324Z \tat java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)\r\n2023-10-23T19:16:17.3794418Z \tat java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)\r\n2023-10-23T19:16:17.3795517Z \tat java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)\r\n2023-10-23T19:16:17.3796938Z \tat org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:161)\r\n2023-10-23T19:16:17.3798485Z \tat org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:82)\r\n2023-10-23T19:16:17.3800048Z \tat org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:276)\r\n2023-10-23T19:16:17.3801862Z \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\r\n2023-10-23T19:16:17.3803588Z \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\r\n2023-10-23T19:16:17.3805139Z \tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n2023-10-23T19:16:17.3806879Z \tat org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:294)\r\n2023-10-23T19:16:17.3808813Z \tat org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:257)\r\n2023-10-23T19:16:17.3810780Z \tat org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:207)\r\n2023-10-23T19:16:17.3812584Z \tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n2023-10-23T19:16:17.3814192Z \tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n2023-10-23T19:16:17.3815750Z \tat org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:679)\r\n2023-10-23T19:16:17.3817379Z \tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:481)\r\n2023-10-23T19:16:17.3818998Z \tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\n2023-10-23T19:16:17.3820488Z \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n2023-10-23T19:16:17.3822015Z \tat io.restassured.internal.RestAssuredHttpBuilder.doRequest(RestAssuredHttpBuilder.java:141)\r\n2023-10-23T19:16:17.3823570Z \tat io.restassured.internal.http.HTTPBuilder.doRequest(HTTPBuilder.java:496)\r\n2023-10-23T19:16:17.3824801Z \tat io.restassured.internal.http.HTTPBuilder.request(HTTPBuilder.java:453)\r\n2023-10-23T19:16:17.3826023Z \tat io.restassured.internal.http.HTTPBuilder$request$2.call(Unknown Source)\r\n2023-10-23T19:16:17.3827382Z \tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\r\n2023-10-23T19:16:17.3828884Z \tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n2023-10-23T19:16:17.3830380Z \tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:166)\r\n2023-10-23T19:16:17.3832042Z \tat io.restassured.internal.RequestSpecificationImpl.sendHttpRequest(RequestSpecificationImpl.groovy:1480)\r\n2023-10-23T19:16:17.3833833Z \tat io.restassured.internal.RequestSpecificationImpl.this$2$sendHttpRequest(RequestSpecificationImpl.groovy)\r\n2023-10-23T19:16:17.3835395Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n2023-10-23T19:16:17.3836889Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n2023-10-23T19:16:17.3838730Z \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n2023-10-23T19:16:17.3840154Z \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n```\r\n\r\n@cescoffier any idea of what could go wrong?",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/36656/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
