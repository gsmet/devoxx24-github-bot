{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27384",
  "id": 1344544385,
  "node_id": "I_kwDOCFbutM5QJB6B",
  "number": 27384,
  "title": "OpenTelemetry: server spans of failed requests have no exception event",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2236031412,
      "node_id": "MDU6TGFiZWwyMjM2MDMxNDEy",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/tracing",
      "name": "area/tracing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/261",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/261",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/261/labels",
    "id": 9620417,
    "node_id": "MI_kwDOCFbutM4AksvB",
    "number": 261,
    "title": "3.2.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 137,
    "state": "closed",
    "created_at": "2023-07-05T15:27:44Z",
    "updated_at": "2023-08-07T13:21:27Z",
    "due_on": null,
    "closed_at": "2023-07-19T13:26:50Z"
  },
  "comments": 2,
  "created_at": "2022-08-19T14:47:40Z",
  "updated_at": "2023-07-05T15:44:32Z",
  "closed_at": "2023-07-05T11:45:50Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWhen a REST request fails with a 500 status code I think the corresponding OpenTelemetry trace span would be expected to contain an exception event. But it seems like there is no information regarding the exception in the span.\r\n\r\n### Expected behavior\r\n\r\nSee issue description. I think this should work for both RestEasy Reactive and RestEasy Classic.\r\n\r\nI am almost sure that this worked at some point, but I checked with a few older versions now and couldn't get it to work.\r\n\r\n### Actual behavior\r\n\r\nWhen a REST endpoint throws a runtime exception then a OpenTelemetry span with an error status is created, but it doesn't have any exception event attached to it with the exception message, type, and stack trace.\r\n\r\nI think that the mentioned information should be available as an event attached to the span. Possibly it would make sense to have a config property with which this behavior can be toggled, but I honestly don't know if the spec has anything to say about this.\r\n\r\n### How to Reproduce?\r\n\r\nSteps to reproduce:\r\n\r\n1. Download und unzip [code-with-quarkus.zip](https://github.com/quarkusio/quarkus/files/9382988/code-with-quarkus.zip)\r\n2. Run `mvn verify` to check results of `org.acme.GreetingResourceTest#testExceptionInTrace`\r\n\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.12.0.CR1\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\nI am however positive that this was working properly while Quarkus was still using OpenTracing. Possibly it is still working with the OpenTracing extension.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27384/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
