{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33092",
  "id": 1693842823,
  "node_id": "I_kwDOCFbutM5k9f2H",
  "number": 33092,
  "title": "Test failure: JDBC - PostgreSQL - Deployment with podman",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 5456027948,
      "node_id": "LA_kwDOCFbutM8AAAABRTRhLA",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/env/podman",
      "name": "env/podman",
      "color": "edea47",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "milestone": null,
  "comments": 0,
  "created_at": "2023-05-03T10:54:15Z",
  "updated_at": "2023-05-12T07:10:09Z",
  "closed_at": null,
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nI am working on a CI run which uses podman, and it has shown several failing tests. https://github.com/holly-cummins/quarkus/actions/runs/4844611295/jobs/8632987478 is an example run with failures. https://github.com/holly-cummins/quarkus/tree/podman-build has the (messy) workflow code.\r\n\r\nNote that I’ve disabled this test when the CI is running with Podman, to keep the build clean. As part of the fix for this, the IS_PODMAN guard should be removed from the pom.xml\r\n\r\n### Actual behavior\r\n\r\nHere is the stack trace: \r\n```\r\ndeployment stopped in 0.005s\r\n2023-04-28T20:42:49.4835423Z [INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.791 s - in io.quarkus.jdbc.postgresql.deployment.DevServicesPostgresqlDatasourceDevModeTestCase\r\n2023-04-28T20:42:49.4878962Z [INFO] Running io.quarkus.jdbc.postgresql.deployment.DevServicesPostgresqlDatasourceNamedWithUsernameTestCase\r\n2023-04-28T20:42:50.2270006Z 2023-04-28 20:42:49,102 WARN  [io.qua.ver.htt.run.VertxHttpRecorder] (main) Failed to undeploy deployment : java.util.concurrent.RejectedExecutionException: event executor terminated\r\n2023-04-28T20:42:50.2271058Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.reject(SingleThreadEventExecutor.java:934)\r\n2023-04-28T20:42:50.2271898Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.offerTask(SingleThreadEventExecutor.java:351)\r\n2023-04-28T20:42:50.2272774Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.addTask(SingleThreadEventExecutor.java:344)\r\n2023-04-28T20:42:50.2273840Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.execute(SingleThreadEventExecutor.java:836)\r\n2023-04-28T20:42:50.2274532Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.execute0(SingleThreadEventExecutor.java:827)\r\n2023-04-28T20:42:50.2275100Z \tat io.netty.util.concurrent.SingleThreadEventExecutor.execute(SingleThreadEventExecutor.java:817)\r\n2023-04-28T20:42:50.2275609Z \tat io.vertx.core.impl.EventLoopContext.execute(EventLoopContext.java:88)\r\n2023-04-28T20:42:50.2276028Z \tat io.vertx.core.impl.ContextBase.execute(ContextBase.java:225)\r\n2023-04-28T20:42:50.2276443Z \tat io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:51)\r\n2023-04-28T20:42:50.2276909Z \tat io.vertx.core.impl.future.SucceededFuture.addListener(SucceededFuture.java:88)\r\n2023-04-28T20:42:50.2277366Z \tat io.vertx.core.impl.future.FutureBase.compose(FutureBase.java:84)\r\n2023-04-28T20:42:50.2278066Z \tat io.vertx.core.impl.future.SucceededFuture.compose(SucceededFuture.java:27)\r\n2023-04-28T20:42:50.2278449Z \tat io.vertx.core.Future.compose(Future.java:208)\r\n2023-04-28T20:42:50.2278811Z \tat io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:750)\r\n2023-04-28T20:42:50.2279180Z \tat io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:755)\r\n2023-04-28T20:42:50.2279601Z \tat io.quarkus.vertx.http.runtime.VertxHttpRecorder$12.run(VertxHttpRecorder.java:814)\r\n2023-04-28T20:42:50.2280126Z \tat io.quarkus.vertx.http.runtime.VertxHttpRecorder.shutDownDevMode(VertxHttpRecorder.java:229)\r\n2023-04-28T20:42:50.2280754Z \tat io.quarkus.vertx.http.runtime.devmode.VertxHttpHotReplacementSetup.close(VertxHttpHotReplacementSetup.java:215)\r\n2023-04-28T20:42:50.2281343Z \tat io.quarkus.deployment.dev.IsolatedDevModeMain.close(IsolatedDevModeMain.java:351)\r\n2023-04-28T20:42:50.2281801Z \tat io.quarkus.deployment.dev.DevModeMain.close(DevModeMain.java:223)\r\n2023-04-28T20:42:50.2282232Z \tat io.quarkus.test.QuarkusDevModeTest.afterEach(QuarkusDevModeTest.java:322)\r\n2023-04-28T20:42:50.2282816Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)\r\n2023-04-28T20:42:50.2283646Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)\r\n2023-04-28T20:42:50.2284341Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2285030Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)\r\n2023-04-28T20:42:50.2285566Z \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n2023-04-28T20:42:50.2286159Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)\r\n2023-04-28T20:42:50.2287040Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)\r\n2023-04-28T20:42:50.2287722Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)\r\n2023-04-28T20:42:50.2288426Z \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n2023-04-28T20:42:50.2289208Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n2023-04-28T20:42:50.2289846Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2290466Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n2023-04-28T20:42:50.2291005Z \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n2023-04-28T20:42:50.2291559Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n2023-04-28T20:42:50.2292246Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2292879Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n2023-04-28T20:42:50.2293497Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n2023-04-28T20:42:50.2293958Z \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n2023-04-28T20:42:50.2294613Z \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n2023-04-28T20:42:50.2295391Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n2023-04-28T20:42:50.2296006Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2296682Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n2023-04-28T20:42:50.2297215Z \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n2023-04-28T20:42:50.2297752Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n2023-04-28T20:42:50.2298366Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2299006Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n2023-04-28T20:42:50.2299605Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n2023-04-28T20:42:50.2300061Z \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n2023-04-28T20:42:50.2300728Z \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n2023-04-28T20:42:50.2301523Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n2023-04-28T20:42:50.2302148Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2302820Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n2023-04-28T20:42:50.2303393Z \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n2023-04-28T20:42:50.2303919Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n2023-04-28T20:42:50.2304528Z \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n2023-04-28T20:42:50.2305159Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n2023-04-28T20:42:50.2305865Z \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n2023-04-28T20:42:50.2306646Z \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n2023-04-28T20:42:50.2307521Z \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n2023-04-28T20:42:50.2308206Z \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n2023-04-28T20:42:50.2308847Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n2023-04-28T20:42:50.2309478Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n2023-04-28T20:42:50.2310095Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n2023-04-28T20:42:50.2310741Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n2023-04-28T20:42:50.2311437Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n2023-04-28T20:42:50.2312131Z \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n2023-04-28T20:42:50.2312694Z \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n2023-04-28T20:42:50.2313195Z \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n2023-04-28T20:42:50.2313746Z \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n2023-04-28T20:42:50.2314312Z \tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)\r\n2023-04-28T20:42:50.2314891Z \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n2023-04-28T20:42:50.2315540Z \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n2023-04-28T20:42:50.2316231Z \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n2023-04-28T20:42:50.2316817Z \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n2023-04-28T20:42:50.2317333Z \tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n2023-04-28T20:42:50.2317791Z \tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n2023-04-28T20:42:50.2318243Z \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n2023-04-28T20:42:50.2318496Z \r\n2023-04-28T20:42:50.2318979Z 2023-04-28 20:42:49,458 INFO  [io.qua.dev.com.ContainerShutdownCloseable] (main) Dev Services for PostgreSQL shut down.\r\n2023-04-28T20:42:50.2319652Z 2023-04-28 20:42:50,176 WARN  [io.qua.dat.dep.dev.DevServicesDatasourceProcessor] (build-11) Unable to determine a database type for default datasource\r\n2023-04-28T20:42:50.2320282Z 2023-04-28 20:42:50,178 INFO  [tc.doc.io/postgres:14] (build-11) Creating container for image: docker.io/postgres:14\r\n2023-04-28T20:42:50.2320872Z 2023-04-28 20:42:50,178 WARN  [tc.doc.io/postgres:14] (build-11) Reuse was requested but the environment does not support the reuse of containers\r\n2023-04-28T20:42:50.2321575Z To enable reuse of containers, you must set 'testcontainers.reuse.enable=true' in a file located at /home/runner/.testcontainers.properties\r\n2023-04-28T20:42:50.2322304Z 2023-04-28 20:42:50,180 ERROR [tc.doc.io/postgres:14] (build-11) Could not start container [Error Occurred After Shutdown]: java.lang.RuntimeException: java.io.IOException: Broken pipe\r\n2023-04-28T20:42:50.2322939Z \tat com.github.dockerjava.zerodep.ApacheDockerHttpClientImpl.execute(ApacheDockerHttpClientImpl.java:195)\r\n2023-04-28T20:42:50.2323593Z \tat com.github.dockerjava.zerodep.ZerodepDockerHttpClient.execute(ZerodepDockerHttpClient.java:8)\r\n2023-04-28T20:42:50.2324232Z \tat org.testcontainers.dockerclient.HeadersAddingDockerHttpClient.execute(HeadersAddingDockerHttpClient.java:23)\r\n2023-04-28T20:42:50.2324948Z \tat org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:228)\r\n2023-04-28T20:42:50.2326001Z \tat org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.post(DefaultInvocationBuilder.java:124)\r\n2023-04-28T20:42:50.2405287Z \tat org.testcontainers.shaded.com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:37)\r\n2023-04-28T20:42:50.2406146Z \tat org.testcontainers.shaded.com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:13)\r\n2023-04-28T20:42:50.2406889Z \tat org.testcontainers.shaded.com.github.dockerjava.core.exec.AbstrSyncDockerCmdExec.exec(AbstrSyncDockerCmdExec.java:21)\r\n2023-04-28T20:42:50.2407618Z \tat org.testcontainers.shaded.com.github.dockerjava.core.command.AbstrDockerCmd.exec(AbstrDockerCmd.java:35)\r\n2023-04-28T20:42:50.2408352Z \tat org.testcontainers.shaded.com.github.dockerjava.core.command.CreateContainerCmdImpl.exec(CreateContainerCmdImpl.java:608)\r\n2023-04-28T20:42:50.2409152Z \tat org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:427)\r\n2023-04-28T20:42:50.2409698Z \tat org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\r\n2023-04-28T20:42:50.2410221Z \tat org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\r\n2023-04-28T20:42:50.2410737Z \tat org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\r\n2023-04-28T20:42:50.2411225Z \tat org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\r\n2023-04-28T20:42:50.2411851Z \tat io.quarkus.devservices.postgresql.deployment.PostgresqlDevServicesProcessor$1.startDatabase(PostgresqlDevServicesProcessor.java:69)\r\n2023-04-28T20:42:50.2412653Z \tat io.quarkus.datasource.deployment.devservices.DevServicesDatasourceProcessor.startDevDb(DevServicesDatasourceProcessor.java:290)\r\n2023-04-28T20:42:50.2413667Z \tat io.quarkus.datasource.deployment.devservices.DevServicesDatasourceProcessor.launchDatabases(DevServicesDatasourceProcessor.java:152)\r\n2023-04-28T20:42:50.2414320Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n2023-04-28T20:42:50.2414846Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n2023-04-28T20:42:50.2415427Z \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n2023-04-28T20:42:50.2415901Z \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n2023-04-28T20:42:50.2416287Z \tat io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:909)\r\n2023-04-28T20:42:50.2416692Z \tat io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n2023-04-28T20:42:50.2417082Z \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n2023-04-28T20:42:50.2417519Z \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n2023-04-28T20:42:50.2417996Z \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n2023-04-28T20:42:50.2418389Z \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n2023-04-28T20:42:50.2418808Z \tat org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n2023-04-28T20:42:50.2419131Z Caused by: java.io.IOException: Broken pipe\r\n2023-04-28T20:42:50.2419481Z \tat java.base/sun.nio.ch.FileDispatcherImpl.write0(Native Method)\r\n2023-04-28T20:42:50.2419871Z \tat java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)\r\n2023-04-28T20:42:50.2420273Z \tat java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:132)\r\n2023-04-28T20:42:50.2420621Z \tat java.base/sun.nio.ch.IOUtil.write(IOUtil.java:97)\r\n2023-04-28T20:42:50.2420926Z \tat java.base/sun.nio.ch.IOUtil.write(IOUtil.java:53)\r\n2023-04-28T20:42:50.2421355Z \tat java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:532)\r\n2023-04-28T20:42:50.2421838Z \tat com.github.dockerjava.transport.UnixSocket$WrappedWritableByteChannel.write(UnixSocket.java:95)\r\n2023-04-28T20:42:50.2422321Z \tat java.base/java.nio.channels.Channels.writeFullyImpl(Channels.java:74)\r\n2023-04-28T20:42:50.2422719Z \tat java.base/java.nio.channels.Channels.writeFully(Channels.java:96)\r\n2023-04-28T20:42:50.2423163Z \tat java.base/java.nio.channels.Channels$1.write(Channels.java:171)\r\n2023-04-28T20:42:50.2423819Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.SessionOutputBufferImpl.flushBuffer(SessionOutputBufferImpl.java:117)\r\n2023-04-28T20:42:50.2424703Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.SessionOutputBufferImpl.flush(SessionOutputBufferImpl.java:126)\r\n2023-04-28T20:42:50.2425589Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.ContentLengthOutputStream.flush(ContentLengthOutputStream.java:99)\r\n2023-04-28T20:42:50.2426423Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.io.entity.ByteArrayEntity.writeTo(ByteArrayEntity.java:131)\r\n2023-04-28T20:42:50.2427351Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:153)\r\n2023-04-28T20:42:50.2428263Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:141)\r\n2023-04-28T20:42:50.2428983Z \tat com.github.dockerjava.zerodep.HijackingHttpRequestExecutor.execute(HijackingHttpRequestExecutor.java:50)\r\n2023-04-28T20:42:50.2429693Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:218)\r\n2023-04-28T20:42:50.2430980Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager$InternalConnectionEndpoint.execute(PoolingHttpClientConnectionManager.java:596)\r\n2023-04-28T20:42:50.2431946Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.InternalExecRuntime.execute(InternalExecRuntime.java:215)\r\n2023-04-28T20:42:50.2432848Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.MainClientExec.execute(MainClientExec.java:107)\r\n2023-04-28T20:42:50.2433655Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2434459Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement$1.proceed(ExecChainElement.java:57)\r\n2023-04-28T20:42:50.2435222Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ConnectExec.execute(ConnectExec.java:181)\r\n2023-04-28T20:42:50.2436013Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2437066Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement$1.proceed(ExecChainElement.java:57)\r\n2023-04-28T20:42:50.2437868Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ProtocolExec.execute(ProtocolExec.java:172)\r\n2023-04-28T20:42:50.2438670Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2440428Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement$1.proceed(ExecChainElement.java:57)\r\n2023-04-28T20:42:50.2441287Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:93)\r\n2023-04-28T20:42:50.2442145Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2442944Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement$1.proceed(ExecChainElement.java:57)\r\n2023-04-28T20:42:50.2443887Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ContentCompressionExec.execute(ContentCompressionExec.java:128)\r\n2023-04-28T20:42:50.2444762Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2445624Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement$1.proceed(ExecChainElement.java:57)\r\n2023-04-28T20:42:50.2446412Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.RedirectExec.execute(RedirectExec.java:116)\r\n2023-04-28T20:42:50.2447200Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.ExecChainElement.execute(ExecChainElement.java:51)\r\n2023-04-28T20:42:50.2448063Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.InternalHttpClient.doExecute(InternalHttpClient.java:178)\r\n2023-04-28T20:42:50.2449050Z \tat com.github.dockerjava.zerodep.shaded.org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:67)\r\n2023-04-28T20:42:50.2449782Z \tat com.github.dockerjava.zerodep.ApacheDockerHttpClientImpl.execute(ApacheDockerHttpClientImpl.java:191)\r\n2023-04-28T20:42:50.2450176Z \t... 28 more\r\n2023-04-28T20:42:50.2450435Z \tSuppressed: java.io.IOException: Broken pipe\r\n2023-04-28T20:42:50.2450784Z \t\tat java.base/sun.nio.ch.FileDispatcherImpl.write0(Native Method)\r\n2023-04-28T20:42:50.2451174Z \t\tat java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)\r\n2023-04-28T20:42:50.2451579Z \t\tat java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:132)\r\n2023-04-28T20:42:50.2451935Z \t\tat java.base/sun.nio.ch.IOUtil.write(IOUtil.java:97)\r\n2023-04-28T20:42:50.2452253Z \t\tat java.base/sun.nio.ch.IOUtil.write(IOUtil.java:53)\r\n2023-04-28T20:42:50.2452620Z \t\tat java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:532)\r\n2023-04-28T20:42:50.2453103Z \t\tat com.github.dockerjava.transport.UnixSocket$WrappedWritableByteChannel.write(UnixSocket.java:95)\r\n2023-04-28T20:42:50.2453642Z \t\tat java.base/java.nio.channels.Channels.writeFullyImpl(Channels.java:74)\r\n2023-04-28T20:42:50.2454041Z \t\tat java.base/java.nio.channels.Channels.writeFully(Channels.java:96)\r\n2023-04-28T20:42:50.2454417Z \t\tat java.base/java.nio.channels.Channels$1.write(Channels.java:171)\r\n2023-04-28T20:42:50.2455066Z \t\tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.SessionOutputBufferImpl.flushBuffer(SessionOutputBufferImpl.java:117)\r\n2023-04-28T20:42:50.2455971Z \t\tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.SessionOutputBufferImpl.flush(SessionOutputBufferImpl.java:126)\r\n2023-04-28T20:42:50.2456856Z \t\tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.ContentLengthOutputStream.close(ContentLengthOutputStream.java:93)\r\n2023-04-28T20:42:50.2457838Z \t\tat com.github.dockerjava.zerodep.shaded.org.apache.hc.core5.http.impl.io.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:154)\r\n2023-04-28T20:42:50.2458434Z \t\t... 53 more\r\n2023-04-28T20:42:50.2458561Z \r\n2023-04-28T20:42:50.2459509Z [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.735 s <<< FAILURE! - in io.quarkus.jdbc.postgresql.deployment.DevServicesPostgresqlDatasourceNamedWithUsernameTestCase\r\n2023-04-28T20:42:50.2460436Z [ERROR] io.quarkus.jdbc.postgresql.deployment.DevServicesPostgresqlDatasourceNamedWithUsernameTestCase  Time elapsed: 0.735 s  <<< ERROR!\r\n2023-04-28T20:42:50.2460967Z java.lang.RuntimeException: \r\n2023-04-28T20:42:50.2461358Z java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n2023-04-28T20:42:50.2462195Z \t[error]: Build step io.quarkus.datasource.deployment.devservices.DevServicesDatasourceProcessor#launchDatabases threw an exception: java.lang.RuntimeException: org.testcontainers.containers.ContainerLaunchException: Container startup failed for image docker.io/postgres:14\r\n2023-04-28T20:42:50.2463227Z \tat io.quarkus.datasource.deployment.devservices.DevServicesDatasourceProcessor.startDevDb(DevServicesDatasourceProcessor.java:362)\r\n```\r\n\r\n### How to Reproduce?\r\n\r\nReproduction note: I haven't been able to reproduce this locally on mac with podman 4.03.\r\nWith the latest mac version of podman 4.4.4, I get a permission failure running rootless, and it passes rootful.\r\n\r\n\r\n\r\nPicking up my branch to reproduce on CI should work, or running locally on linux with a podman engine of 4.5.\r\n\r\n### Additional information\r\n\r\n## Environment Info\r\n```\r\n2023-05-02T10:44:48.4887010Z ##[group]Run docker version\r\n2023-05-02T10:44:48.4887318Z �[36;1mdocker version�[0m\r\n2023-05-02T10:44:48.4949771Z shell: /usr/bin/bash -e {0}\r\n2023-05-02T10:44:48.4950031Z env:\r\n2023-05-02T10:44:48.4950252Z   LANG: en_US.UTF-8\r\n2023-05-02T10:44:48.4950613Z   COMMON_MAVEN_ARGS: -e -B --settings .github/mvn-settings.xml --fail-at-end\r\n2023-05-02T10:44:48.4951271Z   NATIVE_TEST_MAVEN_ARGS: -Dtest-containers -Dstart-containers -Dquarkus.native.native-image-xmx=5g -Dnative -Dnative.surefire.skip -Dformat.skip -Dno-descriptor-tests install -DskipDocs\r\n2023-05-02T10:44:48.4952041Z   JVM_TEST_MAVEN_ARGS: -Dtest-containers -Dstart-containers -Dformat.skip -DskipDocs -Dquarkus.test.hang-detection-timeout=60\r\n2023-05-02T10:44:48.4952507Z   DB_USER: hibernate_orm_test\r\n2023-05-02T10:44:48.4952790Z   DB_PASSWORD: hibernate_orm_test\r\n2023-05-02T10:44:48.4953053Z   DB_NAME: hibernate_orm_test\r\n2023-05-02T10:44:48.4953388Z   IS_PODMAN: true\r\n2023-05-02T10:44:48.4953637Z   MAVEN_OPTS: -Xmx2g -XX:MaxMetaspaceSize=1g\r\n2023-05-02T10:44:48.4954244Z   JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/17.0.6-10/x64\r\n2023-05-02T10:44:48.4954619Z   JAVA_HOME_17_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/17.0.6-10/x64\r\n2023-05-02T10:44:48.4954970Z   DOCKER_HOST: unix:///run/user/1001/podman/podman.sock\r\n2023-05-02T10:44:48.4955210Z ##[endgroup]\r\n2023-05-02T10:44:49.5351123Z Client:\r\n2023-05-02T10:44:49.5351708Z  Version:           20.10.24+azure-1\r\n2023-05-02T10:44:49.5351963Z  API version:       1.41\r\n2023-05-02T10:44:49.5352176Z  Go version:        go1.19.6\r\n2023-05-02T10:44:49.5352453Z  Git commit:        297e1284d3bd092e9bc96076c3ddc4bb33f8c7ab\r\n2023-05-02T10:44:49.5352738Z  Built:             Fri Mar 31 18:34:38 UTC 2023\r\n2023-05-02T10:44:49.5352965Z  OS/Arch:           linux/amd64\r\n2023-05-02T10:44:49.5353186Z  Context:           default\r\n2023-05-02T10:44:49.5353414Z  Experimental:      true\r\n2023-05-02T10:44:49.5353560Z \r\n2023-05-02T10:44:49.5353709Z Server: linux/amd64/ubuntu-22.04\r\n2023-05-02T10:44:49.5353969Z  Podman Engine:\r\n2023-05-02T10:44:49.5354202Z   Version:          4.5.0\r\n2023-05-02T10:44:49.5354439Z   APIVersion:       4.5.0\r\n2023-05-02T10:44:49.5354636Z   Arch:             amd64\r\n2023-05-02T10:44:49.5355016Z   BuildTime:        1970-01-01T00:00:00Z\r\n2023-05-02T10:44:49.5355260Z   Experimental:     false\r\n2023-05-02T10:44:49.5355459Z   GitCommit:        \r\n2023-05-02T10:44:49.5355677Z   GoVersion:        go1.18.1\r\n2023-05-02T10:44:49.5355968Z   KernelVersion:    5.15.0-1036-azure\r\n2023-05-02T10:44:49.5356195Z   MinAPIVersion:    4.0.0\r\n2023-05-02T10:44:49.5356410Z   Os:               linux\r\n2023-05-02T10:44:49.5356604Z  Conmon:\r\n2023-05-02T10:44:49.5356824Z   Version:          conmon version 2.1.7, commit: \r\n2023-05-02T10:44:49.5357197Z   Package:          conmon_2:2.1.7-0ubuntu22.04+obs15.24_amd64\r\n2023-05-02T10:44:49.5357457Z  OCI Runtime (crun):\r\n2023-05-02T10:44:49.5357678Z   Version:          crun version 1.8.4\r\n2023-05-02T10:44:49.5357962Z commit: 5a8fa99a5e41facba2eda4af12fa26313918805b\r\n2023-05-02T10:44:49.5358237Z rundir: /run/user/1001/crun\r\n2023-05-02T10:44:49.5358444Z spec: 1.0.0\r\n2023-05-02T10:44:49.5358706Z +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +YAJL\r\n2023-05-02T10:44:49.5359097Z   Package:          crun_101:1.8.4-0ubuntu22.04+obs55.10_amd64\r\n2023-05-02T10:44:49.5359334Z  Engine:\r\n2023-05-02T10:44:49.5359516Z   Version:          4.5.0\r\n2023-05-02T10:44:49.5359765Z   API version:      1.41 (minimum version 1.24)\r\n2023-05-02T10:44:49.5360012Z   Go version:       go1.18.1\r\n2023-05-02T10:44:49.5360212Z   Git commit:       \r\n2023-05-02T10:44:49.5360442Z   Built:            Thu Jan  1 00:00:00 1970\r\n2023-05-02T10:44:49.5360673Z   OS/Arch:          linux/amd64\r\n2023-05-02T10:44:49.5360884Z   Experimental:     false\r\n```",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33092/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
