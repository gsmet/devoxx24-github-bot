{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/38856",
  "id": 2142145486,
  "node_id": "I_kwDOCFbutM5_rovO",
  "number": 38856,
  "title": "Arc - improve injection point transformation API",
  "labels": [
    {
      "id": 1282102389,
      "node_id": "MDU6TGFiZWwxMjgyMTAyMzg5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/arc",
      "name": "area/arc",
      "color": "0366d6",
      "default": false,
      "description": "Issue related to ARC (dependency injection)"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/329",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/329",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/329/labels",
    "id": 11056804,
    "node_id": "MI_kwDOCFbutM4AqLak",
    "number": 329,
    "title": "3.12.0.CR1",
    "description": "",
    "creator": {
      "login": "quarkusbot",
      "id": 61254497,
      "node_id": "MDQ6VXNlcjYxMjU0NDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/61254497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quarkusbot",
      "html_url": "https://github.com/quarkusbot",
      "followers_url": "https://api.github.com/users/quarkusbot/followers",
      "following_url": "https://api.github.com/users/quarkusbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quarkusbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarkusbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarkusbot/subscriptions",
      "organizations_url": "https://api.github.com/users/quarkusbot/orgs",
      "repos_url": "https://api.github.com/users/quarkusbot/repos",
      "events_url": "https://api.github.com/users/quarkusbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarkusbot/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 195,
    "state": "closed",
    "created_at": "2024-05-15T09:27:54Z",
    "updated_at": "2024-07-04T18:19:16Z",
    "due_on": null,
    "closed_at": "2024-06-12T11:16:44Z"
  },
  "comments": 8,
  "created_at": "2024-02-19T11:25:11Z",
  "updated_at": "2024-06-06T14:08:52Z",
  "closed_at": "2024-06-06T14:08:49Z",
  "active_lock_reason": null,
  "body": "As part of https://github.com/quarkusio/quarkus/pull/38841, we discovered that the API for injection point transformation is fairly hard to use when you need to alter IPs which are method parameters. As of now, you have to be aware that you operate on an `AnnotationTarget` with kind `METHOD` instead of `METHOD_PARAMETER` and you need to alter annotations in a tedious way by supplying a different ann. target. That being said, it isn't broken per se, just hard to use properly.\r\n\r\nThis seems to have been intentional as older Jandex API (pre 3.0) didn't allow easier handling - but that's no longer the case.\r\n\r\nWe should do something along the lines of:\r\n* Adding `MethodParameterInfo` into `InjectionPointInfo`\r\n  * Probably deprecate `#getTarget()` method as it would be confusing and breaking to silently change its behavior\r\n  * Introduce something like `#getInjectedTarget()` which will now return ann. target of method param where applicable\r\n* Revisit `InjectionPointsTransformer` API\r\n  * I am not sure how to handle this in a non-breaking manner - it now also returns method ann. target with its `#getTarget()` and we would like to change that. We might need to do the same thing as suggested above although that will end up being the only impl of `TransformationContext` which doesn't have `getTarget` method :shrug: ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/38856/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
