{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/32080",
  "id": 1637831909,
  "node_id": "I_kwDOCFbutM5hn1Tl",
  "number": 32080,
  "title": "Can't inject list of interfaces with wildcards twice into beans",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1282102389,
      "node_id": "MDU6TGFiZWwxMjgyMTAyMzg5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/arc",
      "name": "area/arc",
      "color": "0366d6",
      "default": false,
      "description": "Issue related to ARC (dependency injection)"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/241",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/241",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/241/labels",
    "id": 9190762,
    "node_id": "MI_kwDOCFbutM4AjD1q",
    "number": 241,
    "title": "3.0.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 127,
    "state": "closed",
    "created_at": "2023-03-22T09:42:22Z",
    "updated_at": "2023-04-02T16:24:01Z",
    "due_on": null,
    "closed_at": "2023-03-30T13:52:01Z"
  },
  "comments": 5,
  "created_at": "2023-03-23T16:05:23Z",
  "updated_at": "2023-03-30T06:57:14Z",
  "closed_at": "2023-03-29T14:23:43Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nARC has a problem while resolving injection points for types with wilcards.\r\nIf create an parametirized interface and several implementation and after try to inject List (with All annotion) more than one time - ARC can't resolve syntetic bean more than one time.\r\n\r\nMore details with screenshoots in additional information.\n\n### Expected behavior\n\nShold inject list of beans in any injection point.\n\n### Actual behavior\n\nIf inject List in two or more beans will cause exception about unsatisfied dependency.\n\n### How to Reproduce?\n\nExample here https://github.com/insideworld/quarkusbug\r\nJust try to build it using maven and take exception about Unsatisfied dependency.\r\nIf comment BeanB - all works fine.\r\n\r\nTest case:\r\n1. Need to create an interface with generic parameter.\r\n2. Create two or more implementation of generic interface and mark it as singleton.\r\n3. Create two or more independed beans and try to inject list of interfaces with all annotation.\r\n4. Try to build it or launch.\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\njava version \"17.0.5\" 2022-10-18 LTS\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n3.0.0.Beta1\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.6 (84538c9988a25aec085021c365c560670ad80f63)\n\n### Additional information\n\nARC try to resolve bean at first iteration in io.quarkus.arc.processor.Beans#resolveInjectionPoint and found possible syntetic bean to inject.\r\nIn io.quarkus.arc.processor.BeanResolverImpl#matchesNoBoxing all good because comparation by reference get true:\r\n![image](https://user-images.githubusercontent.com/24254398/227261804-a972cc33-d4b1-4f53-9675-e33e8e50142e.png)\r\n\r\nBut in the second (and other) times when ARC try to compare 2 types, references are different:\r\n![image](https://user-images.githubusercontent.com/24254398/227262412-3ac67b42-b9fb-4e13-a729-4b3e93e3d4df.png)\r\n\r\nAfter some recursive operation, arc try to resolve wildcards types:\r\n![image](https://user-images.githubusercontent.com/24254398/227263392-87028001-a6fa-459f-b401-d12243e8eaca.png)\r\nBut here we don't have comparation by references or comparation by 2 wildcards and validation return negative result.\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32080/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
