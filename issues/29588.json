{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/29588",
  "id": 1469982594,
  "node_id": "I_kwDOCFbutM5XnieC",
  "number": 29588,
  "title": "Connection to the db is never released after multiple messages from \"vertx-blocked-thread-checker\" about thread being blocked",
  "labels": [],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 0,
  "created_at": "2022-11-30T17:23:08Z",
  "updated_at": "2022-11-30T17:26:08Z",
  "closed_at": "2022-11-30T17:26:06Z",
  "active_lock_reason": null,
  "body": "Describe the bug\r\nWe have had a bug with  our system that led to thousands of elements saved in the mongodb document, which in turn made any fetch request overflow the allowed time of execution that is expected by vertx-blocked-thread-catcher, but the issue is that after a hundred or so of messages like this our system shuts down entirely even the most basic functions in the app like find by id no longer respond and only produce a `io.vertx.core.impl.NoStackTraceThrowable: Timeout`  exception. Nowhere in the application are we are using any blocking calls, we are utilizing hibernate reactive in combination wit spring webflux and spring data mongodb reactive\r\n\r\nExpected behavior\r\nThe connection to the db is released after the thread that is holding it has finished its execution \r\n\r\nActual behavior\r\nThe connection is never released leading to entire application shutdown\r\n\r\nHow to Reproduce?\r\nCreate a placeholder application that takes more time to process a request then it is allowed by vertx-blocked-thread-checker spam the app with hundred or so requests, then after that is complete attempt sending a request should be processed in time that is less then \"vertx-blocked-thread-checker\", observe that the latter request is failing  \r\n\r\nOutput of uname -a or ver\r\nNo response\r\n\r\nOutput of java -version\r\n11.4\r\n\r\nGraalVM version (if different from Java)\r\nNo response\r\n\r\nQuarkus version or git rev\r\nSpring Webflux is used. \r\n\r\nBuild tool (ie. output of mvnw --version or gradlew --version)\r\nGradle 7.5.1\r\n\r\nAdditional information\r\nNo response",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29588/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
