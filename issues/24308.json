{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/24308",
  "id": 1168889410,
  "node_id": "I_kwDOCFbutM5Fq9ZC",
  "number": 24308,
  "title": "Apicurio Devservice can not be configured with apicurio-registry-mem images from outside of DockerHub",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1658790125,
      "node_id": "MDU6TGFiZWwxNjU4NzkwMTI1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kafka",
      "name": "area/kafka",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/189",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/189",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/189/labels",
    "id": 8065991,
    "node_id": "MI_kwDOCFbutM4AexPH",
    "number": 189,
    "title": "2.11.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 244,
    "state": "closed",
    "created_at": "2022-06-09T10:38:20Z",
    "updated_at": "2023-01-13T10:47:01Z",
    "due_on": null,
    "closed_at": "2022-07-13T14:14:46Z"
  },
  "comments": 1,
  "created_at": "2022-03-14T20:50:30Z",
  "updated_at": "2022-07-12T12:37:18Z",
  "closed_at": "2022-07-12T12:37:13Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nApicurio DevServices requires images from apicurio/apicurio-registry-mem. Due to this constraint we cannot use the Apicurio images copied to our own container registry.\r\nIn order to avoid reaching our DockerHub download limits, we try to use as much as possible images copied to our own registry. \n\n### Expected behavior\n\nIt should be possible to start the Apicurio DevService using Apicurio images from any repository\n\n### Actual behavior\n\n```\r\nERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n        [error]: Build step io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor#startApicurioRegistryDevService threw an exception: java.lang.RuntimeException: java.lang.IllegalArgumentException: Only apicurio/apicurio-registry-mem images are supported\r\n        at io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor.startApicurioRegistryDevService(DevServicesApicurioRegistryProcessor.java:92)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at io.quarkus.deployment.ExtensionLoader$2.execute(ExtensionLoader.java:882)\r\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:277)\r\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\nCaused by: java.lang.IllegalArgumentException: Only apicurio/apicurio-registry-mem images are supported\r\n        at io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor$ApicurioRegistryContainer.<init>(DevServicesApicurioRegistryProcessor.java:273)\r\n        at io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor.lambda$startApicurioRegistry$1(DevServicesApicurioRegistryProcessor.java:165)\r\n        at java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n        at io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor.startApicurioRegistry(DevServicesApicurioRegistryProcessor.java:162)\r\n        at io.quarkus.apicurio.registry.avro.DevServicesApicurioRegistryProcessor.startApicurioRegistryDevService(DevServicesApicurioRegistryProcessor.java:83)\r\n```\n\n### How to Reproduce?\n\n1. In the Avro Kafka quickstart project (https://github.com/quarkusio/quarkus-quickstarts/tree/main/kafka-avro-schema-quickstart) configure the following property in the `application.properties`\r\n\r\n`quarkus.apicurio-registry.devservices.image-name=quay.io/apicurio/apicurio-registry-mem:2.2.1.Final`\r\nYou can substitute this image for any similar images stored in a container registry different from DockerHub\r\n\r\n2. Start the quickstart service with `mvn quarkus:dev`\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n11.0.14\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.7.4.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.2\n\n### Additional information\n\nThere is an solved issue similar to this one but for the Kafka DevService : https://github.com/quarkusio/quarkus/issues/23978 ",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/24308/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
