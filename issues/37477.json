{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/37477",
  "id": 2023299765,
  "node_id": "I_kwDOCFbutM54mRq1",
  "number": 37477,
  "title": "Make hibernate-jpamodelgen easier to apply to Quarkus 3.7+ projects",
  "labels": [
    {
      "id": 985346622,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjI=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/enhancement",
      "name": "kind/enhancement",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/300",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/300",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/300/labels",
    "id": 10431006,
    "node_id": "MI_kwDOCFbutM4Anyoe",
    "number": 300,
    "title": "3.6.7",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 10,
    "state": "closed",
    "created_at": "2024-01-17T15:28:27Z",
    "updated_at": "2024-03-12T13:23:40Z",
    "due_on": null,
    "closed_at": "2024-01-23T12:43:43Z"
  },
  "comments": 27,
  "created_at": "2023-12-04T08:31:08Z",
  "updated_at": "2024-02-02T12:04:54Z",
  "closed_at": "2024-01-17T09:11:35Z",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nIn Quarkus 3.7, Hibernate ORM's \"JPAModelGen\" annotation processor can no longer simply be dropped into the compile path as a \"provided\" dependency, because it now has dependencies of its own.\r\n\r\nSee #37460 and in particular 9e072ed3720fb50b04c69eeffbd3922707a3ace3:\r\n\r\n>  Properly apply annotation processors in Panache-Hibernate extensions\r\n>\r\n> Unfortunately, HHH-17362 doesn't fix the problem,\r\n> and it's unlikely that it will ever be fixed.\r\n> See https://hibernate.atlassian.net/browse/HHH-17362?focusedCommentId=113465\r\n> \r\n> We'll have to apply annotation processors the \"right\" way, as explained\r\n> in https://github.com/hibernate/hibernate-orm/blob/6.3/migration-guide.adoc\r\n\r\nLong story short, the proper way to use this annotation processor (and, really, annotation processors in general) is to add the processor, not to the compile path, but to the annotation processor path:\r\n\r\n```xml\r\n            <plugin>\r\n                <artifactId>maven-compiler-plugin</artifactId>\r\n                <configuration>\r\n                    <annotationProcessorPaths>\r\n                        <annotationProcessorPath>\r\n                            <groupId>org.hibernate.orm</groupId>\r\n                            <artifactId>hibernate-jpamodelgen</artifactId>\r\n                            <version>6.4.0.Final</version> <!-- This is required even with a BOM! See below -->\r\n                        </annotationProcessorPath>\r\n                    </annotationProcessorPaths>\r\n                    <annotationProcessors>\r\n                        <!-- Not sure this is strictly necessary; perhaps processors can be auto-detected -->\r\n                        <annotationProcessor>org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor</annotationProcessor>\r\n                    </annotationProcessors>\r\n                </configuration>\r\n            </plugin>\r\n```\r\n\r\nThis is fine and [this is already what we recommend in the migration guide](https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.7#jpamodelgen).\r\n\r\nHowever, as documented in the migration guide, the BOM won't be applied to Maven's `annotationProcessorPath` entry and the version of `hibernate-jpamodel` will have to be specified explicitly by every application. That's inconvenient.\r\n\r\nThis should be solved in Maven Compiler Plugin version 3.12.0 (see https://issues.apache.org/jira/browse/MCOMPILER-391), but 3.11 was released back in February 2023 and the plugin hasn't seen a release since :/\r\n\r\n\r\n### Implementation ideas\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/37477/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
