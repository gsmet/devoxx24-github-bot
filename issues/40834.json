{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/40834",
  "id": 2315670747,
  "node_id": "I_kwDOCFbutM6KBlTb",
  "number": 40834,
  "title": "Flyway documentation should mention required database modules",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1897325810,
      "node_id": "MDU6TGFiZWwxODk3MzI1ODEw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/flyway",
      "name": "area/flyway",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/338",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/338",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/338/labels",
    "id": 11237542,
    "node_id": "MI_kwDOCFbutM4Aq3im",
    "number": 338,
    "title": "3.12.1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 56,
    "state": "closed",
    "created_at": "2024-06-26T15:15:26Z",
    "updated_at": "2024-08-14T12:25:05Z",
    "due_on": null,
    "closed_at": "2024-07-03T12:05:01Z"
  },
  "comments": 17,
  "created_at": "2024-05-24T15:24:12Z",
  "updated_at": "2024-07-01T17:54:51Z",
  "closed_at": "2024-07-01T09:08:13Z",
  "active_lock_reason": null,
  "body": "Trying to use Flyway, I imported `quarkus-flyway` and then it complained about:\r\n\r\n```\r\nCaused by: org.flywaydb.core.api.FlywayException: Unsupported Database: PostgreSQL 16.3\r\n\tat org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:73)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:134)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:147)\r\n\tat io.quarkus.flyway.runtime.FlywayRecorder.doStartActions(FlywayRecorder.java:136)\r\n\tat io.quarkus.deployment.steps.FlywayProcessor$startActions2099152139.deploy_0(Unknown Source)\r\n\tat io.quarkus.deployment.steps.FlywayProcessor$startActions2099152139.deploy(Unknown Source)\r\n```\r\n\r\nThe documentation at https://quarkus.io/guides/flyway is not clear, because it does mention that other DBs need special extra modules, but it doesn't say that about Postgres. Perhaps it's new, but now it's required, so we should document that:\r\n\r\n```\r\n<dependency>\r\n    <groupId>org.flywaydb</groupId>\r\n    <artifactId>flyway-database-postgresql</artifactId>\r\n</dependency>\r\n```\r\n\r\nIs now required. Also, I'm a bit suspicious about the fact that some modules start with `flyway-database` and others just `flyway-` I don't know if that's really the case, we should check.\r\n\r\nAnd finally, but VERY IMPORTANT, we should fix that stupid exception listed above, because it's NOT helpful. I installed other versions of Postgres, I looked online to find which version was supported, and got really mixed results from Flyway documentation, one page saying only 16, another saying all of them.\r\n\r\nIt was not that my DB version was unsupported, the real error was that the extra module was missing. If we can't automatically add those modules at build time (if flyway + postgres -> extra dependency) (ask @aloubyansky) then perhaps we should throw a build time error with helpful text for how to resolve it by adding the required module?\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 3,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/40834/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
