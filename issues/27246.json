{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27246",
  "id": 1335774600,
  "node_id": "I_kwDOCFbutM5Pnk2I",
  "number": 27246,
  "title": "Native build image failure: `oracle.jdbc.driver.BlockSource$ThreadedCachingBlockSource` still failing on `mandrel` image",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2260340367,
      "node_id": "MDU6TGFiZWwyMjYwMzQwMzY3",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/mandrel",
      "name": "area/mandrel",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/194",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/194",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/194/labels",
    "id": 8190506,
    "node_id": "MI_kwDOCFbutM4AfPoq",
    "number": 194,
    "title": "2.12.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 238,
    "state": "closed",
    "created_at": "2022-07-13T08:15:30Z",
    "updated_at": "2022-08-23T15:43:55Z",
    "due_on": null,
    "closed_at": "2022-08-17T12:32:03Z"
  },
  "comments": 1,
  "created_at": "2022-08-11T10:35:45Z",
  "updated_at": "2022-08-17T08:01:37Z",
  "closed_at": "2022-08-17T08:01:34Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nOn this [ticket](https://github.com/quarkusio/quarkus/issues/27101) we have fixed a native issue on `ubi-quarkus-native-image:22.1-java11` but is still an issue on `ubi-quarkus-mandrel:22.1-java11` and Java `OpenJDK Runtime Environment Temurin-11.0.16+8 (build 11.0.16+8)`. Note the java version is very important. Same scenario with Java 11.0.14 works as expected. \r\n\r\nSo, to me seems that depending on your Java version and native image you will require a different native configuration.  @Ladicek  FYI\r\n\r\nI revert locally the above changes and by adding only this configuration is working in both images with Temurin-11.0.16+8 (build 11.0.16+8):\r\n```\r\n--initialize-at-run-time=oracle.jdbc.driver.BlockSource$ThreadedCachingBlockSource\r\n```\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Actual behavior\r\n\r\n_No response_\r\n\r\n### How to Reproduce?\r\n\r\nBe sure that you are using Java Temurin-11.0.16+8\r\n\r\n`git clone https://github.com/quarkus-qe/quarkus-test-suite.git`\r\n\r\nubi-quarkus-mandrel:22.1-java11\r\n\r\n`mvn clean verify -Dnative -Dall-modules -pl sql-db/vertx-sql -Dit.test=OracleHandlerIT -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel:22.1-java11`\r\n\r\nubi-quarkus-native-image:22.1-java11\r\n\r\n`mvn clean verify -Dnative -Dall-modules -pl sql-db/vertx-sql -Dit.test=OracleHandlerIT -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-native-image:22.1-java11`\r\n\r\nOr you can have a look these logs: https://github.com/quarkus-qe/quarkus-test-suite/runs/7757069279?check_suite_focus=true\r\n\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk version \"11.0.16\" 2022-07-19 OpenJDK Runtime Environment Temurin-11.0.16+8 (build 11.0.16+8) OpenJDK 64-Bit Server VM Temurin-11.0.16+8 (build 11.0.16+8, mixed mode)\r\n\r\n### GraalVM version (if different from Java)\r\n\r\nubi-quarkus-mandrel:22.1-java11 && ubi-quarkus-native-image:22.1-java11\r\n\r\n### Quarkus version or git rev\r\n\r\n_No response_\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27246/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
