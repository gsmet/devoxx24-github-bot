{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23534",
  "id": 1127819518,
  "node_id": "I_kwDOCFbutM5DOSj-",
  "number": 23534,
  "title": "RolesAllowed overrides OpenAPI definitions for 401 and 403 responses",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1283619446,
      "node_id": "MDU6TGFiZWwxMjgzNjE5NDQ2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/smallrye",
      "name": "area/smallrye",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1336727006,
      "node_id": "MDU6TGFiZWwxMzM2NzI3MDA2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/openapi",
      "name": "area/openapi",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/188",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/188",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/188/labels",
    "id": 8014110,
    "node_id": "MI_kwDOCFbutM4Aekke",
    "number": 188,
    "title": "2.9.2.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 21,
    "state": "closed",
    "created_at": "2022-05-24T10:30:38Z",
    "updated_at": "2023-02-21T15:11:33Z",
    "due_on": null,
    "closed_at": "2022-05-25T12:36:21Z"
  },
  "comments": 4,
  "created_at": "2022-02-08T22:20:39Z",
  "updated_at": "2022-05-24T10:32:38Z",
  "closed_at": "2022-05-20T00:32:28Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nI noticed the when I added `APIResponse` annotations to my REST endpoint to document the 401 and 403 responses, the OpenAPI documentation overrides my descriptions, and instead shows \"Not Authorized\" (401) and \"Not Allowed\" (403).  I've traced this down to using the `RolesAllowed` annotation.  If I use `Authenticated`, or no annotation at all, then the documentation reflects the `APIResponse` annotations.\n\n### Expected behavior\n\nOpenAPI documentation should be using the provided `APIResponse` annotations to document the 401 and 403 endpoint responses.\n\n### Actual behavior\n\nOpenAPI documentation is using hard-coded \"Not Authorized\" and \"Not Allowed\" response descriptions for the 401 and 403 response status codes.  This appears to be coming from https://github.com/quarkusio/quarkus/blob/e21e338d19ef3d15e2eec07cd2fd613a76375565/extensions/smallrye-openapi/deployment/src/main/java/io/quarkus/smallrye/openapi/deployment/filter/AutoRolesAllowedFilter.java#L80\n\n### How to Reproduce?\n\nSee attached reproducer.  \r\n\r\n1. Run in dev mode (./mvnw clean compile quarkus:dev)\r\n2. check the OpenAPI documentation at http://localhost:8080/q/openapi.json\r\n3. Note that the 401 and 403 documentation use the references\r\n4. Change the GreetingResource class to use the RolesAllowed annotation (either at the class or method level, doesn't matter)\r\n5. refresh the OpenAPI documentation\r\n6. Note that the 401 and 403 documentation is now ignoring the references, and is instead hard-coded to \"Not Authorized\" and \"Not Allowed\"\n\n### Output of `uname -a` or `ver`\n\nLinux laverne 5.11.0-40-generic #44~20.04.2-Ubuntu SMP Tue Oct 26 18:07:44 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n\n### Output of `java -version`\n\nopenjdk version \"11.0.13\" 2021-10-19\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.7.1.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23534/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
