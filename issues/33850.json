{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33850",
  "id": 1743923540,
  "node_id": "I_kwDOCFbutM5n8ilU",
  "number": 33850,
  "title": "Native, Unresolved type io.opentelemetry.api.trace.Tracer",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1283619446,
      "node_id": "MDU6TGFiZWwxMjgzNjE5NDQ2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/smallrye",
      "name": "area/smallrye",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2236031412,
      "node_id": "MDU6TGFiZWwyMjM2MDMxNDEy",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/tracing",
      "name": "area/tracing",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2260340367,
      "node_id": "MDU6TGFiZWwyMjYwMzQwMzY3",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/mandrel",
      "name": "area/mandrel",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 2,
  "created_at": "2023-06-06T13:51:51Z",
  "updated_at": "2023-06-07T09:46:07Z",
  "closed_at": "2023-06-07T09:46:07Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nI am unable to built this app:\r\nhttps://github.com/Karm/dev-null/tree/main/code-with-quarkus_3\r\n\r\nwith `quay.io/quarkus/ubi-quarkus-mandrel-builder-image:22.3.2.1-Final-java17` builder image.\n\n### Expected behavior\n\nApp builds.\n\n### Actual behavior\n\n```\r\n[INFO] [io.quarkus.deployment.pkg.steps.NativeImageBuildStep] Running Quarkus native-image plugin on native-image 22.3.2.1-Final Mandrel Distribution (Java Version 17.0.7+7)\r\n[INFO] [io.quarkus.deployment.pkg.steps.NativeImageBuildRunner] docker run --env LANG=C --rm --user 1000:1000 -v /home/karm/workspaceRH/dev-null/code-with-quarkus_3/target/build-perf-karm-1.0.0-native-image-source-jar:/project:z --name build-native-ryBut quay.io/quarkus/ubi-quarkus-mandrel-builder-image:22.3.2.1-Final-java17 -J-DCoordinatorEnvironmentBean.transactionStatusManagerEnable=false -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager -J-Dsun.nio.ch.maxUpdateArraySize=100 -J-Dlogging.initial-configurator.min-level=500 -J-Dvertx.logger-delegate-factory-class-name=io.quarkus.vertx.core.runtime.VertxLogDelegateFactory -J-Dvertx.disableDnsResolver=true -J-Dio.netty.leakDetection.level=DISABLED -J-Dio.netty.allocator.maxOrder=3 -J-Duser.language=en -J-Duser.country=US -J-Dfile.encoding=UTF-8 --features=org.hibernate.graalvm.internal.GraalVMStaticFeature,io.quarkus.caffeine.runtime.graal.CacheConstructorsFeature,io.quarkus.hibernate.orm.runtime.graal.DisableLoggingFeature,io.quarkus.hibernate.validator.runtime.DisableLoggingFeature,io.quarkus.runner.Feature,io.quarkus.runtime.graal.DisableLoggingFeature -J--add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED -J--add-opens=java.base/java.text=ALL-UNNAMED -J--add-opens=java.base/java.io=ALL-UNNAMED -J--add-opens=java.base/java.lang.invoke=ALL-UNNAMED -J--add-opens=java.base/java.util=ALL-UNNAMED -H:+CollectImageBuildStatistics -H:ImageBuildStatisticsFile=build-perf-karm-1.0.0-runner-timing-stats.json -H:BuildOutputJSONFile=build-perf-karm-1.0.0-runner-build-output-stats.json -H:BuildOutputJSONFile=quarkus.json -H:+AllowFoldMethods -J-Djava.awt.headless=true --no-fallback --link-at-build-time -H:+ReportExceptionStackTraces -H:-AddAllCharsets --enable-url-protocols=http,https -H:-UseServiceLoaderFeature -H:+StackTrace -J--add-exports=org.graalvm.sdk/org.graalvm.nativeimage.impl=ALL-UNNAMED --exclude-config io\\.netty\\.netty-codec /META-INF/native-image/io\\.netty/netty-codec/generated/handlers/reflect-config\\.json --exclude-config io\\.netty\\.netty-handler /META-INF/native-image/io\\.netty/netty-handler/generated/handlers/reflect-config\\.json build-perf-karm-1.0.0-runner -jar build-perf-karm-1.0.0-runner.jar\r\n========================================================================================================================\r\nGraalVM Native Image: Generating 'build-perf-karm-1.0.0-runner' (executable)...\r\n========================================================================================================================\r\n[1/7] Initializing...                                                                                   (16.9s @ 0.45GB)\r\n Version info: 'GraalVM 22.3.2.1-Final Java 17 Mandrel Distribution'\r\n Java version info: '17.0.7+7'\r\n C compiler: gcc (redhat, x86_64, 8.5.0)\r\n Garbage collector: Serial GC\r\n 8 user-specific feature(s)\r\n - com.oracle.svm.thirdparty.gson.GsonFeature\r\n - io.quarkus.caffeine.runtime.graal.CacheConstructorsFeature\r\n - io.quarkus.hibernate.orm.runtime.graal.DisableLoggingFeature: Disables INFO logging during the analysis phase\r\n - io.quarkus.hibernate.validator.runtime.DisableLoggingFeature: Disables INFO logging during the analysis phase for the [org.hibernate.validator.internal.util.Version] categories\r\n - io.quarkus.runner.Feature: Auto-generated class by Quarkus from the existing extensions\r\n - io.quarkus.runtime.graal.DisableLoggingFeature: Disables INFO logging during the analysis phase\r\n - org.eclipse.angus.activation.nativeimage.AngusActivationFeature\r\n - org.hibernate.graalvm.internal.GraalVMStaticFeature: Hibernate ORM's static reflection registrations for GraalVM\r\n[2/7] Performing analysis...  [*]                                                                       (73.5s @ 2.90GB)\r\n  26,566 (92.31%) of 28,779 classes reachable\r\n  36,589 (64.14%) of 57,046 fields reachable\r\n 119,147 (56.69%) of 210,167 methods reachable\r\n     977 classes,   549 fields, and 4,642 methods registered for reflection\r\n\r\n3 fatal errors detected:\r\nFatal error: com.oracle.graal.pointsto.util.AnalysisError$ParsingError: Error encountered while parsing io.smallrye.graphql.cdi.tracing.TracingService.errorExecute(io.smallrye.graphql.api.Context, java.lang.Throwable) \r\nParsing context:\r\n   at io.smallrye.graphql.cdi.tracing.TracingService.errorExecute(TracingService.java:63)\r\n   at io.smallrye.graphql.execution.event.EventEmitter.fireOnExecuteError(EventEmitter.java:95)\r\n   at io.smallrye.graphql.execution.ExecutionService.execute(ExecutionService.java:191)\r\n   at io.smallrye.graphql.execution.ExecutionService.executeAsync(ExecutionService.java:119)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.doRequest(SmallRyeGraphQLExecutionHandler.java:325)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.handleGet(SmallRyeGraphQLExecutionHandler.java:139)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.doHandle(SmallRyeGraphQLExecutionHandler.java:88)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handleWithIdentity(SmallRyeGraphQLAbstractHandler.java:95)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handle(SmallRyeGraphQLAbstractHandler.java:76)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handle(SmallRyeGraphQLAbstractHandler.java:30)\r\n   at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)\r\n   at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60)\r\n   at io.vertx.core.impl.future.FutureImpl.addListener(FutureImpl.java:196)\r\n   at io.vertx.core.impl.future.PromiseImpl.addListener(PromiseImpl.java:23)\r\n   at io.vertx.core.impl.future.FutureBase.compose(FutureBase.java:84)\r\n   at io.vertx.core.impl.future.PromiseImpl.compose(PromiseImpl.java:23)\r\n   at io.vertx.core.Future.compose(Future.java:208)\r\n   at io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:750)\r\n   at io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:755)\r\n   at io.vertx.mutiny.core.Vertx.lambda$undeploy$8(Vertx.java:573)\r\n   at io.vertx.mutiny.core.Vertx$$Lambda$1446/0x00000007c2806c18.accept(Unknown Source)\r\n   at io.smallrye.mutiny.vertx.AsyncResultUni.subscribe(AsyncResultUni.java:31)\r\n   at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n   at io.smallrye.mutiny.operators.uni.UniBlockingAwait.await(UniBlockingAwait.java:60)\r\n   at io.smallrye.mutiny.groups.UniAwait.atMost(UniAwait.java:65)\r\n   at io.smallrye.mutiny.groups.UniAwait.indefinitely(UniAwait.java:46)\r\n   at io.quarkus.vertx.runtime.VertxProducer.undeployVerticles(VertxProducer.java:73)\r\n   at io.quarkus.vertx.runtime.VertxProducer_Observer_undeployVerticles_cd61570c529f4f70bf1e54f20403d3c90e4bbc75.notify(Unknown Source)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:346)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:334)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:263)\r\n   at io.quarkus.arc.impl.ArcContainerImpl.shutdown(ArcContainerImpl.java:402)\r\n   at io.quarkus.arc.Arc.shutdown(Arc.java:72)\r\n   at io.quarkus.arc.runtime.ArcRecorder$1.run(ArcRecorder.java:53)\r\n   at java.lang.Shutdown.runHooks(Shutdown.java:130)\r\n   at java.lang.Shutdown.shutdown(Shutdown.java:185)\r\n   at com.oracle.svm.core.jdk.RuntimeSupport.shutdown(RuntimeSupport.java:154)\r\n\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.AnalysisError.parsingError(AnalysisError.java:153)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:104)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.ensureFlowsGraphCreated(MethodTypeFlow.java:83)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.getOrCreateMethodFlowsGraph(MethodTypeFlow.java:65)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.typestate.DefaultVirtualInvokeTypeFlow.onObservedUpdate(DefaultVirtualInvokeTypeFlow.java:109)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.TypeFlow.update(TypeFlow.java:562)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.PointsToAnalysis$1.run(PointsToAnalysis.java:488)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.executeCommand(CompletionExecutor.java:193)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.lambda$executeService$0(CompletionExecutor.java:177)\r\n\tat java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1395)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\nCaused by: org.graalvm.compiler.java.BytecodeParser$BytecodeParserError: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Span. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat parsing io.smallrye.graphql.cdi.tracing.TracingService.errorExecute(TracingService.java:63)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.throwParserError(BytecodeParser.java:2518)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.throwParserError(SharedGraphBuilderPhase.java:110)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3393)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.handleBytecodeBlock(BytecodeParser.java:3345)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBlock(BytecodeParser.java:3190)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.build(BytecodeParser.java:1138)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.buildRootMethod(BytecodeParser.java:1030)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.GraphBuilderPhase$Instance.run(GraphBuilderPhase.java:97)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase.run(SharedGraphBuilderPhase.java:84)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.run(Phase.java:49)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.BasePhase.apply(BasePhase.java:446)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:42)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:38)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.AnalysisParsedGraph.parseBytecode(AnalysisParsedGraph.java:135)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.meta.AnalysisMethod.ensureGraphParsed(AnalysisMethod.java:685)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.parse(MethodTypeFlowBuilder.java:171)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.apply(MethodTypeFlowBuilder.java:349)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:93)\r\n\t... 13 more\r\nCaused by: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Span. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.reportUnresolvedElement(SharedGraphBuilderPhase.java:333)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedType(SharedGraphBuilderPhase.java:288)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedCheckCast(SharedGraphBuilderPhase.java:249)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genCheckCast(BytecodeParser.java:4327)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genCheckCast(BytecodeParser.java:4320)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBytecode(BytecodeParser.java:5296)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3385)\r\n\t... 28 more\r\nFatal error: com.oracle.graal.pointsto.util.AnalysisError$ParsingError: Error encountered while parsing io.smallrye.graphql.cdi.tracing.TracingService.afterExecute(io.smallrye.graphql.api.Context) \r\nParsing context:\r\n   at io.smallrye.graphql.cdi.tracing.TracingService.afterExecute(TracingService.java:52)\r\n   at io.smallrye.graphql.execution.event.EventEmitter.fireAfterExecute(EventEmitter.java:102)\r\n   at io.smallrye.graphql.execution.ExecutionService.notifyAndWrite(ExecutionService.java:246)\r\n   at io.smallrye.graphql.execution.ExecutionService.lambda$writeAsync$1(ExecutionService.java:220)\r\n   at io.smallrye.graphql.execution.ExecutionService$$Lambda$2158/0x00000007c2916228.accept(Unknown Source)\r\n   at io.smallrye.context.impl.wrappers.ContextualConsumer1.accept(ContextualConsumer1.java:20)\r\n   at io.smallrye.mutiny.vertx.AsyncResultUni.subscribe(AsyncResultUni.java:31)\r\n   at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n   at io.smallrye.mutiny.operators.uni.UniBlockingAwait.await(UniBlockingAwait.java:60)\r\n   at io.smallrye.mutiny.groups.UniAwait.atMost(UniAwait.java:65)\r\n   at io.smallrye.mutiny.groups.UniAwait.indefinitely(UniAwait.java:46)\r\n   at io.quarkus.vertx.runtime.VertxProducer.undeployVerticles(VertxProducer.java:73)\r\n   at io.quarkus.vertx.runtime.VertxProducer_Observer_undeployVerticles_cd61570c529f4f70bf1e54f20403d3c90e4bbc75.notify(Unknown Source)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:346)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:334)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:263)\r\n   at io.quarkus.arc.impl.ArcContainerImpl.shutdown(ArcContainerImpl.java:402)\r\n   at io.quarkus.arc.Arc.shutdown(Arc.java:72)\r\n   at io.quarkus.arc.runtime.ArcRecorder$1.run(ArcRecorder.java:53)\r\n   at java.lang.Shutdown.runHooks(Shutdown.java:130)\r\n   at java.lang.Shutdown.shutdown(Shutdown.java:185)\r\n   at com.oracle.svm.core.jdk.RuntimeSupport.shutdown(RuntimeSupport.java:154)\r\n\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.AnalysisError.parsingError(AnalysisError.java:153)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:104)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.ensureFlowsGraphCreated(MethodTypeFlow.java:83)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.getOrCreateMethodFlowsGraph(MethodTypeFlow.java:65)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.typestate.DefaultVirtualInvokeTypeFlow.onObservedUpdate(DefaultVirtualInvokeTypeFlow.java:109)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.TypeFlow.update(TypeFlow.java:562)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.PointsToAnalysis$1.run(PointsToAnalysis.java:488)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.executeCommand(CompletionExecutor.java:193)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.lambda$executeService$0(CompletionExecutor.java:177)\r\n\tat java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1395)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\nCaused by: org.graalvm.compiler.java.BytecodeParser$BytecodeParserError: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Span. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat parsing io.smallrye.graphql.cdi.tracing.TracingService.afterExecute(TracingService.java:52)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.throwParserError(BytecodeParser.java:2518)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.throwParserError(SharedGraphBuilderPhase.java:110)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3393)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.handleBytecodeBlock(BytecodeParser.java:3345)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBlock(BytecodeParser.java:3190)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.build(BytecodeParser.java:1138)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.buildRootMethod(BytecodeParser.java:1030)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.GraphBuilderPhase$Instance.run(GraphBuilderPhase.java:97)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase.run(SharedGraphBuilderPhase.java:84)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.run(Phase.java:49)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.BasePhase.apply(BasePhase.java:446)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:42)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:38)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.AnalysisParsedGraph.parseBytecode(AnalysisParsedGraph.java:135)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.meta.AnalysisMethod.ensureGraphParsed(AnalysisMethod.java:685)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.parse(MethodTypeFlowBuilder.java:171)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.apply(MethodTypeFlowBuilder.java:349)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:93)\r\n\t... 13 more\r\nCaused by: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Span. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.reportUnresolvedElement(SharedGraphBuilderPhase.java:333)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedType(SharedGraphBuilderPhase.java:288)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedCheckCast(SharedGraphBuilderPhase.java:249)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genCheckCast(BytecodeParser.java:4327)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genCheckCast(BytecodeParser.java:4320)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBytecode(BytecodeParser.java:5296)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3385)\r\n\t... 28 more\r\nFatal error: com.oracle.graal.pointsto.util.AnalysisError$ParsingError: Error encountered while parsing io.smallrye.graphql.cdi.tracing.TracingService.beforeExecute(io.smallrye.graphql.api.Context) \r\nParsing context:\r\n   at io.smallrye.graphql.cdi.tracing.TracingService.beforeExecute(TracingService.java:38)\r\n   at io.smallrye.graphql.execution.event.EventEmitter.fireBeforeExecute(EventEmitter.java:89)\r\n   at io.smallrye.graphql.execution.ExecutionService.execute(ExecutionService.java:179)\r\n   at io.smallrye.graphql.execution.ExecutionService.executeAsync(ExecutionService.java:119)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.doRequest(SmallRyeGraphQLExecutionHandler.java:325)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.handleGet(SmallRyeGraphQLExecutionHandler.java:139)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLExecutionHandler.doHandle(SmallRyeGraphQLExecutionHandler.java:88)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handleWithIdentity(SmallRyeGraphQLAbstractHandler.java:95)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handle(SmallRyeGraphQLAbstractHandler.java:76)\r\n   at io.quarkus.smallrye.graphql.runtime.SmallRyeGraphQLAbstractHandler.handle(SmallRyeGraphQLAbstractHandler.java:30)\r\n   at io.vertx.core.impl.future.FutureImpl$3.onSuccess(FutureImpl.java:141)\r\n   at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60)\r\n   at io.vertx.core.impl.future.FutureImpl.addListener(FutureImpl.java:196)\r\n   at io.vertx.core.impl.future.PromiseImpl.addListener(PromiseImpl.java:23)\r\n   at io.vertx.core.impl.future.FutureBase.compose(FutureBase.java:84)\r\n   at io.vertx.core.impl.future.PromiseImpl.compose(PromiseImpl.java:23)\r\n   at io.vertx.core.Future.compose(Future.java:208)\r\n   at io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:750)\r\n   at io.vertx.core.impl.VertxImpl.undeploy(VertxImpl.java:755)\r\n   at io.vertx.mutiny.core.Vertx.lambda$undeploy$8(Vertx.java:573)\r\n   at io.vertx.mutiny.core.Vertx$$Lambda$1446/0x00000007c2806c18.accept(Unknown Source)\r\n   at io.smallrye.mutiny.vertx.AsyncResultUni.subscribe(AsyncResultUni.java:31)\r\n   at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n   at io.smallrye.mutiny.operators.uni.UniBlockingAwait.await(UniBlockingAwait.java:60)\r\n   at io.smallrye.mutiny.groups.UniAwait.atMost(UniAwait.java:65)\r\n   at io.smallrye.mutiny.groups.UniAwait.indefinitely(UniAwait.java:46)\r\n   at io.quarkus.vertx.runtime.VertxProducer.undeployVerticles(VertxProducer.java:73)\r\n   at io.quarkus.vertx.runtime.VertxProducer_Observer_undeployVerticles_cd61570c529f4f70bf1e54f20403d3c90e4bbc75.notify(Unknown Source)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:346)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:334)\r\n   at io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:263)\r\n   at io.quarkus.arc.impl.ArcContainerImpl.shutdown(ArcContainerImpl.java:402)\r\n   at io.quarkus.arc.Arc.shutdown(Arc.java:72)\r\n   at io.quarkus.arc.runtime.ArcRecorder$1.run(ArcRecorder.java:53)\r\n   at java.lang.Shutdown.runHooks(Shutdown.java:130)\r\n   at java.lang.Shutdown.shutdown(Shutdown.java:185)\r\n   at com.oracle.svm.core.jdk.RuntimeSupport.shutdown(RuntimeSupport.java:154)\r\n\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.AnalysisError.parsingError(AnalysisError.java:153)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:104)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.ensureFlowsGraphCreated(MethodTypeFlow.java:83)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.getOrCreateMethodFlowsGraph(MethodTypeFlow.java:65)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.typestate.DefaultVirtualInvokeTypeFlow.onObservedUpdate(DefaultVirtualInvokeTypeFlow.java:109)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.TypeFlow.update(TypeFlow.java:562)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.PointsToAnalysis$1.run(PointsToAnalysis.java:488)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.executeCommand(CompletionExecutor.java:193)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.util.CompletionExecutor.lambda$executeService$0(CompletionExecutor.java:177)\r\n\tat java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1395)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\nCaused by: org.graalvm.compiler.java.BytecodeParser$BytecodeParserError: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Tracer. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat parsing io.smallrye.graphql.cdi.tracing.TracingService.beforeExecute(TracingService.java:39)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.throwParserError(BytecodeParser.java:2518)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.throwParserError(SharedGraphBuilderPhase.java:110)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3393)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.handleBytecodeBlock(BytecodeParser.java:3345)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBlock(BytecodeParser.java:3190)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.build(BytecodeParser.java:1138)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.buildRootMethod(BytecodeParser.java:1030)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.GraphBuilderPhase$Instance.run(GraphBuilderPhase.java:97)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase.run(SharedGraphBuilderPhase.java:84)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.run(Phase.java:49)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.BasePhase.apply(BasePhase.java:446)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:42)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.phases.Phase.apply(Phase.java:38)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.AnalysisParsedGraph.parseBytecode(AnalysisParsedGraph.java:135)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.meta.AnalysisMethod.ensureGraphParsed(AnalysisMethod.java:685)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.parse(MethodTypeFlowBuilder.java:171)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlowBuilder.apply(MethodTypeFlowBuilder.java:349)\r\n\tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.flow.MethodTypeFlow.createFlowsGraph(MethodTypeFlow.java:93)\r\n\t... 13 more\r\nCaused by: com.oracle.graal.pointsto.constraints.UnresolvedElementException: Discovered unresolved type during parsing: io.opentelemetry.api.trace.Tracer. This error is reported at image build time because class io.smallrye.graphql.cdi.tracing.TracingService is registered for linking at image build time by command line\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.reportUnresolvedElement(SharedGraphBuilderPhase.java:333)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedType(SharedGraphBuilderPhase.java:288)\r\n------------------------------------------------------------------------------------------------------------------------\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedMethod(SharedGraphBuilderPhase.java:316)\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.phases.SharedGraphBuilderPhase$SharedBytecodeParser.handleUnresolvedInvoke(SharedGraphBuilderPhase.java:279)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genInvokeInterface(BytecodeParser.java:1701)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genInvokeInterface(BytecodeParser.java:1690)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.processBytecode(BytecodeParser.java:5289)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.iterateBytecodesForBlock(BytecodeParser.java:3385)\r\n\t... 28 more\r\n                        5.2s (5.6% of total time) in 28 GCs | Peak RSS: 6.65GB | CPU load: 6.30\r\n========================================================================================================================\r\nFailed generating 'build-perf-karm-1.0.0-runner' after 1m 30s.\r\nError: Image build request failed with exit status 1\r\n\r\n```\n\n### How to Reproduce?\n\nApp:\r\nhttps://github.com/Karm/dev-null/tree/main/code-with-quarkus_3\r\n\r\nCommand:\r\n```\r\n./mvnw clean package -Pnative \r\n  -Dquarkus.platform.group-id=io.quarkus \r\n  -Dquarkus.platform.version=3.1.0.Final \r\n  -Dquarkus.native.additional-build-args=-H:BuildOutputJSONFile=quarkus.json \r\n  -Dquarkus.native.container-build=true \r\n  -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:22.3.2.1-Final-java17\r\n```\n\n### Output of `uname -a` or `ver`\n\nLinux amd64\n\n### Output of `java -version`\n\nopenjdk 17.0.7 2023-04-18\n\n### GraalVM version (if different from Java)\n\nnative-image 22.3.2.1-Final Mandrel Distribution (Java Version 17.0.7+7)\n\n### Quarkus version or git rev\n\n3.1.0.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nmvn\n\n### Additional information\n\n3.0.4.Final builds just fine, i.e. \r\n\r\n```\r\n$ ./mvnw clean package -Pnative -Dquarkus.platform.group-id=io.quarkus -Dquarkus.platform.version=3.0.4.Final\r\n-Dquarkus.native.additional-build-args=-H:BuildOutputJSONFile=quarkus.json -Dquarkus.native.container-build=true\r\n-Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:22.3.2.1-Final-java17\r\n```",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33850/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
