{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/42514",
  "id": 2463434551,
  "node_id": "I_kwDOCFbutM6S1Qc3",
  "number": 42514,
  "title": "Enum property values not hyphenated anymore in the configuration metadata",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273030910,
      "node_id": "MDU6TGFiZWwxMjczMDMwOTEw",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/config",
      "name": "area/config",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/341",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/341",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/341/labels",
    "id": 11324154,
    "node_id": "MI_kwDOCFbutM4ArMr6",
    "number": 341,
    "title": "3.14.0.CR1",
    "description": "",
    "creator": {
      "login": "quarkusbot",
      "id": 61254497,
      "node_id": "MDQ6VXNlcjYxMjU0NDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/61254497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quarkusbot",
      "html_url": "https://github.com/quarkusbot",
      "followers_url": "https://api.github.com/users/quarkusbot/followers",
      "following_url": "https://api.github.com/users/quarkusbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/quarkusbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarkusbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarkusbot/subscriptions",
      "organizations_url": "https://api.github.com/users/quarkusbot/orgs",
      "repos_url": "https://api.github.com/users/quarkusbot/repos",
      "events_url": "https://api.github.com/users/quarkusbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarkusbot/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 192,
    "state": "closed",
    "created_at": "2024-07-17T08:04:03Z",
    "updated_at": "2024-08-29T19:11:05Z",
    "due_on": null,
    "closed_at": "2024-08-14T11:26:07Z"
  },
  "comments": 12,
  "created_at": "2024-08-13T13:59:51Z",
  "updated_at": "2024-08-14T06:32:28Z",
  "closed_at": "2024-08-14T06:32:24Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nWe have a config property in Quarkus CXF defined as follows:\r\n\r\n```java\r\n    @WithDefault(\"Keep-Alive\")\r\n    @WithConverter(ConnectionTypeConverter.class)\r\n    public ConnectionType connection();\r\n```\r\n\r\nBefore the recent refactoring of `quarkus-extension-processor`, the metadata was produced with hyphenated enum values `target/asciidoc/generated/config/all-configuration-roots-generated-doc/io.quarkiverse.cxf.CxfConfig`:\r\n\r\n```json\r\n  {\r\n    \"configDocKey\": {\r\n      \"type\": \"org.apache.cxf.transports.http.configuration.ConnectionType\",\r\n      \"key\": \"quarkus.cxf.client.\\\"client-name\\\".connection\",\r\n      \"additionalKeys\": [],\r\n      \"configDoc\": \"The connection disposition. If close the connection to the server is closed after each request/response dialog. If\\nKeep-Alive the client requests the server to keep the connection open, and if the server honors the keep alive request,\\nthe connection is reused. Many servers and proxies do not honor keep-alive requests.\",\r\n      \"withinAMap\": true,\r\n      \"defaultValue\": \"keep-alive\",\r\n      \"javaDocSiteLink\": \"\",\r\n      \"docMapKey\": \"connection\",\r\n      \"configPhase\": \"RUN_TIME\",\r\n      \"acceptedValues\": [\r\n        \"`close`\",\r\n        \"`keep-alive`\"\r\n      ],\r\n      \"optional\": false,\r\n      \"list\": false,\r\n      \"passThroughMap\": false,\r\n      \"withinAConfigGroup\": true,\r\n      \"topLevelGrouping\": \"quarkus.cxf\",\r\n      \"since\": \"2.2.3\",\r\n      \"environmentVariable\": \"QUARKUS_CXF_CLIENT__CLIENT_NAME__CONNECTION\",\r\n      \"enum\": true\r\n    }\r\n  },\r\n```\r\n\r\nAfter the refactoring, the enum values in `target/quarkus-config-doc/quarkus-config-model.yaml` are present verbatim:\r\n\r\n```yaml\r\n  - !<io.quarkus.annotation.processor.documentation.config.model.ConfigProperty>\r\n    enum: true\r\n    sourceClass: \"io.quarkiverse.cxf.CxfClientConfig\"\r\n    sourceName: \"connection\"\r\n    path: \"quarkus.cxf.client.\\\"client-name\\\".connection\"\r\n    type: \"org.apache.cxf.transports.http.configuration.ConnectionType\"\r\n    phase: \"RUN_TIME\"\r\n    environmentVariable: \"QUARKUS_CXF_CLIENT__CLIENT_NAME__CONNECTION\"\r\n    typeDescription: \"ConnectionType\"\r\n    withinMap: true\r\n    converted: true\r\n    enumAcceptedValues:\r\n      qualifiedName: \"org.apache.cxf.transports.http.configuration.ConnectionType\"\r\n      values:\r\n        CLOSE:\r\n          configValue: \"CLOSE\"\r\n        KEEP_ALIVE:\r\n          configValue: \"KEEP_ALIVE\"\r\n    defaultValue: \"Keep-Alive\"\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nThe enum values should be produced hyphenated, same as before quarkus-extension-processor refactoring.\r\n\r\nI am aware of the following note in ConfigResolver\r\n\r\nhttps://github.com/quarkusio/quarkus/blob/baf77db720ab5794a1b152c87a01df3c291f864e/core/processor/src/main/java/io/quarkus/annotation/processor/documentation/config/resolver/ConfigResolver.java#L155-L156\r\n\r\nHowever my example proves that the rule to decide about hyphenation must have been complexer than just \"if the property has a converter\"",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/42514/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
