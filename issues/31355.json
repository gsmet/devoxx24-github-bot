{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/31355",
  "id": 1595604712,
  "node_id": "I_kwDOCFbutM5fGv7o",
  "number": 31355,
  "title": "[Regression] Very slow startup in dev mode when the Kubernetes extension is present",
  "labels": [
    {
      "id": 1273039603,
      "node_id": "MDU6TGFiZWwxMjczMDM5NjAz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/devmode",
      "name": "area/devmode",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1654772125,
      "node_id": "MDU6TGFiZWwxNjU0NzcyMTI1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kubernetes",
      "name": "area/kubernetes",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/237",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/237",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/237/labels",
    "id": 9053771,
    "node_id": "MI_kwDOCFbutM4AiiZL",
    "number": 237,
    "title": "2.16.4.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 50,
    "state": "closed",
    "created_at": "2023-02-16T13:34:07Z",
    "updated_at": "2023-05-09T09:33:45Z",
    "due_on": null,
    "closed_at": "2023-03-02T15:51:14Z"
  },
  "comments": 10,
  "created_at": "2023-02-22T18:32:57Z",
  "updated_at": "2023-03-07T23:18:41Z",
  "closed_at": "2023-02-28T16:00:48Z",
  "active_lock_reason": null,
  "body": "I'm pretty sure this is a regression as my project wasn't as slow to start in dev mode before.\r\n\r\nNote that my project uses the `quarkus-openshift` extension to deploy the project to an OpenShift cluster and does not use the quarkus-kubernetes-client extension directly.\r\n\r\nThere are two problems:\r\n- the first one is that the startup of the Dev Services is slow even if they end up being not started. This is because  https://github.com/quarkusio/quarkus/blob/main/extensions/kubernetes-client/deployment-internal/src/main/java/io/quarkus/kubernetes/client/deployment/DevServicesKubernetesProcessor.java#L177\r\nis slow (line is `var autoConfigMasterUrl = Config.autoConfigure(null).getMasterUrl();` as I write these lines). Also I'm wondering if the Dev Services for Kubernetes should be part of the internal extension shared between `quarkus-kubernetes` and `quarkus-kubernetes-client`? I would have expected them to be used for testing applications based on the Kubernetes Client?\r\n\r\n![Screenshot 2023-02-22 at 19-28-53 Screenshot](https://user-images.githubusercontent.com/1279749/220723006-9720dcda-9995-4665-bcda-12449a4dd17a.png)\r\n\r\n- the second one is that the KubernetesProcessor is extremely slow too, even when simply starting my app in dev mode and not actually deploying anything. AFAICS it boils down to the TopologicalSort code being extremely slow but I'm not sure it's even worth executing all this if we are not deploying something? (Note that the TopologicalSort slowness will need to be fixed anyway)\r\n\r\n![Screenshot 2023-02-22 at 19-26-10 Screenshot](https://user-images.githubusercontent.com/1279749/220723091-c17a9f56-fac4-48c6-a5c6-87a3c1172d51.png)\r\n\r\nFull profile is attached here: \r\n[startup-cpu-profile.zip](https://github.com/quarkusio/quarkus/files/10807183/startup-cpu-profile.zip)\r\n",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/31355/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
