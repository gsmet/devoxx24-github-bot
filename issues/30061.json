{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/30061",
  "id": 1509513763,
  "node_id": "I_kwDOCFbutM5Z-Voj",
  "number": 30061,
  "title": "Adding Kotlin Tests Breaks Kotlin/Java project",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273039603,
      "node_id": "MDU6TGFiZWwxMjczMDM5NjAz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/devmode",
      "name": "area/devmode",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 1287515315,
      "node_id": "MDU6TGFiZWwxMjg3NTE1MzE1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kotlin",
      "name": "area/kotlin",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/226",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/226",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/226/labels",
    "id": 8824890,
    "node_id": "MI_kwDOCFbutM4Ahqg6",
    "number": 226,
    "title": "2.15.3.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 31,
    "state": "closed",
    "created_at": "2023-01-05T16:59:20Z",
    "updated_at": "2023-01-10T14:40:28Z",
    "due_on": null,
    "closed_at": "2023-01-10T14:40:28Z"
  },
  "comments": 3,
  "created_at": "2022-12-23T16:12:50Z",
  "updated_at": "2023-01-05T17:00:38Z",
  "closed_at": "2023-01-04T09:19:34Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nI posted a more in-depth description of the issue here last night:\r\n<https://github.com/quarkusio/quarkus/discussions/30049>\r\n\r\nThe summary is: Adding a Kotlin test file breaks `quarkus dev`. Some of my resources mysteriously disappear and aren't available at runtime.\n\n### Expected behavior\n\nI should be able to mix Java and Kotlin code in the same project and have everything work. One of the great advantages of Kotlin is that it's usually easy to gradually introduce it to a project without rewriting everything.\r\n\r\n(read: I'll have a *much* easier time getting my team to adopt this if Java and Kotlin play well together. ðŸ˜„)   \n\n### Actual behavior\n\nAdding a(n empty!) Kotlin test file causes some of my resources to be (silently!) unavailable while running `quarkus dev`.\r\n\r\n\n\n### How to Reproduce?\n\n```\r\n> quarkus version\r\n2.15.1.Final\r\n\r\n> quarkus create app org.acme:rest-example --extension='resteasy-reactive-jackson' --gradle-kotlin-dsl\r\n> cd rest-example\r\n> quarkus dev\r\n\r\n# At this point, the example code works. \r\n# can access http://localhost:8080/hello\r\n\r\n# Save state:\r\n> git init .\r\n> git add .\r\n> git commit -m \"initial code\"\r\n\r\n\r\n> quarkus extension add kotlin\r\n```\r\n\r\nYou'll also need to add Kotlin config to your build.gradle.kts as documented in:\r\n<https://quarkus.io/guides/kotlin#important-gradle-configuration-points>\r\n\r\nNow add a new REST endpoint in Kotlin so we can show how Java/Kotlin code \r\n*should* work together.\r\n\r\n```kotlin\r\n// file: src/main/kotlin/org/acme/KotlinGreeting.kt\r\n\r\npackage org.acme\r\n\r\nimport javax.ws.rs.GET\r\nimport javax.ws.rs.Path\r\nimport javax.ws.rs.Produces\r\nimport javax.ws.rs.core.MediaType\r\n\r\n@Path(\"/hello2\")\r\nclass KotlinGreeting(\r\n    private var javaResource: GreetingResource\r\n) {\r\n    @GET\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    fun hello(): String {\r\n        return \"${javaResource.hello()} -- now in Kotlin!\"\r\n    }\r\n}\r\n```\r\n\r\nVerify this works by running `quarkus dev` and visiting \r\n`http://localhost:8080/hello2`. \r\n\r\n```\r\n> git add .\r\n> git commit -m \"checkpoint: Java + Kotlin working\"\r\n```\r\n\r\nNow add a new \"test\" file.  (No actual test necessary)\r\n\r\n```kotlin\r\n// file: test/kotlin/org/acme/KotlinGreetingTest.kt\r\n\r\npackage org.acme\r\n\r\n// This file left intentionally blank.\r\n```\r\n\r\nOnce again run `quarkus dev`.\r\n\r\nWhile the server starts up without error, neither `/hello` nor `/hello2`\r\nresources are loaded. And there are no errors to let you know something has gone\r\nwrong.\r\n\r\n```\r\n> git add .\r\n> git commit -m \"checkpoint: broken\"\r\n```\r\n\r\nI'll attach the zip file (including git history) here.\r\n\r\n[rest-example.zip](https://github.com/quarkusio/quarkus/files/10296136/rest-example.zip)\r\n\n\n### Output of `uname -a` or `ver`\n\nWindows. :p  But I also originally bumped into this on macOS.\n\n### Output of `java -version`\n\nopenjdk version \"16.0.2\" 2021-07-20\n\n### GraalVM version (if different from Java)\n\nn/a\n\n### Quarkus version or git rev\n\n2.15.1.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nGradle 7.5.1\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30061/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
