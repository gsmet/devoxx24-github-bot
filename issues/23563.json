{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/23563",
  "id": 1128924907,
  "node_id": "I_kwDOCFbutM5DSgbr",
  "number": 23563,
  "title": "Failed to start quarkus due to hibernate-orm datasource related config issue/bug(?)",
  "labels": [
    {
      "id": 1273026509,
      "node_id": "MDU6TGFiZWwxMjczMDI2NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/persistence",
      "name": "area/persistence",
      "color": "FBCA04",
      "default": false,
      "description": "OBSOLETE, DO NOT USE"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 10,
  "created_at": "2022-02-09T19:11:58Z",
  "updated_at": "2022-02-14T10:57:07Z",
  "closed_at": "2022-02-14T10:57:07Z",
  "active_lock_reason": null,
  "body": "Hello, I am just starting with quarkus and just cannot get it started with two defined datasources (postgres, oracle), configured like \r\n(Referring to https://quarkus.io/guides/datasource#other-databases)\r\n\r\n```\r\nquarkus.datasource.a.db-kind=postgresql\r\nquarkus.datasource.a.jdbc.driver=org.postgresql.Driver\r\nquarkus.datasource.a.jdbc.url=jdbc:postgresql://localhost:5432/a\r\nquarkus.datasource.a.username=docker\r\nquarkus.datasource.a.password=docker\r\nquarkus.hibernate-orm.a.packages=my.package.model.a\r\nquarkus.hibernate-orm.a.datasource=a\r\n\r\nquarkus.datasource.b.db-kind=other\r\nquarkus.datasource.b.jdbc.driver=oracle.jdbc.driver.OracleDriver\r\nquarkus.datasource.b.jdbc.url=jdbc:oracle:thin:@****.net:1531:servicename\r\nquarkus.datasource.b.username=docker\r\nquarkus.datasource.b.password=docker\r\nquarkus.hibernate-orm.b.packages=my.package.model.b\r\nquarkus.hibernate-orm.b.dialect=org.hibernate.dialect.OracleDialect\r\nquarkus.hibernate-orm.b.datasource=b\r\n```\r\n\r\nIn the stacktrace I have no clue whats wrong, assuming the warnings are not related.\r\nConsidering `Unable to determine a database type for default datasource` I also tried to remove the name 'a' of the postgres datasource to make it the default datasource but it didn't help.\r\nAny ideas?\r\n\r\n```\r\nConnected to the target VM, address: 'localhost:62811', transport: 'socket'\r\nPress [h] for more options>\r\nTests paused\r\nPress [r] to resume testing, [h] for more options>\r\nPress [r] to resume testing, [o] Toggle test output, [h] for more options>\r\n2022-02-09 19:45:40,266 WARN  [io.qua.dat.dep.dev.DevServicesDatasourceProcessor] (build-16) Unable to determine a database type for default datasource\r\n2022-02-09 19:45:40,270 WARN  [io.qua.hib.orm.dep.HibernateOrmProcessor] (build-25) Could not find a suitable persistence unit for model classes:\r\n\t- io.quarkus.hibernate.orm.panache.PanacheEntity\r\n2022-02-09 19:45:40,286 WARN  [io.qua.dat.dep.dev.DevServicesDatasourceProcessor] (build-16) Unable to start devservices for fips as this datasource type (other) does not support devservices\r\n__  ____  __  _____   ___  __ ____  ______ \r\n --/ __ \\/ / / / _ | / _ \\/ //_/ / / / __/ \r\n -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\\ \\   \r\n--\\___\\_\\____/_/ |_/_/|_/_/|_|\\____/___/   \r\n2022-02-09 19:45:41,935 WARN  [org.hib.dia.Oracle9Dialect] (Quarkus Main Thread) HHH000063: The Oracle9Dialect dialect has been deprecated; use either Oracle9iDialect or Oracle10gDialect instead\r\n2022-02-09 19:45:41,936 WARN  [org.hib.dia.OracleDialect] (Quarkus Main Thread) HHH000064: The OracleDialect dialect has been deprecated; use Oracle8iDialect instead\r\n2022-02-09 19:45:42,011 WARN  [org.hib.map.RootClass] (Quarkus Main Thread) HHH000038: Composite-id class does not override equals(): my.package.model.b.SessionId\r\n2022-02-09 19:45:42,011 WARN  [org.hib.map.RootClass] (Quarkus Main Thread) HHH000039: Composite-id class does not override hashCode(): my.package.model.b.SessionId\r\n2022-02-09 19:45:42,355 WARN  [io.qua.agr.run.AgroalConnectionConfigurer] (Quarkus Main Thread) Agroal does not support detecting if a connection is still usable after an exception for database kind: other\r\n2022-02-09 19:45:42,756 ERROR [io.qua.run.Application] (Quarkus Main Thread) Failed to start application (with profile dev): java.lang.NullPointerException\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.injectRuntimeConfiguration(FastBootHibernatePersistenceProvider.java:379)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(FastBootHibernatePersistenceProvider.java:187)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:65)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\n2022-02-09 19:45:42,758 INFO  [io.qua.dep.dev.IsolatedDevModeMain] (main) Attempting to start live reload endpoint to recover from previous Quarkus startup failure\r\nPress [space] to restart, [e] to edit command line args (currently ''), [r] to resume testing, [o] Toggle test output, [h] for more options>\r\n2022-02-09 19:45:42,820 ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: java.lang.RuntimeException: Failed to start quarkus\r\n\tat io.quarkus.dev.appstate.ApplicationStateNotification.waitForApplicationStart(ApplicationStateNotification.java:51)\r\n\tat io.quarkus.runner.bootstrap.StartupActionImpl.runMainClass(StartupActionImpl.java:122)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.firstStart(IsolatedDevModeMain.java:145)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:456)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:67)\r\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInCl(CuratedApplication.java:150)\r\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInAugmentClassLoader(CuratedApplication.java:106)\r\n\tat io.quarkus.deployment.dev.DevModeMain.start(DevModeMain.java:132)\r\n\tat io.quarkus.deployment.dev.DevModeMain.main(DevModeMain.java:62)\r\nCaused by: java.lang.RuntimeException: Failed to start quarkus\r\n\tat io.quarkus.runner.ApplicationImpl.doStart(Unknown Source)\r\n\tat io.quarkus.runtime.Application.start(Application.java:101)\r\n\tat io.quarkus.runtime.ApplicationLifecycleManager.run(ApplicationLifecycleManager.java:104)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:67)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:41)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:120)\r\n\tat io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat io.quarkus.runner.bootstrap.StartupActionImpl$1.run(StartupActionImpl.java:103)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.RuntimeException: java.lang.NullPointerException\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig.startAll(JPAConfig.java:68)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass.startAll$$superforward1(Unknown Source)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass$$function$$4.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:51)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass.startAll(Unknown Source)\r\n\tat io.quarkus.hibernate.orm.runtime.HibernateOrmRecorder.startAllPersistenceUnits(HibernateOrmRecorder.java:97)\r\n\tat io.quarkus.deployment.steps.HibernateOrmProcessor$startPersistenceUnits1868654632.deploy_0(Unknown Source)\r\n\tat io.quarkus.deployment.steps.HibernateOrmProcessor$startPersistenceUnits1868654632.deploy(Unknown Source)\r\n\t... 13 more\r\nCaused by: java.lang.NullPointerException\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.injectRuntimeConfiguration(FastBootHibernatePersistenceProvider.java:379)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(FastBootHibernatePersistenceProvider.java:187)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:65)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n\t... 1 more\r\n\r\n2022-02-09 19:45:42,820 ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: java.lang.RuntimeException: Failed to start quarkus\r\n\tat io.quarkus.dev.appstate.ApplicationStateNotification.waitForApplicationStart(ApplicationStateNotification.java:51)\r\n\tat io.quarkus.runner.bootstrap.StartupActionImpl.runMainClass(StartupActionImpl.java:122)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.firstStart(IsolatedDevModeMain.java:145)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:456)\r\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:67)\r\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInCl(CuratedApplication.java:150)\r\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInAugmentClassLoader(CuratedApplication.java:106)\r\n\tat io.quarkus.deployment.dev.DevModeMain.start(DevModeMain.java:132)\r\n\tat io.quarkus.deployment.dev.DevModeMain.main(DevModeMain.java:62)\r\nCaused by: java.lang.RuntimeException: Failed to start quarkus\r\n\tat io.quarkus.runner.ApplicationImpl.doStart(Unknown Source)\r\n\tat io.quarkus.runtime.Application.start(Application.java:101)\r\n\tat io.quarkus.runtime.ApplicationLifecycleManager.run(ApplicationLifecycleManager.java:104)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:67)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:41)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:120)\r\n\tat io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat io.quarkus.runner.bootstrap.StartupActionImpl$1.run(StartupActionImpl.java:103)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.RuntimeException: java.lang.NullPointerException\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig.startAll(JPAConfig.java:68)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass.startAll$$superforward1(Unknown Source)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass$$function$$4.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:51)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig_Subclass.startAll(Unknown Source)\r\n\tat io.quarkus.hibernate.orm.runtime.HibernateOrmRecorder.startAllPersistenceUnits(HibernateOrmRecorder.java:97)\r\n\tat io.quarkus.deployment.steps.HibernateOrmProcessor$startPersistenceUnits1868654632.deploy_0(Unknown Source)\r\n\tat io.quarkus.deployment.steps.HibernateOrmProcessor$startPersistenceUnits1868654632.deploy(Unknown Source)\r\n\t... 13 more\r\nCaused by: java.lang.NullPointerException\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.injectRuntimeConfiguration(FastBootHibernatePersistenceProvider.java:379)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(FastBootHibernatePersistenceProvider.java:187)\r\n\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:65)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:138)\r\n\tat io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:54)\r\n\t... 1 more\r\n\r\n\r\n```",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/23563/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
