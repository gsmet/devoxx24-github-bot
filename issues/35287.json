{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/35287",
  "id": 1843252623,
  "node_id": "I_kwDOCFbutM5t3c2P",
  "number": 35287,
  "title": "IllegalStateException: HttpBinderConfiguration was not found",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2236031886,
      "node_id": "MDU6TGFiZWwyMjM2MDMxODg2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/metrics",
      "name": "area/metrics",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2744442223,
      "node_id": "MDU6TGFiZWwyNzQ0NDQyMjIz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-reproducer",
      "name": "triage/needs-reproducer",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for a reproducer."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 5,
  "created_at": "2023-08-09T13:33:15Z",
  "updated_at": "2023-09-04T06:05:58Z",
  "closed_at": "2023-09-04T06:05:57Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nGetting the following error when trying to dev run my app:\r\n\r\n```\r\n09:20:40 [WARN ][                |  |                |     ][io.ne.ut.co.DefaultPromise              |vert.x-acceptor-thread-0  ]():: An exception was thrown by io.vertx.core.net.impl.TCPServerBase$$Lambda$2203/0x00007f72f0c41900.operationComplete(): java.lang.IllegalStateException: HttpBinderConfiguration was not found\r\n\tat io.quarkus.micrometer.runtime.binder.vertx.VertxMeterBinderAdapter.createHttpServerMetrics(VertxMeterBinderAdapter.java:63)\r\n\tat io.vertx.core.http.impl.HttpServerImpl.createMetrics(HttpServerImpl.java:71)\r\n\tat io.vertx.core.net.impl.TCPServerBase.lambda$null$1(TCPServerBase.java:184)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n\tat io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)\r\n\tat io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:97)\r\n\tat io.vertx.core.net.impl.AsyncResolveConnectHelper.lambda$null$1(AsyncResolveConnectHelper.java:61)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n\tat io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)\r\n\tat io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)\r\n\tat io.netty.channel.DefaultChannelPromise.trySuccess(DefaultChannelPromise.java:84)\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe.safeSetSuccess(AbstractChannel.java:990)\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:578)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:600)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:579)\r\n\tat io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973)\r\n\tat io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260)\r\n\tat io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:356)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:426)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:375)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:557)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n```\r\n\r\nHonestly no clue what could be happening, this happens about 50% of runs, and happens on every attempt at a REST call. \r\n\r\nLooks like additionally, the worker threads are being blocked:\r\n\r\n```\r\n2023-08-09 09:25:38,085 WARN  [io.ver.cor.imp.BlockedThreadChecker] (vertx-blocked-thread-checker) Thread Thread[vert.x-worker-thread-1,5,main] has been blocked for 233063 ms, time limit is 60000 ms: io.vertx.core.VertxException: Thread blocked\r\n\tat java.base@17.0.8/jdk.internal.misc.Unsafe.park(Native Method)\r\n\tat java.base@17.0.8/java.util.concurrent.locks.LockSupport.park(LockSupport.java:211)\r\n\tat java.base@17.0.8/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:715)\r\n\tat java.base@17.0.8/java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:938)\r\n\tat java.base@17.0.8/java.util.concurrent.locks.ReentrantLock$Sync.lock(ReentrantLock.java:153)\r\n\tat java.base@17.0.8/java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:322)\r\n\tat io.quarkus.deployment.dev.RuntimeUpdatesProcessor.doScan(RuntimeUpdatesProcessor.java:444)\r\n\tat io.quarkus.deployment.dev.RuntimeUpdatesProcessor.doScan(RuntimeUpdatesProcessor.java:437)\r\n\tat io.quarkus.vertx.http.runtime.devmode.VertxHttpHotReplacementSetup$4.handle(VertxHttpHotReplacementSetup.java:152)\r\n\tat io.quarkus.vertx.http.runtime.devmode.VertxHttpHotReplacementSetup$4.handle(VertxHttpHotReplacementSetup.java:139)\r\n\tat io.vertx.core.impl.ContextBase.lambda$null$0(ContextBase.java:137)\r\n\tat io.vertx.core.impl.ContextBase$$Lambda$2210/0x00007f72f0c46f50.handle(Unknown Source)\r\n\tat io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\r\n\tat io.vertx.core.impl.ContextBase.lambda$executeBlocking$1(ContextBase.java:135)\r\n\tat io.vertx.core.impl.ContextBase$$Lambda$2207/0x00007f72f0c43d78.run(Unknown Source)\r\n\tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base@17.0.8/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nDependencies:\r\n\r\n```\r\ndependencies {\r\n\timplementation enforcedPlatform(\"${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}\")\r\n\timplementation 'io.quarkus:quarkus-resteasy-reactive'\r\n\timplementation 'io.quarkus:quarkus-resteasy-reactive-jackson'\r\n\timplementation 'io.quarkus:quarkus-resteasy-reactive-qute'\r\n\timplementation 'io.quarkus:quarkus-smallrye-openapi'\r\n//\timplementation 'io.quarkus:quarkus-smallrye-jwt'// https://quarkus.io/guides/security-properties\r\n\timplementation 'io.quarkus:quarkus-smallrye-jwt-build'\r\n\timplementation 'io.quarkus:quarkus-smallrye-health'\r\n\timplementation 'io.quarkus:quarkus-smallrye-reactive-messaging-amqp'\r\n\timplementation 'io.quarkus:quarkus-opentelemetry'\r\n\timplementation 'io.quarkus:quarkus-config-yaml'\r\n\timplementation 'io.quarkus:quarkus-qute'\r\n\timplementation 'io.quarkus:quarkus-mongodb-panache'\r\n\timplementation 'io.quarkus:quarkus-hibernate-validator'\r\n\timplementation 'io.quarkus:quarkus-elytron-security'\r\n\timplementation 'io.quarkus:quarkus-micrometer-registry-prometheus'\r\n\timplementation 'io.quarkus:quarkus-container-image-jib'\r\n\timplementation 'io.quarkus:quarkus-rest-client-reactive'\r\n\timplementation 'io.quarkus:quarkus-rest-client-reactive-jackson'\r\n\timplementation 'io.quarkus:quarkus-mailer'\r\n\timplementation 'io.quarkus:quarkus-scheduler'\r\n\timplementation 'io.quarkus:quarkus-oidc'\r\n//\timplementation 'io.quarkus:quarkus-oidc-client-reactive-filter'\r\n//\timplementation 'io.quarkus:quarkus-oidc-token-propagation-reactive'\r\n//\timplementation 'io.quarkus:quarkus-keycloak-admin-client-reactive'\r\n\r\n\t//implementation 'io.opentelemetry.instrumentation:opentelemetry-mongo-3.1:1.24.0-alpha'\r\n\t// https://quarkus.io/guides/logging\r\n\timplementation 'org.jboss.slf4j:slf4j-jboss-logmanager'\r\n\r\n\timplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'\r\n\timplementation 'com.fasterxml.jackson.module:jackson-module-blackbird'\r\n\r\n\r\n\timplementation group: 'org.jsoup', name: 'jsoup', version: '1.16.1'\r\n\timplementation 'org.passay:passay:1.6.3'\r\n\timplementation 'com.itextpdf:html2pdf:5.0.0'\r\n\r\n\t//webjars\r\n\timplementation 'org.webjars:jquery:3.6.4'\r\n\timplementation 'org.webjars:bootstrap:5.3.0'\r\n//\timplementation 'org.webjars.npm:bootstrap-icons:1.10.2' //doesn't contain everything needed\r\n//    implementation 'org.webjars:js-cookie:2.2.1' //out of date\r\n//    implementation 'org.webjars:spin-js:2.1.0'\r\n\r\n//\timplementation 'tech.epic-breakfast-productions.openQuarterMaster.lib:open-qm-lib-core:1.0.62'\r\n\timplementation 'tech.epic-breakfast-productions.openQuarterMaster.lib:open-qm-lib-moduleDriver:1.0.2-DEV'\r\n\r\n\t// https://mvnrepository.com/artifact/tech.units/indriya\r\n\t//     https://unitsofmeasurement.gitbook.io/uom-guide/getting-started/getting-started-with-indriya\r\n\timplementation 'tech.units:indriya:2.2'\r\n\timplementation 'systems.uom:systems-common:2.1'\r\n\t// https://mvnrepository.com/artifact/tech.uom.lib/uom-lib-jackson\r\n\timplementation 'tech.uom.lib:uom-lib-jackson:2.1'\r\n\r\n\timplementation 'org.apache.commons:commons-lang3:3.12.0'\r\n\timplementation 'org.apache.commons:commons-compress:1.23.0'\r\n\timplementation 'org.apache.commons:commons-csv:1.10.0'\r\n\timplementation 'org.apache.commons:commons-io:1.3.2'\r\n\timplementation 'commons-codec:commons-codec:1.16.0'\r\n\timplementation 'org.apache.tika:tika-core:2.8.0'\r\n\r\n\timplementation 'uk.org.okapibarcode:okapibarcode:0.4.0'\r\n\r\n\t/*\r\n\tTest Dependencies\r\n\t */\r\n\ttestImplementation group: 'io.quarkus', name: 'quarkus-junit5'\r\n\ttestImplementation group: 'io.quarkus', name: 'quarkus-jacoco' // https://quarkus.io/guides/tests-with-coverage\r\n\ttestImplementation group: 'io.rest-assured', name: 'rest-assured'\r\n\ttestImplementation 'net.datafaker:datafaker:2.0.1'\r\n\ttestImplementation 'org.assertj:assertj-core:3.24.2'\r\n\r\n//\ttestImplementation 'com.github.dasniko:testcontainers-keycloak:2.5.0'\r\n\t//2.1.2 seems dud, fails to start & null pointers\r\n//\ttestImplementation 'org.keycloak:keycloak-admin-client:21.1.1'\r\n\t// 17.0.1 seems dud, might be related to keycloak issue\r\n\ttestImplementation 'io.jaegertracing:jaeger-testcontainers:0.7.0'\r\n\r\n\ttestImplementation 'org.seleniumhq.selenium:selenium-java:4.10.0'\r\n\ttestImplementation 'org.testcontainers:selenium:1.18.3'\r\n\ttestImplementation 'com.deque:axe-selenium:3.0'\r\n}\r\n```\r\n\r\nThis seems to happen more often when I pass a custom realm to keycloak, which is fairly odd to me. The keycloak container seems to start when these errors occur, but the other 50% keycloak fails to start but this error is not present (but keycloak not being present is obviously an issue). Actually, looks like when this error doesn't occur, all deservices are not present in Docker...\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Actual behavior\r\n\r\n_No response_\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n17\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.16.8 and 3.2.3\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\ngradle\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/35287/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
