{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/29987",
  "id": 1505070246,
  "node_id": "I_kwDOCFbutM5ZtYym",
  "number": 29987,
  "title": "OTel `LateBoundSampler` logs warning if using Liquibase and JDBC instrumentation",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2236031412,
      "node_id": "MDU6TGFiZWwyMjM2MDMxNDEy",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/tracing",
      "name": "area/tracing",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/255",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/255",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/255/labels",
    "id": 9565017,
    "node_id": "MI_kwDOCFbutM4AkfNZ",
    "number": 255,
    "title": "3.3.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 310,
    "state": "closed",
    "created_at": "2023-06-21T07:35:19Z",
    "updated_at": "2024-05-17T05:53:43Z",
    "due_on": null,
    "closed_at": "2023-08-09T11:23:12Z"
  },
  "comments": 7,
  "created_at": "2022-12-20T18:31:39Z",
  "updated_at": "2023-07-19T09:26:37Z",
  "closed_at": "2023-07-19T09:26:32Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nI was irritated by the following message very early during boot and started digging:\r\n```\r\nWARN  [io.qua.ope.run.tra.LateBoundSampler] (JPA Startup Thread) No Sampler delegate specified, no action taken.\r\n```\r\nTurns out that when you have [JDBC instrumentation](https://quarkus.io/guides/opentelemetry#jdbc) _and_ Liquibase migration at startup (using the same datasource and OTEL driver as the rest of the app), the sampler is apparently not set yet, hence the warning.\r\n\r\n### Expected behavior\r\n\r\nNo warning from OTEL extension, even if using \"startup time features\" such as the liquibase extension.\r\n\r\n### Actual behavior\r\n\r\nWarning logged\r\n\r\n### How to Reproduce?\r\n\r\n[liquibase-quickstart-with-otel.zip](https://github.com/quarkusio/quarkus/files/10280148/liquibase-quickstart-with-otel.zip)\r\n\r\n`mvn quarkus:dev`\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n2.15.0.Final\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n`LateBoundBatchSpanProcessor` issues a similar warning (if otlp export is not disabled).\r\n\r\nOf course it doesn't make much sense to trace liquibase JDBC operations, but simply using the regular app datasource is the default setup for simple cases.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29987/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
