{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/29427",
  "id": 1460680108,
  "node_id": "I_kwDOCFbutM5XEDWs",
  "number": 29427,
  "title": "quarkus.oidc.auth-server-url causing weird start-up failure",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1479557456,
      "node_id": "MDU6TGFiZWwxNDc5NTU3NDU2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/oidc",
      "name": "area/oidc",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2744442223,
      "node_id": "MDU6TGFiZWwyNzQ0NDQyMjIz",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/needs-reproducer",
      "name": "triage/needs-reproducer",
      "color": "FDE078",
      "default": false,
      "description": "We are waiting for a reproducer."
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/237",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/237",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/237/labels",
    "id": 9053771,
    "node_id": "MI_kwDOCFbutM4AiiZL",
    "number": 237,
    "title": "2.16.4.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 50,
    "state": "closed",
    "created_at": "2023-02-16T13:34:07Z",
    "updated_at": "2023-05-09T09:33:45Z",
    "due_on": null,
    "closed_at": "2023-03-02T15:51:14Z"
  },
  "comments": 14,
  "created_at": "2022-11-22T23:09:21Z",
  "updated_at": "2023-02-22T17:07:03Z",
  "closed_at": "2023-02-17T23:54:31Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nadding this line makes all the difference:\r\n\r\n`%ecom-dev.quarkus.oidc.auth-server-url=http://ecom-portal-keycloak:8080/realms/quarkus`\r\n\r\nmakes the application crash without much explanation on DEBUG log level:\r\n\r\n```posh\r\nexec java -Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager -XX:+UseG1GC -XX:+UseStringDeduplication -XX:InitialRAMPercentage=50.0 -XX:MaxRAMPercentage=50.0 -Xss256k -Xmx512m -cp . -jar /deployments/quarkus-run.jar\r\nNov 22, 2022 11:04:30 PM org.hibernate.validator.internal.util.Version\r\nINFO: HV000001: Hibernate Validator %s\r\nNov 22, 2022 11:04:38 PM io.quarkus.opentelemetry.runtime.tracing.LateBoundSampler\r\nWARN: No Sampler delegate specified, no action taken.\r\nNov 22, 2022 11:04:48 PM io.vertx.core.net.impl.ConnectionBase\r\nERROR: Connection reset\r\njava.net.SocketException: Connection reset\r\nat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394)\r\nat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426)\r\nat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:258)\r\nat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)\r\nat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\nat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\nat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nat java.base/java.lang.Thread.run(Thread.java:831)\r\nNov 22, 2022 11:04:48 PM io.quarkus.runtime.ApplicationLifecycleManager run\r\nERROR: Failed to start application (with profile ecom-dev)\r\njava.net.SocketException: Connection reset\r\nat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394)\r\nat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426)\r\nat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:258)\r\nat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)\r\nat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\nat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\nat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nat java.base/java.lang.Thread.run(Thread.java:831)\r\n```\r\n\r\nThe keycloak server 19.0.3 is ready and reachable: \r\n\r\n```\r\n/ $ curl -kv http://ecom-portal-keycloak:8080/realms/quarkus\r\n*   Trying 172.20.93.10:8080...\r\n* Connected to ecom-portal-keycloak (172.20.93.10) port 8080 (#0)\r\n> GET /realms/quarkus HTTP/1.1\r\n> Host: ecom-portal-keycloak:8080\r\n> User-Agent: curl/7.79.1\r\n> Accept: */*\r\n> \r\n* Mark bundle as not supporting multiuse\r\n< HTTP/1.1 200 OK\r\n< referrer-policy: no-referrer\r\n< x-frame-options: SAMEORIGIN\r\n< strict-transport-security: max-age=31536000; includeSubDomains\r\n< cache-control: no-cache\r\n< x-content-type-options: nosniff\r\n< x-xss-protection: 1; mode=block\r\n< content-type: application/json\r\n< content-length: 655\r\n< x-envoy-upstream-service-time: 92\r\n< date: Tue, 22 Nov 2022 23:08:14 GMT\r\n< server: envoy\r\n< \r\n* Connection #0 to host ecom-portal-keycloak left intact\r\n{\"realm\":\"quarkus\",\"public_key\":\"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzNMrtvYNG/QBFl+wH+89/asjb+PFU5I+8c+7y1qVgR88NoG53vGKM6GJMnu22nEf24AxXiRLR6SNgiKXhYISNlONREoDJcz9J5Fupm+5MkujHyMn7wLrBTDlFVWwMyVdCTcbmSddM8CkNqMpc8M49HroxxlJLlyaQZNiUKjQVKIsxVMzP5jXfthUtR2eMLLxSyLb6TOZfVrIRouQcDdSdn4q4Oj5eaEWHUg9EH6Q3nGmbL/JnWcvTlb1wDV/LMd4AvOZYKXEuf2RrOdkmNrZ0yXGT0dCzjjRDr+GvH7xUqAw8yAkw6/LegaN8+MPb0Qd9sEnGbkAh2iNrEg+LYDnnQIDAQAB\",\"token-service\":\"https://portal.ecom-dev.app.whirlpool.aws.fisv.cloud/realms/quarkus/protocol/openid-connect\",\"account-service\":\"https://portal.ecom-dev.app.whirlpool.aws.fisv.cloud/realms/quarkus/account\",\"tokens-not-before\":0}/ $ \r\n```\r\n\r\nAny ideas why such a configuration would make the application not start-up anymore?\r\n\r\n### Expected behavior\r\n\r\nsome meaningful error log, or for it to just work.\r\n\r\n### Actual behavior\r\n\r\nquarkus dead, sad developer.\r\n\r\n### How to Reproduce?\r\n\r\n_No response_\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\n_No response_\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### GraalVM version (if different from Java)\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n_No response_\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/29427/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
