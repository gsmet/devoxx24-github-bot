{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/33209",
  "id": 1700864746,
  "node_id": "I_kwDOCFbutM5lYSLq",
  "number": 33209,
  "title": "Native run of liquibase-quickstart fails with java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1956491735,
      "node_id": "MDU6TGFiZWwxOTU2NDkxNzM1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/liquibase",
      "name": "area/liquibase",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/245",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/245",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/245/labels",
    "id": 9272809,
    "node_id": "MI_kwDOCFbutM4AjX3p",
    "number": 245,
    "title": "3.1.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 1,
    "closed_issues": 189,
    "state": "closed",
    "created_at": "2023-04-12T07:42:31Z",
    "updated_at": "2024-04-17T06:04:35Z",
    "due_on": null,
    "closed_at": "2023-05-17T12:28:33Z"
  },
  "comments": 1,
  "created_at": "2023-05-08T20:11:51Z",
  "updated_at": "2023-05-09T16:23:09Z",
  "closed_at": "2023-05-09T16:23:04Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nNative run of liquibase-quickstart fails with java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()\r\n\r\n```\r\n[INFO] Running org.acme.liquibase.MigrationEndpointIT\r\n2023-05-08 21:54:43,118 WARN  [io.qua.hib.orm.dep.HibernateOrmProcessor] (build-10) Hibernate ORM is disabled because no JPA entities were found\r\n2023-05-08 21:54:43,319 INFO  [io.qua.dev.h2.dep.H2DevServicesProcessor] (build-27) Dev Services for H2 started.\r\n2023-05-08 21:54:43,322 INFO  [io.qua.dat.dep.dev.DevServicesDatasourceProcessor] (build-27) Dev Services for the default datasource (h2) started\r\nExecuting \"/Users/rsvoboda/git/quarkus-quickstarts/liquibase-quickstart/target/liquibase-quickstart-1.0.0-SNAPSHOT-runner -Dquarkus.http.port=8081 -Dquarkus.http.ssl-port=8444 -Dtest.url=http://localhost:8081 -Dquarkus.log.file.path=/Users/rsvoboda/git/quarkus-quickstarts/liquibase-quickstart/target/quarkus.log -Dquarkus.log.file.enable=true -Dquarkus.log.category.\"io.quarkus\".level=INFO -Dquarkus.datasource.password=quarkus -Dquarkus.datasource.db-kind=h2 -Dquarkus.datasource.jdbc.url=jdbc:h2:tcp://localhost:58844/mem:quarkus;DB_CLOSE_DELAY=-1 -Dquarkus.datasource.username=quarkus\"\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 4.426 s <<< FAILURE! - in org.acme.liquibase.MigrationEndpointIT\r\n[ERROR] org.acme.liquibase.MigrationEndpointIT.testListAllChangeStatus  Time elapsed: 1.459 s  <<< FAILURE!\r\njava.lang.AssertionError:\r\n1 expectation failed.\r\nExpected status code <200> but was <500>.\r\n...\r\n[ERROR] Failures:\r\n[ERROR]   MigrationEndpointIT>MigrationEndpointTest.testListAllChangeStatus:17 1 expectation failed.\r\nExpected status code <200> but was <500>.\r\n\r\n[INFO]\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0\r\n[INFO]\r\n[WARNING] Corrupted channel by directly writing to native stream in forked JVM 1. See FAQ web page and the dump file /Users/rsvoboda/git/quarkus-quickstarts/liquibase-quickstart/target/failsafe-reports/2023-05-08T21-54-41_060-jvmRun1.dumpstream\r\n```\r\n\r\nContent of 2023-05-08T21-54-41_060-jvmRun1.dumpstream, contains strange `Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.UnexpectedLiquibaseException: java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()'` as if the native build over-optimized the native binary. JVM mode passes the tests, and migration succeeds.\r\n```\r\n# Created at 2023-05-08T21:54:44.143\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '__  ____  __  _____   ___  __ ____  ______ '.\r\n\r\n# Created at 2023-05-08T21:54:44.144\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream ' --/ __ \\/ / / / _ | / _ \\/ //_/ / / / __/ '.\r\n\r\n# Created at 2023-05-08T21:54:44.145\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream ' -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\\ \\   '.\r\n\r\n# Created at 2023-05-08T21:54:44.145\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '--\\___\\_\\____/_/ |_/_/|_/_/|_|\\____/___/   '.\r\n\r\n# Created at 2023-05-08T21:54:44.165\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,141 INFO  [liq.database] (main) Set default schema name to PUBLIC'.\r\n\r\n# Created at 2023-05-08T21:54:44.167\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,164 INFO  [liq.lockservice] (main) Successfully acquired change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:44.168\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,167 INFO  [liq.parser] (main) INFO: An older version of the XSD is specified in one or more changelog's <databaseChangeLog> header. This can lead to unexpected outcomes. If a specific XSD is not required, please replace all XSD version references with \"-latest\". Learn more at https://docs.liquibase.com'.\r\n\r\n# Created at 2023-05-08T21:54:44.194\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'INFO: An older version of the XSD is specified in one or more changelog's <databaseChangeLog> header. This can lead to unexpected outcomes. If a specific XSD is not required, please replace all XSD version references with \"-latest\". Learn more at https://docs.liquibase.com'.\r\n\r\n# Created at 2023-05-08T21:54:44.200\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,193 INFO  [liquibase] (main) Parsed changelog file 'db/changeLog.xml''.\r\n\r\n# Created at 2023-05-08T21:54:44.215\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,199 INFO  [liq.servicelocator] (main) Cannot load service: liquibase.command.CommandStep: Provider liquibase.command.core.StartH2CommandStep not found'.\r\n\r\n# Created at 2023-05-08T21:54:44.220\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,214 INFO  [liq.changelog] (main) Creating database history table with name: PUBLIC.DATABASECHANGELOG'.\r\n\r\n# Created at 2023-05-08T21:54:44.221\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,219 INFO  [liq.command] (main) Using deploymentId: 3575684218'.\r\n\r\n# Created at 2023-05-08T21:54:44.223\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,220 INFO  [liq.changelog] (main) Reading from PUBLIC.DATABASECHANGELOG'.\r\n\r\n# Created at 2023-05-08T21:54:44.224\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Running Changeset: db/changeLog.xml::1::quarkus'.\r\n\r\n# Created at 2023-05-08T21:54:44.225\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,224 INFO  [liq.changelog] (main) Table quarkus created'.\r\n\r\n# Created at 2023-05-08T21:54:44.228\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,224 INFO  [liq.changelog] (main) ChangeSet db/changeLog.xml::1::quarkus ran successfully in 2ms'.\r\n\r\n# Created at 2023-05-08T21:54:44.229\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) UPDATE SUMMARY'.\r\n\r\n# Created at 2023-05-08T21:54:44.230\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) Run:                          1'.\r\n\r\n# Created at 2023-05-08T21:54:44.230\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) Previously run:               0'.\r\n\r\n# Created at 2023-05-08T21:54:44.231\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) Filtered out:                 0'.\r\n\r\n# Created at 2023-05-08T21:54:44.232\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) -------------------------------'.\r\n\r\n# Created at 2023-05-08T21:54:44.232\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) Total change sets:            1'.\r\n\r\n# Created at 2023-05-08T21:54:44.233\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'UPDATE SUMMARY'.\r\n\r\n# Created at 2023-05-08T21:54:44.233\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Run:                          1'.\r\n\r\n# Created at 2023-05-08T21:54:44.234\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Previously run:               0'.\r\n\r\n# Created at 2023-05-08T21:54:44.234\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Filtered out:                 0'.\r\n\r\n# Created at 2023-05-08T21:54:44.235\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '-------------------------------'.\r\n\r\n# Created at 2023-05-08T21:54:44.235\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Total change sets:            1'.\r\n\r\n# Created at 2023-05-08T21:54:44.236\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.util] (main) Update summary generated'.\r\n\r\n# Created at 2023-05-08T21:54:44.236\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,228 INFO  [liq.command] (main) Update command completed successfully.'.\r\n\r\n# Created at 2023-05-08T21:54:44.237\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Liquibase: Update has been successful.'.\r\n\r\n# Created at 2023-05-08T21:54:44.237\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,230 INFO  [liq.lockservice] (main) Successfully released change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:44.238\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,233 INFO  [liq.lockservice] (main) Successfully released change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:44.238\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,233 INFO  [liq.command] (main) Command execution complete'.\r\n\r\n# Created at 2023-05-08T21:54:44.249\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,235 INFO  [liq.lockservice] (main) Successfully released change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:44.250\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,249 INFO  [io.quarkus] (main) liquibase-quickstart 1.0.0-SNAPSHOT native (powered by Quarkus 999-SNAPSHOT) started in 0.155s. Listening on: http://0.0.0.0:8081'.\r\n\r\n# Created at 2023-05-08T21:54:44.251\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,249 INFO  [io.quarkus] (main) Profile prod activated. '.\r\n\r\n# Created at 2023-05-08T21:54:44.663\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:44,249 INFO  [io.quarkus] (main) Installed features: [agroal, cdi, hibernate-orm, jdbc-h2, liquibase, narayana-jta, resteasy-reactive, resteasy-reactive-jackson, smallrye-context-propagation, vertx]'.\r\n\r\n# Created at 2023-05-08T21:54:45.545\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,539 INFO  [liq.database] (executor-thread-1) Set default schema name to PUBLIC'.\r\n\r\n# Created at 2023-05-08T21:54:45.546\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,545 INFO  [liq.lockservice] (executor-thread-1) Successfully acquired change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:45.551\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,545 INFO  [liq.command] (executor-thread-1) Dropping Database Objects in schema: QUARKUS.PUBLIC'.\r\n\r\n# Created at 2023-05-08T21:54:45.557\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,550 INFO  [liq.lockservice] (executor-thread-1) Successfully released change log lock'.\r\n\r\n# Created at 2023-05-08T21:54:45.558\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,557 INFO  [liq.command] (executor-thread-1) Command execution complete'.\r\n\r\n# Created at 2023-05-08T21:54:45.559\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,558 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-1) HTTP Request to /migration/status failed, error id: 2db66e3e-0732-43d3-af13-4f1fd6381566-1: liquibase.exception.DatabaseException: liquibase.exception.CommandExecutionException: liquibase.exception.UnexpectedLiquibaseException: java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()'.\r\n\r\n# Created at 2023-05-08T21:54:45.560\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.Liquibase.dropAll(Liquibase.java:1154)'.\r\n\r\n# Created at 2023-05-08T21:54:45.560\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.Liquibase.dropAll(Liquibase.java:1131)'.\r\n\r\n# Created at 2023-05-08T21:54:45.560\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.acme.liquibase.MigrationService.checkMigration(MigrationService.java:19)'.\r\n\r\n# Created at 2023-05-08T21:54:45.561\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.acme.liquibase.MigrationService_ClientProxy.checkMigration(Unknown Source)'.\r\n\r\n# Created at 2023-05-08T21:54:45.561\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.acme.liquibase.MigrationResource.migrationStatus(MigrationResource.java:26)'.\r\n\r\n# Created at 2023-05-08T21:54:45.562\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.acme.liquibase.MigrationResource_ClientProxy.migrationStatus(Unknown Source)'.\r\n\r\n# Created at 2023-05-08T21:54:45.562\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.acme.liquibase.MigrationResource$quarkusrestinvoker$migrationStatus_6b8b5a4a70019705845adafdf9fba90236c27b0c.invoke(Unknown Source)'.\r\n\r\n# Created at 2023-05-08T21:54:45.563\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)'.\r\n\r\n# Created at 2023-05-08T21:54:45.564\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)'.\r\n\r\n# Created at 2023-05-08T21:54:45.564\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)'.\r\n\r\n# Created at 2023-05-08T21:54:45.565\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)'.\r\n\r\n# Created at 2023-05-08T21:54:45.565\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)'.\r\n\r\n# Created at 2023-05-08T21:54:45.566\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)'.\r\n\r\n# Created at 2023-05-08T21:54:45.566\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)'.\r\n\r\n# Created at 2023-05-08T21:54:45.567\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)'.\r\n\r\n# Created at 2023-05-08T21:54:45.568\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)'.\r\n\r\n# Created at 2023-05-08T21:54:45.568\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat java.base@17.0.6/java.lang.Thread.run(Thread.java:833)'.\r\n\r\n# Created at 2023-05-08T21:54:45.569\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775)'.\r\n\r\n# Created at 2023-05-08T21:54:45.570\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:203)'.\r\n\r\n# Created at 2023-05-08T21:54:45.570\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.UnexpectedLiquibaseException: java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()'.\r\n\r\n# Created at 2023-05-08T21:54:45.571\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.command.CommandScope.execute(CommandScope.java:235)'.\r\n\r\n# Created at 2023-05-08T21:54:45.571\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.Liquibase.dropAll(Liquibase.java:1152)'.\r\n\r\n# Created at 2023-05-08T21:54:45.572\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\t... 18 more'.\r\n\r\n# Created at 2023-05-08T21:54:45.572\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Caused by: liquibase.exception.UnexpectedLiquibaseException: java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()'.\r\n\r\n# Created at 2023-05-08T21:54:45.573\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.include(DatabaseSnapshot.java:334)'.\r\n\r\n# Created at 2023-05-08T21:54:45.573\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.replaceObject(DatabaseSnapshot.java:435)'.\r\n\r\n# Created at 2023-05-08T21:54:45.574\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.includeNestedObjects(DatabaseSnapshot.java:369)'.\r\n\r\n# Created at 2023-05-08T21:54:45.574\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.include(DatabaseSnapshot.java:332)'.\r\n\r\n# Created at 2023-05-08T21:54:45.575\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.init(DatabaseSnapshot.java:106)'.\r\n\r\n# Created at 2023-05-08T21:54:45.575\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.<init>(DatabaseSnapshot.java:59)'.\r\n\r\n# Created at 2023-05-08T21:54:45.576\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.JdbcDatabaseSnapshot.<init>(JdbcDatabaseSnapshot.java:34)'.\r\n\r\n# Created at 2023-05-08T21:54:45.576\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.SnapshotGeneratorFactory.createSnapshot(SnapshotGeneratorFactory.java:214)'.\r\n\r\n# Created at 2023-05-08T21:54:45.577\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.SnapshotGeneratorFactory.createSnapshot(SnapshotGeneratorFactory.java:243)'.\r\n\r\n# Created at 2023-05-08T21:54:45.577\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.SnapshotGeneratorFactory.createSnapshot(SnapshotGeneratorFactory.java:227)'.\r\n\r\n# Created at 2023-05-08T21:54:45.578\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.lockservice.StandardLockService.destroy(StandardLockService.java:496)'.\r\n\r\n# Created at 2023-05-08T21:54:45.578\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.command.core.InternalDropAllCommandStep.run(InternalDropAllCommandStep.java:118)'.\r\n\r\n# Created at 2023-05-08T21:54:45.579\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.command.CommandScope.execute(CommandScope.java:212)'.\r\n\r\n# Created at 2023-05-08T21:54:45.579\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\t... 19 more'.\r\n\r\n# Created at 2023-05-08T21:54:45.579\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream 'Caused by: java.lang.NoSuchMethodException: java.util.concurrent.ConcurrentHashMap.<init>()'.\r\n\r\n# Created at 2023-05-08T21:54:45.580\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat java.base@17.0.6/java.lang.Class.getConstructor0(DynamicHub.java:3585)'.\r\n\r\n# Created at 2023-05-08T21:54:45.580\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat java.base@17.0.6/java.lang.Class.getConstructor(DynamicHub.java:2271)'.\r\n\r\n# Created at 2023-05-08T21:54:45.581\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.replaceObject(DatabaseSnapshot.java:475)'.\r\n\r\n# Created at 2023-05-08T21:54:45.581\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.includeNestedObjects(DatabaseSnapshot.java:369)'.\r\n\r\n# Created at 2023-05-08T21:54:45.620\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\tat liquibase.snapshot.DatabaseSnapshot.include(DatabaseSnapshot.java:332)'.\r\n\r\n# Created at 2023-05-08T21:54:45.620\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '\t... 31 more'.\r\n\r\n# Created at 2023-05-08T21:54:46.125\r\nCorrupted channel by directly writing to native stream in forked JVM 1. Stream '2023-05-08 21:54:45,619 INFO  [io.quarkus] (Shutdown thread) liquibase-quickstart stopped in 0.002s'.\r\n```\r\n\n\n### Expected behavior\n\nNative run works\r\n\n\n### Actual behavior\n\nNative run fails\n\n### How to Reproduce?\n\nRun https://github.com/quarkusio/quarkus-quickstarts/tree/development/liquibase-quickstart with Quarkus main\n\n### Output of `uname -a` or `ver`\n\nmacOS\n\n### Output of `java -version`\n\nopenjdk version \"17.0.6\" 2023-01-17\n\n### GraalVM version (if different from Java)\n\nOpenJDK Runtime Environment GraalVM CE 22.3.1 (build 17.0.6+10-jvmci-22.3-b13)\n\n### Quarkus version or git rev\n\nmain\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/33209/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
