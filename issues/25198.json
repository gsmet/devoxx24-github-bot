{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/25198",
  "id": 1217295912,
  "node_id": "I_kwDOCFbutM5IjnYo",
  "number": 25198,
  "title": "ClassNotFound Quarkus BootStrap with Kogito and Marshalling error Protobuf marshaller",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1424123054,
      "node_id": "MDU6TGFiZWwxNDI0MTIzMDU0",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kogito",
      "name": "area/kogito",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": null,
  "comments": 9,
  "created_at": "2022-04-27T12:38:45Z",
  "updated_at": "2022-05-01T10:10:08Z",
  "closed_at": "2022-05-01T10:09:54Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nIf we have a process variable in kogito app as java.util.List<org.doogle.kogito.Sample> it throws ClassNotFound Error when running in Dev Mode.\r\njava.lang.ClassNotFoundException: org.doogle.kogito.Sample\r\n\r\n@evacchi need some help to overcome this.\n\n### Expected behavior\n\nThe system should auto discover and register the classes in QuarkusClassLoader. Need not throw error for native mode.\n\n### Actual behavior\n\nERROR Full Stack Tracke\r\n\r\n> 2022-04-27 17:53:22,185 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-0) HTTP Request to /pr failed, error id: cabdea56-2320-43ea-9c72-007f0905a210-1: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Error while unmarshalling process instance\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:124)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallReadOnlyProcessInstance(ProcessInstanceMarshallerService.java:133)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.unmarshall(MongoDBProcessInstances.java:102)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.values(MongoDBProcessInstances.java:94)\r\n\tat org.kie.kogito.process.ProcessInstances.values(ProcessInstances.java:30)\r\n\tat org.kie.kogito.process.impl.ProcessServiceImpl.getProcessInstanceOutput(ProcessServiceImpl.java:94)\r\n\tat com.example.PrResource.getResources_pr(PrResource.java:83)\r\n\tat com.example.PrResource_Subclass.getResources_pr$$superforward1(Unknown Source)\r\n\tat com.example.PrResource_Subclass$$function$$35.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:49)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.example.PrResource_Subclass.getResources_pr(Unknown Source)\r\n\tat com.example.PrResource_ClientProxy.getResources_pr(Unknown Source)\r\n\tat com.example.PrResource$quarkusrestinvoker$getResources_pr_756fcda70e20ec9af95114c348d21c591347d9e0.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:7)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:548)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Unexpected error while trying to read object\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:79)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.unmarshall(ProtobufObjectMarshallerStrategy.java:69)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufVariableReader.buildVariables(ProtobufVariableReader.java:44)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkItemNodeInstance(ProtobufProcessInstanceReader.java:478)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildNodeInstance(ProtobufProcessInstanceReader.java:249)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkflow(ProtobufProcessInstanceReader.java:164)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.read(ProtobufProcessInstanceReader.java:115)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceMarshaller.readProcessInstance(ProtobufProcessInstanceMarshaller.java:47)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:122)\r\n\t... 28 more\r\nCaused by: java.lang.ClassNotFoundException: org.doogle.kogito.Sample\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:438)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:414)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:467)\r\n\tat java.base/java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:778)\r\n\tat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2045)\r\n\tat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1909)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2235)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat java.base/java.util.ArrayList.readObject(ArrayList.java:899)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1231)\r\n\tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:77)\r\n\t... 36 more\r\n\r\n2022-04-27 17:53:22,190 ERROR [org.jbo.res.rea.com.cor.AbstractResteasyReactiveContext] (executor-thread-0) Request failed: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Error while unmarshalling process instance\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:124)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallReadOnlyProcessInstance(ProcessInstanceMarshallerService.java:133)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.unmarshall(MongoDBProcessInstances.java:102)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.values(MongoDBProcessInstances.java:94)\r\n\tat org.kie.kogito.process.ProcessInstances.values(ProcessInstances.java:30)\r\n\tat org.kie.kogito.process.impl.ProcessServiceImpl.getProcessInstanceOutput(ProcessServiceImpl.java:94)\r\n\tat com.example.PrResource.getResources_pr(PrResource.java:83)\r\n\tat com.example.PrResource_Subclass.getResources_pr$$superforward1(Unknown Source)\r\n\tat com.example.PrResource_Subclass$$function$$35.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:49)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.example.PrResource_Subclass.getResources_pr(Unknown Source)\r\n\tat com.example.PrResource_ClientProxy.getResources_pr(Unknown Source)\r\n\tat com.example.PrResource$quarkusrestinvoker$getResources_pr_756fcda70e20ec9af95114c348d21c591347d9e0.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:7)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:548)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Unexpected error while trying to read object\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:79)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.unmarshall(ProtobufObjectMarshallerStrategy.java:69)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufVariableReader.buildVariables(ProtobufVariableReader.java:44)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkItemNodeInstance(ProtobufProcessInstanceReader.java:478)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildNodeInstance(ProtobufProcessInstanceReader.java:249)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkflow(ProtobufProcessInstanceReader.java:164)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.read(ProtobufProcessInstanceReader.java:115)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceMarshaller.readProcessInstance(ProtobufProcessInstanceMarshaller.java:47)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:122)\r\n\t... 28 more\r\nCaused by: java.lang.ClassNotFoundException: org.doogle.kogito.Sample\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:438)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:414)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:467)\r\n\tat java.base/java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:778)\r\n\tat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2045)\r\n\tat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1909)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2235)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat java.base/java.util.ArrayList.readObject(ArrayList.java:899)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1231)\r\n\tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:77)\r\n\t... 36 more\r\n\r\n2022-04-27 17:54:06,226 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-0) HTTP Request to /pr/cb7d086a-e2dc-4863-8a24-c91faf4469a8 failed, error id: cabdea56-2320-43ea-9c72-007f0905a210-2: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Error while unmarshalling process instance\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:124)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallReadOnlyProcessInstance(ProcessInstanceMarshallerService.java:133)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.unmarshall(MongoDBProcessInstances.java:102)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.findById(MongoDBProcessInstances.java:79)\r\n\tat org.kie.kogito.process.impl.ProcessServiceImpl.findById(ProcessServiceImpl.java:103)\r\n\tat com.example.PrResource.getResource_pr(PrResource.java:99)\r\n\tat com.example.PrResource_Subclass.getResource_pr$$superforward1(Unknown Source)\r\n\tat com.example.PrResource_Subclass$$function$$28.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:49)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.example.PrResource_Subclass.getResource_pr(Unknown Source)\r\n\tat com.example.PrResource_ClientProxy.getResource_pr(Unknown Source)\r\n\tat com.example.PrResource$quarkusrestinvoker$getResource_pr_61ce85c208747caf9fed63af94a2155306cb3e0f.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:7)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:548)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Unexpected error while trying to read object\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:79)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.unmarshall(ProtobufObjectMarshallerStrategy.java:69)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufVariableReader.buildVariables(ProtobufVariableReader.java:44)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkItemNodeInstance(ProtobufProcessInstanceReader.java:478)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildNodeInstance(ProtobufProcessInstanceReader.java:249)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkflow(ProtobufProcessInstanceReader.java:164)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.read(ProtobufProcessInstanceReader.java:115)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceMarshaller.readProcessInstance(ProtobufProcessInstanceMarshaller.java:47)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:122)\r\n\t... 27 more\r\nCaused by: java.lang.ClassNotFoundException: org.doogle.kogito.Sample\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:438)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:414)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:467)\r\n\tat java.base/java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:778)\r\n\tat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2045)\r\n\tat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1909)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2235)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat java.base/java.util.ArrayList.readObject(ArrayList.java:899)\r\n\tat java.base/jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1231)\r\n\tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:77)\r\n\t... 35 more\r\n\r\n2022-04-27 17:54:06,229 ERROR [org.jbo.res.rea.com.cor.AbstractResteasyReactiveContext] (executor-thread-0) Request failed: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Error while unmarshalling process instance\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:124)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallReadOnlyProcessInstance(ProcessInstanceMarshallerService.java:133)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.unmarshall(MongoDBProcessInstances.java:102)\r\n\tat org.kie.kogito.mongodb.MongoDBProcessInstances.findById(MongoDBProcessInstances.java:79)\r\n\tat org.kie.kogito.process.impl.ProcessServiceImpl.findById(ProcessServiceImpl.java:103)\r\n\tat com.example.PrResource.getResource_pr(PrResource.java:99)\r\n\tat com.example.PrResource_Subclass.getResource_pr$$superforward1(Unknown Source)\r\n\tat com.example.PrResource_Subclass$$function$$28.apply(Unknown Source)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:49)\r\n\tat io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\r\n\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\r\n\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\r\n\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\r\n\tat com.example.PrResource_Subclass.getResource_pr(Unknown Source)\r\n\tat com.example.PrResource_ClientProxy.getResource_pr(Unknown Source)\r\n\tat com.example.PrResource$quarkusrestinvoker$getResource_pr_61ce85c208747caf9fed63af94a2155306cb3e0f.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:7)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:141)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:548)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.kie.kogito.serialization.process.ProcessInstanceMarshallerException: Unexpected error while trying to read object\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:79)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.unmarshall(ProtobufObjectMarshallerStrategy.java:69)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufVariableReader.buildVariables(ProtobufVariableReader.java:44)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkItemNodeInstance(ProtobufProcessInstanceReader.java:478)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildNodeInstance(ProtobufProcessInstanceReader.java:249)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.buildWorkflow(ProtobufProcessInstanceReader.java:164)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceReader.read(ProtobufProcessInstanceReader.java:115)\r\n\tat org.kie.kogito.serialization.process.impl.ProtobufProcessInstanceMarshaller.readProcessInstance(ProtobufProcessInstanceMarshaller.java:47)\r\n\tat org.kie.kogito.serialization.process.ProcessInstanceMarshallerService.unmarshallProcessInstance(ProcessInstanceMarshallerService.java:122)\r\n\t... 27 more\r\nCaused by: java.lang.ClassNotFoundException: org.doogle.kogito.Sample\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:438)\r\n\tat io.quarkus.bootstrap.classloading.QuarkusClassLoader.loadClass(QuarkusClassLoader.java:414)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:467)\r\n\tat java.base/java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:778)\r\n\tat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2045)\r\n\tat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1909)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2235)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat java.base/java.util.ArrayList.readObject(ArrayList.java:899)\r\n\tat java.base/jdk.internal.reflect.GeneratedMethodAccessor148.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1231)\r\n\tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2434)\r\n\tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2268)\r\n\tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1744)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n\tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n\tat org.kie.kogito.serialization.process.impl.marshallers.ProtobufObjectMarshallerStrategy.readObject(ProtobufObjectMarshallerStrategy.java:77)\r\n\t... 35 more\n\n### How to Reproduce?\n\nClone the repo https://github.com/debu999/kogito-samples.git\r\nit has a simple bpmn and just a reproducer\r\n<img width=\"1343\" alt=\"Screenshot 2022-04-27 at 6 04 33 PM\" src=\"https://user-images.githubusercontent.com/1910577/165519132-16df4f37-b4d1-4826-acc8-07809b902ec8.png\">\r\nIt only have a java.util.List<org.doogle.kogito.Sample>\r\nThe marshalling works fine and the payload is fine and rest api works fine. Post and PUT works but Get do not work.\r\n\r\nThe protofile registered in data index do not show it as array for  variable samplelist. Need some help to have list object in the process.\n\n### Output of `uname -a` or `ver`\n\nDarwin Debabratas-MacBook-Pro.local 21.3.0 Darwin Kernel Version 21.3.0: Wed Jan  5 21:37:58 PST 2022; root:xnu-8019.80.24~20/RELEASE_X86_64 x86_64\n\n### Output of `java -version`\n\nopenjdk version \"17.0.2\" 2022-01-18 OpenJDK Runtime Environment GraalVM CE 22.0.0.2 (build 17.0.2+8-jvmci-22.0-b05) OpenJDK 64-Bit Server VM GraalVM CE 22.0.0.2 (build 17.0.2+8-jvmci-22.0-b05, mixed mode, sharing)\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.8.2.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n3.8.5\n\n### Additional information\n\nNeed to know how to add single file to classloader in case its not detected. The error we get is in dev mode only and not sure why it is happening only if we have a list in kogito process.",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/25198/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
