{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/32004",
  "id": 1633924094,
  "node_id": "I_kwDOCFbutM5hY7P-",
  "number": 32004,
  "title": "Hibernate ORM and Search extensions now requires dev build profile",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1273026509,
      "node_id": "MDU6TGFiZWwxMjczMDI2NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/persistence",
      "name": "area/persistence",
      "color": "FBCA04",
      "default": false,
      "description": "OBSOLETE, DO NOT USE"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/240",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/240",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/240/labels",
    "id": 9161556,
    "node_id": "MI_kwDOCFbutM4Ai8tU",
    "number": 240,
    "title": "3.0.0.Beta1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 94,
    "state": "closed",
    "created_at": "2023-03-15T07:49:49Z",
    "updated_at": "2023-05-15T13:59:51Z",
    "due_on": null,
    "closed_at": "2023-03-22T14:24:37Z"
  },
  "comments": 1,
  "created_at": "2023-03-21T13:25:40Z",
  "updated_at": "2023-03-21T15:45:18Z",
  "closed_at": "2023-03-21T15:45:13Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\r\n\r\nI realize that opinions whether this is bug may differs heavily, but I want to create this issue (and  PR that proposes fix) as it seems unnecessary. Our CI is failing because of this https://github.com/quarkus-qe/quarkus-test-suite/pull/1124.\r\n\r\nhttps://github.com/quarkusio/quarkus/pull/31946 introduced `@IfBuildProfile(\"dev\")` for `HibernateOrmDevJsonRpcService` and `HibernateSearchElasticsearchDevJsonRpcService`. That means that in terms of Hibernate ORM extension, DEV profile is same now as DEV launch mode. Previously it wasn't true.\r\n\r\nWe curate Quarkus application and launch it in DEV mode without setting \"dev\" profile. \r\n\r\n### Expected behavior\r\n\r\nThere is easy fix possible on both Quarkus side or our side, however I would prefer if Hibernate ORM worked in DEV mode as previously.\r\n\r\n### Actual behavior\r\n\r\nDEV beans are missing\r\n\r\n```bash\r\n13:23:32,122 INFO  [app] 13:23:30,708 An error occurred during delivery of the @BeforeDestroyed(ApplicationScoped.class) event: jakarta.enterprise.inject.CreationException: Error creating synthetic bean [21527bfe81c05a31d9c61be490c9ebc04e8ab2d8]: jakarta.enterprise.inject.CreationException: Config root [io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet.\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig_21527bfe81c05a31d9c61be490c9ebc04e8ab2d8_Synthetic_Bean.doCreate(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig_21527bfe81c05a31d9c61be490c9ebc04e8ab2d8_Synthetic_Bean.create(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig_21527bfe81c05a31d9c61be490c9ebc04e8ab2d8_Synthetic_Bean.get(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig_21527bfe81c05a31d9c61be490c9ebc04e8ab2d8_Synthetic_Bean.get(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.CurrentInjectionPointProvider.get(CurrentInjectionPointProvider.java:48)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.JPAConfig_Bean.doCreate(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.JPAConfig_Bean.create(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.JPAConfig_Bean.create(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.AbstractSharedContext.createInstanceHandle(AbstractSharedContext.java:113)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.AbstractSharedContext$1.get(AbstractSharedContext.java:37)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.AbstractSharedContext$1.get(AbstractSharedContext.java:34)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.LazyValue.get(LazyValue.java:26)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.ComputingCache.computeIfAbsent(ComputingCache.java:69)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.AbstractSharedContext.get(AbstractSharedContext.java:34)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.JPAConfig_Observer_destroy_03fb872ecc5e4ea32f039e25a79f3b66499ca7ea.notify(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:344)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:332)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:262)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.impl.ArcContainerImpl.shutdown(ArcContainerImpl.java:389)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.Arc.shutdown(Arc.java:58)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.arc.runtime.ArcRecorder$1.run(ArcRecorder.java:49)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.runtime.StartupContext.runAllInReverseOrder(StartupContext.java:84)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.runtime.StartupContext.close(StartupContext.java:73)\r\n13:23:32,122 INFO  [app] \tat io.quarkus.runner.ApplicationImpl.<clinit>(Unknown Source)\r\n13:23:32,122 INFO  [app] \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n13:23:32,123 INFO  [app] \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n13:23:32,123 INFO  [app] \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:70)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:44)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:124)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n13:23:32,123 INFO  [app] \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runner.bootstrap.StartupActionImpl$1.run(StartupActionImpl.java:104)\r\n13:23:32,123 INFO  [app] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n13:23:32,123 INFO  [app] Caused by: jakarta.enterprise.inject.CreationException: Config root [io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet.\r\n13:23:32,123 INFO  [app] \tat io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig_21527bfe81c05a31d9c61be490c9ebc04e8ab2d8_Synthetic_Bean.createSynthetic(Unknown Source)\r\n13:23:32,123 INFO  [app] \t... 39 more\r\n13:23:32,123 INFO  [app] 13:23:30,709 HHH10005004: Stopping BeanContainer : io.quarkus.hibernate.orm.runtime.cdi.QuarkusArcBeanContainer@3672276e\r\n13:23:32,123 INFO  [app] 13:23:30,709 ArC DI container shut down\r\n13:23:32,123 INFO  [app] 13:23:30,710 Error running Quarkus: java.lang.reflect.InvocationTargetException\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n13:23:32,123 INFO  [app] \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n13:23:32,123 INFO  [app] \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n13:23:32,123 INFO  [app] \tat io.quarkus.runner.bootstrap.StartupActionImpl$1.run(StartupActionImpl.java:104)\r\n13:23:32,124 INFO  [app] \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n13:23:32,124 INFO  [app] Caused by: java.lang.ExceptionInInitializerError\r\n13:23:32,124 INFO  [app] \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n13:23:32,124 INFO  [app] \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n13:23:32,124 INFO  [app] \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n13:23:32,124 INFO  [app] \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n13:23:32,124 INFO  [app] \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:70)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:44)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.runtime.Quarkus.run(Quarkus.java:124)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n13:23:32,124 INFO  [app] \t... 6 more\r\n13:23:32,124 INFO  [app] Caused by: java.lang.RuntimeException: Failed to start quarkus\r\n13:23:32,124 INFO  [app] \tat io.quarkus.runner.ApplicationImpl.<clinit>(Unknown Source)\r\n13:23:32,124 INFO  [app] \t... 15 more\r\n13:23:32,124 INFO  [app] Caused by: jakarta.enterprise.inject.UnsatisfiedResolutionException: No bean found for required type [class io.quarkus.hibernate.orm.runtime.dev.HibernateOrmDevJsonRpcService] and qualifiers [[]]\r\n13:23:32,124 INFO  [app] \tat io.quarkus.arc.impl.InstanceImpl.bean(InstanceImpl.java:286)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.arc.impl.InstanceImpl.getInternal(InstanceImpl.java:307)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.arc.impl.InstanceImpl.get(InstanceImpl.java:188)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.devui.runtime.comms.JsonRpcRouter.populateJsonRPCMethods(JsonRpcRouter.java:59)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.devui.runtime.comms.JsonRpcRouter_ClientProxy.populateJsonRPCMethods(Unknown Source)\r\n13:23:32,124 INFO  [app] \tat io.quarkus.devui.runtime.DevUIRecorder.createJsonRpcRouter(DevUIRecorder.java:39)\r\n13:23:32,125 INFO  [app] \tat io.quarkus.deployment.steps.DevUIProcessor$createJsonRpcRouter558265827.deploy_0(Unknown Source)\r\n13:23:32,125 INFO  [app] \tat io.quarkus.deployment.steps.DevUIProcessor$createJsonRpcRouter558265827.deploy(Unknown Source)\r\n13:23:32,125 INFO  [app] \t... 16 more\r\n```\r\n\r\n### How to Reproduce?\r\n\r\nSteps to reproduce:\r\n\r\n1. `quarkus create app hibernate-reproducer -x hibernate-orm,resteasy-reactive,jdbc-postgresql --stream=3.0`\r\n2. `cd hibernate-reproducer/`\r\n3. `mvn quarkus:dev -Dquarkus.platform.version=999-SNAPSHOT -Dquarkus.platform.group-id=io.quarkus -Dquarkus.profile=stuff`\r\n\r\nI realize I can do `-Dquarkus.profile=stuff,dev` and it will work.\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\nLinux\r\n\r\n### Output of `java -version`\r\n\r\nopenjdk 17.0.4 2022-07-19\r\n\r\n### GraalVM version (if different from Java)\r\n\r\nOpenJDK Runtime Environment GraalVM CE 23.2\r\n\r\n### Quarkus version or git rev\r\n\r\n999-SNAPSHOT\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nApache Maven 3.8.6\r\n\r\n### Additional information\r\n\r\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/32004/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
