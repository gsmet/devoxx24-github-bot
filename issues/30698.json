{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/30698",
  "id": 1562076018,
  "node_id": "I_kwDOCFbutM5dG2Ny",
  "number": 30698,
  "title": "CORS Request same origin ignored if no other origin set",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1282139374,
      "node_id": "MDU6TGFiZWwxMjgyMTM5Mzc0",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/security",
      "name": "area/security",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/238",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/238",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/238/labels",
    "id": 9129801,
    "node_id": "MI_kwDOCFbutM4Ai09J",
    "number": 238,
    "title": "2.16.5.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 36,
    "state": "closed",
    "created_at": "2023-03-07T15:04:54Z",
    "updated_at": "2023-05-09T09:46:48Z",
    "due_on": null,
    "closed_at": "2023-03-22T10:34:48Z"
  },
  "comments": 9,
  "created_at": "2023-01-30T09:37:01Z",
  "updated_at": "2023-04-08T22:37:20Z",
  "closed_at": "2023-03-02T12:18:29Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nIf the CORS filter is enabled to prevent CORS attacks, but no other origin is set because we expect all requests from the same origin, at least POST requests are blocked in Chrome.\r\n\r\nGET requests do not send the origin header, so the CORS check is skipped, but POST requests include the origin header even, if it's from the same origin.\n\n### Expected behavior\n\nIf CORS is enabled, same origin requests are always successful, even if no other origins are set.\n\n### Actual behavior\n\nIf the property `quarkus.http.cors=true` is set, but `quarkus.http.cors.origins` is not set, the same origin policy introduced in #29626 should come into place and always allow requests from the same origin.\n\n### How to Reproduce?\n\nSteps to reproduce:\r\n1. create a web app with swagger UI\r\n2. add a POST method\r\n3. set `quarkus.http.cors=true`\r\n5. invoke it in Chrome via swagger\r\n\r\n\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.16.0.FINAL\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\nIn CORSFilter line 191:\r\nhttps://github.com/quarkusio/quarkus/blob/f060bb8ced7147a8f7487d7179cebc8f14847711/extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/cors/CORSFilter.java#L191\r\nthe AND includes also the sameOrigin.\r\n\r\nThe closing bracket of the AND should probably be after line 192?",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/30698/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
