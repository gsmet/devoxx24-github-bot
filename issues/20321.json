{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/20321",
  "id": 1004050192,
  "node_id": "I_kwDOCFbutM472JcQ",
  "number": 20321,
  "title": "gdb debugging of native images without setting the sources directory no longer works as of GraalVM/Mandrel 21.1",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2260340367,
      "node_id": "MDU6TGFiZWwyMjYwMzQwMzY3",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/mandrel",
      "name": "area/mandrel",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/154",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/154",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/154/labels",
    "id": 7253553,
    "node_id": "MI_kwDOCFbutM4Abq4x",
    "number": 154,
    "title": "2.2.4.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 139,
    "state": "closed",
    "created_at": "2021-10-14T16:59:16Z",
    "updated_at": "2022-02-15T07:24:43Z",
    "due_on": null,
    "closed_at": "2021-12-15T09:41:42Z"
  },
  "comments": 1,
  "created_at": "2021-09-22T09:08:26Z",
  "updated_at": "2021-11-30T14:36:27Z",
  "closed_at": "2021-09-24T05:43:16Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nhttps://github.com/oracle/graal/commit/dee66ca6e28fd519cef061130d20e28ec35d1a1f (included in GraalVM/Mandrel >=21.1) started enforcing the use of absolute paths in DW_AT_comp_dir. These paths are essentially pointing to the location of the \"sources\" directory holding the source code corresponding to the binary being debugged. In Quarkus we copy the \"sources\" directory after the compilation is done:\r\nhttps://github.com/quarkusio/quarkus/blob/5b91e6167e9694d7c3cc7e0fad529698e182824d/core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/NativeImageBuildStep.java#L226-L230\r\n\r\nAs a result the absolute paths written in the DW_AT_comp_dir entries become invalid and thus the user needs to invoke `directory path/to/sources` in gdb to let it know where to find the sources. This was optional prior to 21.1 as long as gdb was started from the same directory containing the sources directory. This last part made debugging on deployment environments a bit easier as well, since the user could copy the sources directory next to the binary and start gdb from there without any additional configuration.\n\n### Expected behavior\n\nWhen running gdb in the `target` directory, it should be able to detect the sources without additional configuration.\n\n### Actual behavior\n\ngdb requires using `directory` to point it to the sources directory.\n\n### How to Reproduce?\n\n1. Compile an application with `-Dnative` and `-Dquarkus.native.debug.enabled=true`\r\n2. Enter `target` directory and run `gdb <my-app-runner>`\r\n3. Run `info func <part of a method name in the app>` to get a method\r\n4. Try to list that method, e.g. `list myMethod`\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/20321/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
