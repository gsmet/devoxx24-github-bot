{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27893",
  "id": 1371085234,
  "node_id": "I_kwDOCFbutM5RuRmy",
  "number": 27893,
  "title": "JPA overridden properties from MapperSuperclass is not evaluated correctly",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1341157944,
      "node_id": "MDU6TGFiZWwxMzQxMTU3OTQ0",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/triage/upstream",
      "name": "triage/upstream",
      "color": "7db4d8",
      "default": false,
      "description": "Used for issues which are caused by issues in upstream projects/dependency"
    },
    {
      "id": 1425555736,
      "node_id": "MDU6TGFiZWwxNDI1NTU1NzM2",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/hibernate-orm",
      "name": "area/hibernate-orm",
      "color": "0366d6",
      "default": false,
      "description": "Hibernate ORM"
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/209",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/209",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/209/labels",
    "id": 8483139,
    "node_id": "MI_kwDOCFbutM4AgXFD",
    "number": 209,
    "title": "2.13.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 116,
    "state": "closed",
    "created_at": "2022-09-30T16:08:55Z",
    "updated_at": "2023-01-13T11:09:46Z",
    "due_on": null,
    "closed_at": "2022-10-05T12:39:54Z"
  },
  "comments": 4,
  "created_at": "2022-09-13T08:46:20Z",
  "updated_at": "2022-09-30T16:37:05Z",
  "closed_at": "2022-09-28T06:28:39Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nI am working on a spring-boot to quarkus migration project and I came through this issue when copying my JPA entities as it is from spring boot to quarkus. I have replicated the issue in a sample project (https://github.com/faskan/quarkus-hibernate-sample)\r\n\r\nThere exists a MappedSuperClass with name AbstractEntity, with the following field which is mapped to database column `name`\r\n```\r\n@MappedSuperclass\r\npublic class AbstractEntity {\r\n\r\n    @Column(length = 40, unique = true)\r\n    private String name;\r\n\r\n}\r\n```\r\n\r\nAnd my entity class overrides the name property like shown below. In my spring boot project, the overridden property (name) gets evaluated correctly. But in quarkus, it gets evaluated to null.\r\n\r\n```\r\n@Entity\r\n@Table(name = \"known_fruits\")\r\n@NamedQuery(name = \"Fruits.findAll\", query = \"SELECT f FROM Fruit f ORDER BY f.name\", hints = @QueryHint(name = \"org.hibernate.cacheable\", value = \"true\"))\r\n@Cacheable\r\npublic class Fruit extends AbstractEntity {\r\n\r\n    @Id\r\n    @SequenceGenerator(name = \"fruitsSequence\", sequenceName = \"known_fruits_id_seq\", allocationSize = 1, initialValue = 10)\r\n    @GeneratedValue(generator = \"fruitsSequence\")\r\n    private Integer id;\r\n\r\n    @Column(length = 40, unique = true)\r\n    private String name;\r\n\r\n    public Fruit() {\r\n    }\r\n\r\n    public Fruit(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe test case results in failure\r\n```\r\n[ERROR] Failures: \r\n[ERROR]   FruitsEndpointTest.testListAllFruits:21 3 expectations failed.\r\nResponse body doesn't match expectation.\r\nExpected: a string containing \"Cherry\"\r\n  Actual: [{\"name\":null,\"id\":2},{\"name\":null,\"id\":3},{\"name\":null,\"id\":1}]\r\n\r\nResponse body doesn't match expectation.\r\nExpected: a string containing \"Apple\"\r\n  Actual: [{\"name\":null,\"id\":2},{\"name\":null,\"id\":3},{\"name\":null,\"id\":1}]\r\n\r\nResponse body doesn't match expectation.\r\nExpected: a string containing \"Banana\"\r\n  Actual: [{\"name\":null,\"id\":2},{\"name\":null,\"id\":3},{\"name\":null,\"id\":1}]\r\n```\r\n\r\nThe test case gets successful when I remove `@MappedSuperclass` annotation, but I am not sure if it would break something else.\r\n\r\nI expect hibernate orm to evaluate the overridden property correctly when the MappedSuperclass annotation is present.\n\n### Expected behavior\n\nI expect hibernate orm to evaluate the overridden property correctly when the MappedSuperclass annotation is present.\n\n### Actual behavior\n\nThe value of the overridden properties gets evaluated to null when the MappedSuperclass annotation is present in the super class.\n\n### How to Reproduce?\n\nSteps to reproduct:\r\n\r\n1. Clone this repo https://github.com/faskan/quarkus-hibernate-sample\r\n2. run `mvn quarkus:dev`\r\n3. Test cases will fail because of incorrect evaluation of properties\n\n### Output of `uname -a` or `ver`\n\nDarwin Faisals-MacBook-Pro.local 21.6.0 Darwin Kernel Version 21.6.0: Wed Aug 10 14:25:27 PDT 2022; root:xnu-8020.141.5~2/RELEASE_X86_64 x86_64\n\n### Output of `java -version`\n\n_No response_\n\n### GraalVM version (if different from Java)\n\n2.12.1.Final\n\n### Quarkus version or git rev\n\n_No response_\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27893/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
