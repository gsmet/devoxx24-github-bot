{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/27979",
  "id": 1375421277,
  "node_id": "I_kwDOCFbutM5R-0Nd",
  "number": 27979,
  "title": "RESTEasy Reactive doesn't apply `ContainerRequestFilter`s to reactive methods",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1287515315,
      "node_id": "MDU6TGFiZWwxMjg3NTE1MzE1",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/kotlin",
      "name": "area/kotlin",
      "color": "0366d6",
      "default": false,
      "description": ""
    },
    {
      "id": 2552031458,
      "node_id": "MDU6TGFiZWwyNTUyMDMxNDU4",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest",
      "name": "area/rest",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/209",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/209",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/209/labels",
    "id": 8483139,
    "node_id": "MI_kwDOCFbutM4AgXFD",
    "number": 209,
    "title": "2.13.1.Final",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 116,
    "state": "closed",
    "created_at": "2022-09-30T16:08:55Z",
    "updated_at": "2023-01-13T11:09:46Z",
    "due_on": null,
    "closed_at": "2022-10-05T12:39:54Z"
  },
  "comments": 10,
  "created_at": "2022-09-16T05:16:25Z",
  "updated_at": "2022-09-30T16:33:39Z",
  "closed_at": "2022-09-22T11:14:24Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nWhen applying a name bound `ContainerRequestFilter` to a resource that has only reactive methods (in the discovery case they were Kotlin `suspend` methods) the filter is never called.\r\n\r\nThe filter is not applied even if the name binding annotation is explicitly applied to the method or if the annotation is applied to the class as a whole.\r\n\r\nThe filter did not do anything that made it blocking; not that it mattered since it was never called.\r\n\r\nAfter changing the filter to implement `ResteasyReactiveContainerRequestFilter` the filter was called as expected.\n\n### Expected behavior\n\n`ContainerRequestFilter`s are applied to reactive methods.\r\n\r\nAlternatively, some appropriate error should be generated to relay that `ResteasyReactiveContainerRequestFilter` must be implemented.\r\n\n\n### Actual behavior\n\nFilters must implement `ResteasyReactiveContainerRequestFilter` for them to be called for reactive methods.\r\n\r\nAlso, interestingly they are also applied to server methods even if you accidentally implement the client version `ResteasyReactiveClientRequestFilter`; which I found out because that's what I initially did.\n\n### How to Reproduce?\n\n## Create NameBinding Filter\r\n```java\r\n@NameBinding\r\n@interface MyFilter {}\r\n\r\n@MyFilter\r\nclass MyFilterImpl implements ContainerRequestFilter {...}\r\n```\r\n\r\n## Apply Filter to a reactive resource\r\n```java\r\n@MyFilter\r\nclass MyResource {\r\n  Uni<Void> shouldBeIntercepted() {...}\r\n}\r\n```\r\n\n\n### Output of `uname -a` or `ver`\n\nmacOS 12.6\n\n### Output of `java -version`\n\nOpenJDK 17.0.1\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n2.12.0.Final & 2.13.0.CR1\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nGradle 7.5.1\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/27979/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
