{
  "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862",
  "repository_url": "https://api.github.com/repos/quarkusio/quarkus",
  "labels_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862/labels{/name}",
  "comments_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862/comments",
  "events_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862/events",
  "html_url": "https://github.com/quarkusio/quarkus/issues/22862",
  "id": 1101568640,
  "node_id": "I_kwDOCFbutM5BqJqA",
  "number": 22862,
  "title": "Rest Client exausts Threads. ",
  "labels": [
    {
      "id": 985346620,
      "node_id": "MDU6TGFiZWw5ODUzNDY2MjA=",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug",
      "name": "kind/bug",
      "color": "d73a4a",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1326067509,
      "node_id": "MDU6TGFiZWwxMzI2MDY3NTA5",
      "url": "https://api.github.com/repos/quarkusio/quarkus/labels/area/rest-client",
      "name": "area/rest-client",
      "color": "0366d6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "milestone": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/milestones/161",
    "html_url": "https://github.com/quarkusio/quarkus/milestone/161",
    "labels_url": "https://api.github.com/repos/quarkusio/quarkus/milestones/161/labels",
    "id": 7468359,
    "node_id": "MI_kwDOCFbutM4AcfVH",
    "number": 161,
    "title": "2.7.0.CR1",
    "description": "",
    "creator": {
      "login": "gsmet",
      "id": 1279749,
      "node_id": "MDQ6VXNlcjEyNzk3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1279749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsmet",
      "html_url": "https://github.com/gsmet",
      "followers_url": "https://api.github.com/users/gsmet/followers",
      "following_url": "https://api.github.com/users/gsmet/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsmet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsmet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsmet/subscriptions",
      "organizations_url": "https://api.github.com/users/gsmet/orgs",
      "repos_url": "https://api.github.com/users/gsmet/repos",
      "events_url": "https://api.github.com/users/gsmet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsmet/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 334,
    "state": "closed",
    "created_at": "2021-12-08T07:48:18Z",
    "updated_at": "2022-02-03T19:52:11Z",
    "due_on": null,
    "closed_at": "2022-01-19T12:42:36Z"
  },
  "comments": 8,
  "created_at": "2022-01-13T11:20:45Z",
  "updated_at": "2022-01-18T18:26:53Z",
  "closed_at": "2022-01-18T16:41:47Z",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nThis is a major issue for us.\r\nI have dozens of services in prod that from time to time they freeze due to thread exhaustion. The vertex event loop stalls. \r\nhis can be traced back to unconfigured timeouts on rest clients that hog connections. \r\nWe need to go to all rest clients and specify connection and read timeouts on configurations, like:\r\n```\r\ncom.td.wfm.common.client.SomeRestClientClass/mp-rest/connectTimeout=500\r\ncom.td.wfm.common.client.SomeRestClientClass/mp-rest/readTimeout=1000\r\n```\r\nIf you use programatic rest creation you must:\r\n```\r\n        return RestClientBuilder.newBuilder()\r\n                                .baseUri(URI.create(uri))\r\n                                .connectTimeout(connectionTimeout, TimeUnit.MILLISECONDS)\r\n                                .readTimeout(readTimeout, TimeUnit.MILLISECONDS)\r\n                                //...\r\n```\r\n\r\nThere are many issues related with this. See:\r\nhttps://github.com/quarkusio/quarkus/issues/15056\r\nhttps://github.com/quarkusio/quarkus/issues/15383\r\nhttps://github.com/quarkusio/quarkus/issues/15191\r\n\r\nThis happens on 1.13.7.Final but I believe 2.* suffers from the same problem.\n\n### Expected behavior\n\nIf the REST Client connection is half closed in the other side, it will timeout after a default amount of time. \n\n### Actual behavior\n\nIf the REST Client connection is half closed in the other side it will never timeout.\n\n### How to Reproduce?\n\nYou need a rest client calling an endpoint in a loop, in different threads. The other side must hold the connection and not reply. \n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n11\n\n### GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n1.13.7.Final\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_",
  "reactions": {
    "url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/quarkusio/quarkus/issues/22862/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
